(self.webpackChunkprocessFlowWeb=self.webpackChunkprocessFlowWeb||[]).push([[8715],{1610:function(Ir,ze,He){var Ee;Ir.exports=(Ee=He(4465),function(U){var P={};function T(S){if(P[S])return P[S].exports;var M=P[S]={i:S,l:!1,exports:{}};return U[S].call(M.exports,M,M.exports,T),M.l=!0,M.exports}return T.m=U,T.c=P,T.i=function(S){return S},T.d=function(S,M,$){T.o(S,M)||Object.defineProperty(S,M,{configurable:!1,enumerable:!0,get:$})},T.n=function(S){var M=S&&S.__esModule?function(){return S.default}:function(){return S};return T.d(M,"a",M),M},T.o=function(S,M){return Object.prototype.hasOwnProperty.call(S,M)},T.p="",T(T.s=7)}([function(U,P){U.exports=Ee},function(U,P,T){"use strict";var S=T(0).FDLayoutConstants;function M(){}for(var $ in S)M[$]=S[$];M.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,M.DEFAULT_RADIAL_SEPARATION=S.DEFAULT_EDGE_LENGTH,M.DEFAULT_COMPONENT_SEPERATION=60,M.TILE=!0,M.TILING_PADDING_VERTICAL=10,M.TILING_PADDING_HORIZONTAL=10,M.TREE_REDUCTION_ON_INCREMENTAL=!1,U.exports=M},function(U,P,T){"use strict";var S=T(0).FDLayoutEdge;function M(R,Z,C){S.call(this,R,Z,C)}for(var $ in M.prototype=Object.create(S.prototype),S)M[$]=S[$];U.exports=M},function(U,P,T){"use strict";var S=T(0).LGraph;function M(R,Z,C){S.call(this,R,Z,C)}for(var $ in M.prototype=Object.create(S.prototype),S)M[$]=S[$];U.exports=M},function(U,P,T){"use strict";var S=T(0).LGraphManager;function M(R){S.call(this,R)}for(var $ in M.prototype=Object.create(S.prototype),S)M[$]=S[$];U.exports=M},function(U,P,T){"use strict";var S=T(0).FDLayoutNode,M=T(0).IMath;function $(Z,C,k,G){S.call(this,Z,C,k,G)}for(var R in $.prototype=Object.create(S.prototype),S)$[R]=S[R];$.prototype.move=function(){var Z=this.graphManager.getLayout();this.displacementX=Z.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=Z.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>Z.coolingFactor*Z.maxNodeDisplacement&&(this.displacementX=Z.coolingFactor*Z.maxNodeDisplacement*M.sign(this.displacementX)),Math.abs(this.displacementY)>Z.coolingFactor*Z.maxNodeDisplacement&&(this.displacementY=Z.coolingFactor*Z.maxNodeDisplacement*M.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),Z.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},$.prototype.propogateDisplacementToChildren=function(Z,C){for(var G,k=this.getChild().getNodes(),j=0;j<k.length;j++)null==(G=k[j]).getChild()?(G.moveBy(Z,C),G.displacementX+=Z,G.displacementY+=C):G.propogateDisplacementToChildren(Z,C)},$.prototype.setPred1=function(Z){this.pred1=Z},$.prototype.getPred1=function(){return pred1},$.prototype.getPred2=function(){return pred2},$.prototype.setNext=function(Z){this.next=Z},$.prototype.getNext=function(){return next},$.prototype.setProcessed=function(Z){this.processed=Z},$.prototype.isProcessed=function(){return processed},U.exports=$},function(U,P,T){"use strict";var S=T(0).FDLayout,M=T(4),$=T(3),R=T(5),Z=T(2),C=T(1),k=T(0).FDLayoutConstants,G=T(0).LayoutConstants,j=T(0).Point,W=T(0).PointD,le=T(0).Layout,ae=T(0).Integer,Y=T(0).IGeometry,te=T(0).LGraph,pe=T(0).Transform;function fe(){S.call(this),this.toBeTiled={}}for(var Pe in fe.prototype=Object.create(S.prototype),S)fe[Pe]=S[Pe];fe.prototype.newGraphManager=function(){var x=new M(this);return this.graphManager=x,x},fe.prototype.newGraph=function(x){return new $(null,this.graphManager,x)},fe.prototype.newNode=function(x){return new R(this.graphManager,x)},fe.prototype.newEdge=function(x){return new Z(null,null,x)},fe.prototype.initParameters=function(){S.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=C.DEFAULT_EDGE_LENGTH<10?10:C.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=C.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=k.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=k.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=k.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=k.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=k.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/k.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=k.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},fe.prototype.layout=function(){return G.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},fe.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(C.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var q=new Set(this.getAllNodes()),X=this.nodesWithGravity.filter(function(Me){return q.has(Me)});this.graphManager.setAllNodesToApplyGravitation(X)}}else{var x=this.getFlatForest();x.length>0?this.positionNodesRadially(x):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),q=new Set(this.getAllNodes()),X=this.nodesWithGravity.filter(function(J){return q.has(J)}),this.graphManager.setAllNodesToApplyGravitation(X),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},fe.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%k.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var x=new Set(this.getAllNodes()),q=this.nodesWithGravity.filter(function(ge){return x.has(ge)});this.graphManager.setAllNodesToApplyGravitation(q),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=k.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=k.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var X=!this.isTreeGrowing&&!this.isGrowthFinished,J=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(X,J),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},fe.prototype.getPositionsData=function(){for(var x=this.graphManager.getAllNodes(),q={},X=0;X<x.length;X++){var J=x[X].rect,ge=x[X].id;q[ge]={id:ge,x:J.getCenterX(),y:J.getCenterY(),w:J.width,h:J.height}}return q},fe.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var x=!1;if("during"===k.ANIMATE)this.emit("layoutstarted");else{for(;!x;)x=this.tick();this.graphManager.updateBounds()}},fe.prototype.calculateNodesToApplyGravitationTo=function(){var q,ge,x=[],X=this.graphManager.getGraphs(),J=X.length;for(ge=0;ge<J;ge++)(q=X[ge]).updateConnected(),q.isConnected||(x=x.concat(q.getNodes()));return x},fe.prototype.createBendpoints=function(){var x=[];x=x.concat(this.graphManager.getAllEdges());var X,q=new Set;for(X=0;X<x.length;X++){var J=x[X];if(!q.has(J)){var ge=J.getSource(),Me=J.getTarget();if(ge==Me)J.getBendpoints().push(new W),J.getBendpoints().push(new W),this.createDummyNodesForBendpoints(J),q.add(J);else{var Fe=[];if(Fe=(Fe=Fe.concat(ge.getEdgeListToNode(Me))).concat(Me.getEdgeListToNode(ge)),!q.has(Fe[0])){var _e;if(Fe.length>1)for(_e=0;_e<Fe.length;_e++){var st=Fe[_e];st.getBendpoints().push(new W),this.createDummyNodesForBendpoints(st)}Fe.forEach(function(at){q.add(at)})}}}if(q.size==x.length)break}},fe.prototype.positionNodesRadially=function(x){for(var q=new j(0,0),X=Math.ceil(Math.sqrt(x.length)),J=0,ge=0,Me=0,Fe=new W(0,0),_e=0;_e<x.length;_e++){_e%X==0&&(Me=0,ge=J,0!=_e&&(ge+=C.DEFAULT_COMPONENT_SEPERATION),J=0);var st=x[_e],at=le.findCenterOfTree(st);q.x=Me,q.y=ge,(Fe=fe.radialLayout(st,at,q)).y>J&&(J=Math.floor(Fe.y)),Me=Math.floor(Fe.x+C.DEFAULT_COMPONENT_SEPERATION)}this.transform(new W(G.WORLD_CENTER_X-Fe.x/2,G.WORLD_CENTER_Y-Fe.y/2))},fe.radialLayout=function(x,q,X){var J=Math.max(this.maxDiagonalInTree(x),C.DEFAULT_RADIAL_SEPARATION);fe.branchRadialLayout(q,null,0,359,0,J);var ge=te.calculateBounds(x),Me=new pe;Me.setDeviceOrgX(ge.getMinX()),Me.setDeviceOrgY(ge.getMinY()),Me.setWorldOrgX(X.x),Me.setWorldOrgY(X.y);for(var Fe=0;Fe<x.length;Fe++)x[Fe].transform(Me);var st=new W(ge.getMaxX(),ge.getMaxY());return Me.inverseTransformPoint(st)},fe.branchRadialLayout=function(x,q,X,J,ge,Me){var Fe=(J-X+1)/2;Fe<0&&(Fe+=180);var st=(Fe+X)%360*Y.TWO_PI/360,Rt=(Math.cos(st),ge*Math.cos(st)),zt=ge*Math.sin(st);x.setCenter(Rt,zt);var We=[],lt=(We=We.concat(x.getEdges())).length;null!=q&&lt--;for(var Kt,bt=0,Tt=We.length,it=x.getEdgesBetween(q);it.length>1;){var Yt=it[0];it.splice(0,1);var kt=We.indexOf(Yt);kt>=0&&We.splice(kt,1),Tt--,lt--}Kt=null!=q?(We.indexOf(it[0])+1)%Tt:0;for(var vr=Math.abs(J-X)/lt,dr=Kt;bt!=lt;dr=++dr%Tt){var Gr=We[dr].getOtherEnd(x);if(Gr!=q){var _r=(X+bt*vr)%360;fe.branchRadialLayout(Gr,x,_r,(_r+vr)%360,ge+Me,Me),bt++}}},fe.maxDiagonalInTree=function(x){for(var q=ae.MIN_VALUE,X=0;X<x.length;X++){var ge=x[X].getDiagonal();ge>q&&(q=ge)}return q},fe.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},fe.prototype.groupZeroDegreeMembers=function(){var x=this,q={};this.memberGroups={},this.idToDummyNode={};for(var X=[],J=this.graphManager.getAllNodes(),ge=0;ge<J.length;ge++){var Fe=(Me=J[ge]).getParent();0===this.getNodeDegreeWithChildren(Me)&&(null==Fe.id||!this.getToBeTiled(Fe))&&X.push(Me)}for(ge=0;ge<X.length;ge++){var Me,_e=(Me=X[ge]).getParent().id;typeof q[_e]>"u"&&(q[_e]=[]),q[_e]=q[_e].concat(Me)}Object.keys(q).forEach(function(st){if(q[st].length>1){var at="DummyCompound_"+st;x.memberGroups[at]=q[st];var Rt=q[st][0].getParent(),zt=new R(x.graphManager);zt.id=at,zt.paddingLeft=Rt.paddingLeft||0,zt.paddingRight=Rt.paddingRight||0,zt.paddingBottom=Rt.paddingBottom||0,zt.paddingTop=Rt.paddingTop||0,x.idToDummyNode[at]=zt;var We=x.getGraphManager().add(x.newGraph(),zt),lt=Rt.getChild();lt.add(zt);for(var bt=0;bt<q[st].length;bt++){var Tt=q[st][bt];lt.remove(Tt),We.add(Tt)}}})},fe.prototype.clearCompounds=function(){var x={},q={};this.performDFSOnCompounds();for(var X=0;X<this.compoundOrder.length;X++)q[this.compoundOrder[X].id]=this.compoundOrder[X],x[this.compoundOrder[X].id]=[].concat(this.compoundOrder[X].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[X].getChild()),this.compoundOrder[X].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(x,q)},fe.prototype.clearZeroDegreeMembers=function(){var x=this,q=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(X){var J=x.idToDummyNode[X];q[X]=x.tileNodes(x.memberGroups[X],J.paddingLeft+J.paddingRight),J.rect.width=q[X].width,J.rect.height=q[X].height})},fe.prototype.repopulateCompounds=function(){for(var x=this.compoundOrder.length-1;x>=0;x--){var q=this.compoundOrder[x];this.adjustLocations(this.tiledMemberPack[q.id],q.rect.x,q.rect.y,q.paddingLeft,q.paddingTop)}},fe.prototype.repopulateZeroDegreeMembers=function(){var x=this,q=this.tiledZeroDegreePack;Object.keys(q).forEach(function(X){var J=x.idToDummyNode[X];x.adjustLocations(q[X],J.rect.x,J.rect.y,J.paddingLeft,J.paddingTop)})},fe.prototype.getToBeTiled=function(x){var q=x.id;if(null!=this.toBeTiled[q])return this.toBeTiled[q];var X=x.getChild();if(null==X)return this.toBeTiled[q]=!1,!1;for(var J=X.getNodes(),ge=0;ge<J.length;ge++){var Me=J[ge];if(this.getNodeDegree(Me)>0)return this.toBeTiled[q]=!1,!1;if(null!=Me.getChild()){if(!this.getToBeTiled(Me))return this.toBeTiled[q]=!1,!1}else this.toBeTiled[Me.id]=!1}return this.toBeTiled[q]=!0,!0},fe.prototype.getNodeDegree=function(x){for(var X=x.getEdges(),J=0,ge=0;ge<X.length;ge++){var Me=X[ge];Me.getSource().id!==Me.getTarget().id&&(J+=1)}return J},fe.prototype.getNodeDegreeWithChildren=function(x){var q=this.getNodeDegree(x);if(null==x.getChild())return q;for(var X=x.getChild().getNodes(),J=0;J<X.length;J++)q+=this.getNodeDegreeWithChildren(X[J]);return q},fe.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},fe.prototype.fillCompexOrderByDFS=function(x){for(var q=0;q<x.length;q++){var X=x[q];null!=X.getChild()&&this.fillCompexOrderByDFS(X.getChild().getNodes()),this.getToBeTiled(X)&&this.compoundOrder.push(X)}},fe.prototype.adjustLocations=function(x,q,X,J,ge){X+=ge;for(var Me=q+=J,Fe=0;Fe<x.rows.length;Fe++){var _e=x.rows[Fe];q=Me;for(var st=0,at=0;at<_e.length;at++){var Rt=_e[at];Rt.rect.x=q,Rt.rect.y=X,q+=Rt.rect.width+x.horizontalPadding,Rt.rect.height>st&&(st=Rt.rect.height)}X+=st+x.verticalPadding}},fe.prototype.tileCompoundMembers=function(x,q){var X=this;this.tiledMemberPack=[],Object.keys(x).forEach(function(J){var ge=q[J];X.tiledMemberPack[J]=X.tileNodes(x[J],ge.paddingLeft+ge.paddingRight),ge.rect.width=X.tiledMemberPack[J].width,ge.rect.height=X.tiledMemberPack[J].height})},fe.prototype.tileNodes=function(x,q){var ge={rows:[],rowWidth:[],rowHeight:[],width:0,height:q,verticalPadding:C.TILING_PADDING_VERTICAL,horizontalPadding:C.TILING_PADDING_HORIZONTAL};x.sort(function(_e,st){return _e.rect.width*_e.rect.height>st.rect.width*st.rect.height?-1:_e.rect.width*_e.rect.height<st.rect.width*st.rect.height?1:0});for(var Me=0;Me<x.length;Me++){var Fe=x[Me];0==ge.rows.length?this.insertNodeToRow(ge,Fe,0,q):this.canAddHorizontal(ge,Fe.rect.width,Fe.rect.height)?this.insertNodeToRow(ge,Fe,this.getShortestRowIndex(ge),q):this.insertNodeToRow(ge,Fe,ge.rows.length,q),this.shiftToLastRow(ge)}return ge},fe.prototype.insertNodeToRow=function(x,q,X,J){var ge=J;X==x.rows.length&&(x.rows.push([]),x.rowWidth.push(ge),x.rowHeight.push(0));var Fe=x.rowWidth[X]+q.rect.width;x.rows[X].length>0&&(Fe+=x.horizontalPadding),x.rowWidth[X]=Fe,x.width<Fe&&(x.width=Fe);var _e=q.rect.height;X>0&&(_e+=x.verticalPadding);var st=0;_e>x.rowHeight[X]&&(st=x.rowHeight[X],x.rowHeight[X]=_e,st=x.rowHeight[X]-st),x.height+=st,x.rows[X].push(q)},fe.prototype.getShortestRowIndex=function(x){for(var q=-1,X=Number.MAX_VALUE,J=0;J<x.rows.length;J++)x.rowWidth[J]<X&&(q=J,X=x.rowWidth[J]);return q},fe.prototype.getLongestRowIndex=function(x){for(var q=-1,X=Number.MIN_VALUE,J=0;J<x.rows.length;J++)x.rowWidth[J]>X&&(q=J,X=x.rowWidth[J]);return q},fe.prototype.canAddHorizontal=function(x,q,X){var J=this.getShortestRowIndex(x);if(J<0)return!0;var ge=x.rowWidth[J];if(ge+x.horizontalPadding+q<=x.width)return!0;var Fe,_e,Me=0;return x.rowHeight[J]<X&&J>0&&(Me=X+x.verticalPadding-x.rowHeight[J]),Fe=x.width-ge>=q+x.horizontalPadding?(x.height+Me)/(ge+q+x.horizontalPadding):(x.height+Me)/x.width,Me=X+x.verticalPadding,(_e=x.width<q?(x.height+Me)/q:(x.height+Me)/x.width)<1&&(_e=1/_e),Fe<1&&(Fe=1/Fe),Fe<_e},fe.prototype.shiftToLastRow=function(x){var q=this.getLongestRowIndex(x),X=x.rowWidth.length-1,J=x.rows[q],ge=J[J.length-1],Me=ge.width+x.horizontalPadding;if(x.width-x.rowWidth[X]>Me&&q!=X){J.splice(-1,1),x.rows[X].push(ge),x.rowWidth[q]=x.rowWidth[q]-Me,x.rowWidth[X]=x.rowWidth[X]+Me,x.width=x.rowWidth[instance.getLongestRowIndex(x)];for(var Fe=Number.MIN_VALUE,_e=0;_e<J.length;_e++)J[_e].height>Fe&&(Fe=J[_e].height);q>0&&(Fe+=x.verticalPadding);var st=x.rowHeight[q]+x.rowHeight[X];x.rowHeight[q]=Fe,x.rowHeight[X]<ge.height+x.verticalPadding&&(x.rowHeight[X]=ge.height+x.verticalPadding),x.height+=x.rowHeight[q]+x.rowHeight[X]-st,this.shiftToLastRow(x)}},fe.prototype.tilingPreLayout=function(){C.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},fe.prototype.tilingPostLayout=function(){C.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},fe.prototype.reduceTrees=function(){for(var X,x=[],q=!0;q;){var J=this.graphManager.getAllNodes(),ge=[];q=!1;for(var Me=0;Me<J.length;Me++)1==(X=J[Me]).getEdges().length&&!X.getEdges()[0].isInterGraph&&null==X.getChild()&&(ge.push([X,X.getEdges()[0],X.getOwner()]),q=!0);if(1==q){for(var Fe=[],_e=0;_e<ge.length;_e++)1==ge[_e][0].getEdges().length&&(Fe.push(ge[_e]),ge[_e][0].getOwner().remove(ge[_e][0]));x.push(Fe),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=x},fe.prototype.growTree=function(x){for(var J,X=x[x.length-1],ge=0;ge<X.length;ge++)this.findPlaceforPrunedNode(J=X[ge]),J[2].add(J[0]),J[2].add(J[1],J[1].source,J[1].target);x.splice(x.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},fe.prototype.findPlaceforPrunedNode=function(x){var q,X,J=x[0],ge=(X=J==x[1].source?x[1].target:x[1].source).startX,Me=X.finishX,Fe=X.startY,_e=X.finishY,We=[0,0,0,0];if(Fe>0)for(var lt=ge;lt<=Me;lt++)We[0]+=this.grid[lt][Fe-1].length+this.grid[lt][Fe].length-1;if(Me<this.grid.length-1)for(lt=Fe;lt<=_e;lt++)We[1]+=this.grid[Me+1][lt].length+this.grid[Me][lt].length-1;if(_e<this.grid[0].length-1)for(lt=ge;lt<=Me;lt++)We[2]+=this.grid[lt][_e+1].length+this.grid[lt][_e].length-1;if(ge>0)for(lt=Fe;lt<=_e;lt++)We[3]+=this.grid[ge-1][lt].length+this.grid[ge][lt].length-1;for(var Tt,Kt,bt=ae.MAX_VALUE,it=0;it<We.length;it++)We[it]<bt?(bt=We[it],Tt=1,Kt=it):We[it]==bt&&Tt++;if(3==Tt&&0==bt)0==We[0]&&0==We[1]&&0==We[2]?q=1:0==We[0]&&0==We[1]&&0==We[3]?q=0:0==We[0]&&0==We[2]&&0==We[3]?q=3:0==We[1]&&0==We[2]&&0==We[3]&&(q=2);else if(2==Tt&&0==bt){var Yt=Math.floor(2*Math.random());q=0==We[0]&&0==We[1]?0==Yt?0:1:0==We[0]&&0==We[2]?0==Yt?0:2:0==We[0]&&0==We[3]?0==Yt?0:3:0==We[1]&&0==We[2]?0==Yt?1:2:0==We[1]&&0==We[3]?0==Yt?1:3:0==Yt?2:3}else q=4==Tt&&0==bt?Yt=Math.floor(4*Math.random()):Kt;0==q?J.setCenter(X.getCenterX(),X.getCenterY()-X.getHeight()/2-k.DEFAULT_EDGE_LENGTH-J.getHeight()/2):1==q?J.setCenter(X.getCenterX()+X.getWidth()/2+k.DEFAULT_EDGE_LENGTH+J.getWidth()/2,X.getCenterY()):2==q?J.setCenter(X.getCenterX(),X.getCenterY()+X.getHeight()/2+k.DEFAULT_EDGE_LENGTH+J.getHeight()/2):J.setCenter(X.getCenterX()-X.getWidth()/2-k.DEFAULT_EDGE_LENGTH-J.getWidth()/2,X.getCenterY())},U.exports=fe},function(U,P,T){"use strict";var S={};S.layoutBase=T(0),S.CoSEConstants=T(1),S.CoSEEdge=T(2),S.CoSEGraph=T(3),S.CoSEGraphManager=T(4),S.CoSELayout=T(6),S.CoSENode=T(5),U.exports=S}]))},1004:function(Ir,ze,He){var Ee;Ir.exports=(Ee=He(1610),function(U){var P={};function T(S){if(P[S])return P[S].exports;var M=P[S]={i:S,l:!1,exports:{}};return U[S].call(M.exports,M,M.exports,T),M.l=!0,M.exports}return T.m=U,T.c=P,T.i=function(S){return S},T.d=function(S,M,$){T.o(S,M)||Object.defineProperty(S,M,{configurable:!1,enumerable:!0,get:$})},T.n=function(S){var M=S&&S.__esModule?function(){return S.default}:function(){return S};return T.d(M,"a",M),M},T.o=function(S,M){return Object.prototype.hasOwnProperty.call(S,M)},T.p="",T(T.s=1)}([function(U,P){U.exports=Ee},function(U,P,T){"use strict";var S=T(0).layoutBase.LayoutConstants,M=T(0).layoutBase.FDLayoutConstants,$=T(0).CoSEConstants,R=T(0).CoSELayout,Z=T(0).CoSENode,C=T(0).layoutBase.PointD,k=T(0).layoutBase.DimensionD,G={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function W(Y){this.options=function j(Y,te){var pe={};for(var fe in Y)pe[fe]=Y[fe];for(var fe in te)pe[fe]=te[fe];return pe}(G,Y),le(this.options)}var le=function(te){null!=te.nodeRepulsion&&($.DEFAULT_REPULSION_STRENGTH=M.DEFAULT_REPULSION_STRENGTH=te.nodeRepulsion),null!=te.idealEdgeLength&&($.DEFAULT_EDGE_LENGTH=M.DEFAULT_EDGE_LENGTH=te.idealEdgeLength),null!=te.edgeElasticity&&($.DEFAULT_SPRING_STRENGTH=M.DEFAULT_SPRING_STRENGTH=te.edgeElasticity),null!=te.nestingFactor&&($.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=M.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=te.nestingFactor),null!=te.gravity&&($.DEFAULT_GRAVITY_STRENGTH=M.DEFAULT_GRAVITY_STRENGTH=te.gravity),null!=te.numIter&&($.MAX_ITERATIONS=M.MAX_ITERATIONS=te.numIter),null!=te.gravityRange&&($.DEFAULT_GRAVITY_RANGE_FACTOR=M.DEFAULT_GRAVITY_RANGE_FACTOR=te.gravityRange),null!=te.gravityCompound&&($.DEFAULT_COMPOUND_GRAVITY_STRENGTH=M.DEFAULT_COMPOUND_GRAVITY_STRENGTH=te.gravityCompound),null!=te.gravityRangeCompound&&($.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=M.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=te.gravityRangeCompound),null!=te.initialEnergyOnIncremental&&($.DEFAULT_COOLING_FACTOR_INCREMENTAL=M.DEFAULT_COOLING_FACTOR_INCREMENTAL=te.initialEnergyOnIncremental),S.QUALITY="draft"==te.quality?0:"proof"==te.quality?2:1,$.NODE_DIMENSIONS_INCLUDE_LABELS=M.NODE_DIMENSIONS_INCLUDE_LABELS=S.NODE_DIMENSIONS_INCLUDE_LABELS=te.nodeDimensionsIncludeLabels,$.DEFAULT_INCREMENTAL=M.DEFAULT_INCREMENTAL=S.DEFAULT_INCREMENTAL=!te.randomize,$.ANIMATE=M.ANIMATE=S.ANIMATE=te.animate,$.TILE=te.tile,$.TILING_PADDING_VERTICAL="function"==typeof te.tilingPaddingVertical?te.tilingPaddingVertical.call():te.tilingPaddingVertical,$.TILING_PADDING_HORIZONTAL="function"==typeof te.tilingPaddingHorizontal?te.tilingPaddingHorizontal.call():te.tilingPaddingHorizontal};W.prototype.run=function(){var Y,te,pe=this.options,Pe=(this.idToLNode={},this.layout=new R),x=this;x.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var q=Pe.newGraphManager();this.gm=q;var X=this.options.eles.nodes(),J=this.options.eles.edges();this.root=q.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(X),Pe);for(var ge=0;ge<J.length;ge++){var Me=J[ge],Fe=this.idToLNode[Me.data("source")],_e=this.idToLNode[Me.data("target")];Fe!==_e&&0==Fe.getEdgesBetween(_e).length&&(q.add(Pe.newEdge(),Fe,_e).id=Me.id())}var at=function(We,lt){"number"==typeof We&&(We=lt);var bt=We.data("id"),Tt=x.idToLNode[bt];return{x:Tt.getRect().getCenterX(),y:Tt.getRect().getCenterY()}},Rt=function zt(){for(var bt,We=function(){pe.fit&&pe.cy.fit(pe.eles,pe.padding),Y||(Y=!0,x.cy.one("layoutready",pe.ready),x.cy.trigger({type:"layoutready",layout:x}))},lt=x.options.refresh,Tt=0;Tt<lt&&!bt;Tt++)bt=x.stopped||x.layout.tick();if(bt)return Pe.checkLayoutSuccess()&&!Pe.isSubLayout&&Pe.doPostLayout(),Pe.tilingPostLayout&&Pe.tilingPostLayout(),Pe.isLayoutFinished=!0,x.options.eles.nodes().positions(at),We(),x.cy.one("layoutstop",x.options.stop),x.cy.trigger({type:"layoutstop",layout:x}),te&&cancelAnimationFrame(te),void(Y=!1);var Kt=x.layout.getPositionsData();pe.eles.nodes().positions(function(it,Yt){if("number"==typeof it&&(it=Yt),!it.isParent()){for(var kt=it.id(),vr=Kt[kt],dr=it;null==vr&&(vr=Kt[dr.data("parent")]||Kt["DummyCompound_"+dr.data("parent")],Kt[kt]=vr,null!=(dr=dr.parent()[0])););return null!=vr?{x:vr.x,y:vr.y}:{x:it.position("x"),y:it.position("y")}}}),We(),te=requestAnimationFrame(zt)};return Pe.addListener("layoutstarted",function(){"during"===x.options.animate&&(te=requestAnimationFrame(Rt))}),Pe.runLayout(),"during"!==this.options.animate&&(x.options.eles.nodes().not(":parent").layoutPositions(x,x.options,at),Y=!1),this},W.prototype.getTopMostNodes=function(Y){for(var te={},pe=0;pe<Y.length;pe++)te[Y[pe].id()]=!0;return Y.filter(function(Pe,x){"number"==typeof Pe&&(Pe=x);for(var q=Pe.parent()[0];null!=q;){if(te[q.id()])return!1;q=q.parent()[0]}return!0})},W.prototype.processChildrenList=function(Y,te,pe){for(var fe=te.length,Pe=0;Pe<fe;Pe++){var X,_e,x=te[Pe],q=x.children(),J=x.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((X=null!=x.outerWidth()&&null!=x.outerHeight()?Y.add(new Z(pe.graphManager,new C(x.position("x")-J.w/2,x.position("y")-J.h/2),new k(parseFloat(J.w),parseFloat(J.h)))):Y.add(new Z(this.graphManager))).id=x.data("id"),X.paddingLeft=parseInt(x.css("padding")),X.paddingTop=parseInt(x.css("padding")),X.paddingRight=parseInt(x.css("padding")),X.paddingBottom=parseInt(x.css("padding")),this.options.nodeDimensionsIncludeLabels&&x.isParent()){var ge=x.boundingBox({includeLabels:!0,includeNodes:!1}).w,Me=x.boundingBox({includeLabels:!0,includeNodes:!1}).h,Fe=x.css("text-halign");X.labelWidth=ge,X.labelHeight=Me,X.labelPos=Fe}this.idToLNode[x.data("id")]=X,isNaN(X.rect.x)&&(X.rect.x=0),isNaN(X.rect.y)&&(X.rect.y=0),null!=q&&q.length>0&&(_e=pe.getGraphManager().add(pe.newGraph(),X),this.processChildrenList(_e,q,pe))}},W.prototype.stop=function(){return this.stopped=!0,this};var ae=function(te){te("layout","cose-bilkent",W)};typeof cytoscape<"u"&&ae(cytoscape),U.exports=ae}]))},7846:function(Ir){Ir.exports=function(){"use strict";function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function He(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(t,e,r){return e&&Ee(t.prototype,e),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t,e){return function S(t){if(Array.isArray(t))return t}(t)||function M(t,e){var r=null==t?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,s,n=[],a=!0,i=!1;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(l){i=!0,s=l}finally{try{!a&&null!=r.return&&r.return()}finally{if(i)throw s}}return n}}(t,e)||function $(t,e){if(t){if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(t,e)}}(t,e)||function Z(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C=typeof window>"u"?null:window,k=C?C.navigator:null,G=ze(""),j=ze({}),W=ze(function(){}),le=typeof HTMLElement>"u"?"undefined":ze(HTMLElement),ae=function(e){return e&&e.instanceString&&te(e.instanceString)?e.instanceString():null},Y=function(e){return null!=e&&ze(e)==G},te=function(e){return null!=e&&ze(e)===W},pe=function(e){return!J(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},fe=function(e){return null!=e&&ze(e)===j&&!pe(e)&&e.constructor===Object},x=function(e){return null!=e&&ze(e)===ze(1)&&!isNaN(e)},X=function(e){if("undefined"!==le)return null!=e&&e instanceof HTMLElement},J=function(e){return ge(e)||Me(e)},ge=function(e){return"collection"===ae(e)&&e._private.single},Me=function(e){return"collection"===ae(e)&&!e._private.single},Fe=function(e){return"core"===ae(e)},_e=function(e){return"stylesheet"===ae(e)},at=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},We=function(e){return function(e){return null!=e&&ze(e)===j}(e)&&te(e.then)},bt=function(e,r){r||(r=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var s,o=arguments,l=r.apply(this,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(this,o)),s};return n.cache={},n},Tt=bt(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Kt=bt(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),it=bt(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Yt=function(e){return at(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},kt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",vr="rgb[a]?\\(("+kt+"[%]?)\\s*,\\s*("+kt+"[%]?)\\s*,\\s*("+kt+"[%]?)(?:\\s*,\\s*("+kt+"))?\\)",dr="rgb[a]?\\((?:"+kt+"[%]?)\\s*,\\s*(?:"+kt+"[%]?)\\s*,\\s*(?:"+kt+"[%]?)(?:\\s*,\\s*(?:"+kt+"))?\\)",Gr="hsl[a]?\\(("+kt+")\\s*,\\s*("+kt+"[%])\\s*,\\s*("+kt+"[%])(?:\\s*,\\s*("+kt+"))?\\)",_r="hsl[a]?\\((?:"+kt+")\\s*,\\s*(?:"+kt+"[%])\\s*,\\s*(?:"+kt+"[%])(?:\\s*,\\s*(?:"+kt+"))?\\)",on=function(e,r){return e<r?-1:e>r?1:0},rt=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(null!=n)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},ne=function(e){return(pe(e)?e:null)||function(e){return _[e.toLowerCase()]}(e)||function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var n,a,i,o=16;return 4===e.length?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}}(e)||function(e){var r,n=new RegExp("^"+vr+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}if((a[1]||a[2]||a[3])&&!(a[1]&&a[2]&&a[3]))return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;r.push(u)}}return r}(e)||function(e){var r,n,a,i,o,s,l,u;function f(d,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+6*(g-d)*y:y<.5?g:y<2/3?d+(g-d)*(2/3-y)*6:d}var c=new RegExp("^"+Gr+"$").exec(e);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(a=parseFloat(c[2]))<0||a>100||(a/=100,(i=parseFloat(c[3]))<0||i>100)||(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===a)s=l=u=Math.round(255*i);else{var h=i<.5?i*(1+a):i+a-i*a,v=2*i-h;s=Math.round(255*f(v,h,n+1/3)),l=Math.round(255*f(v,h,n)),u=Math.round(255*f(v,h,n-1/3))}r=[s,l,u,o]}return r}(e)},_={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},K=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(fe(o))throw Error("Tried to set map with object key");i<n.length-1?(null==r[o]&&(r[o]={}),r=r[o]):r[o]=e.value}},ie=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(fe(o))throw Error("Tried to get map with object key");if(null==(r=r[o]))return r}return r};var ee=function Ae(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ge="object"==typeof self&&self&&self.Object===Object&&self,Ke="object"==typeof re&&re&&re.Object===Object&&re||Ge||Function("return this")(),ct=function(){return Ke.Date.now()},Pt=/\s/;var vt=function Dt(t){for(var e=t.length;e--&&Pt.test(t.charAt(e)););return e},Gt=/^\s+/;var Tr=function Ht(t){return t&&t.slice(0,vt(t)+1).replace(Gt,"")},Qt=Ke.Symbol,Qa=Object.prototype,ga=Qa.hasOwnProperty,$r=Qa.toString,Je=Qt?Qt.toStringTag:void 0;var ht=function Xe(t){var e=ga.call(t,Je),r=t[Je];try{t[Je]=void 0;var n=!0}catch{}var a=$r.call(t);return n&&(e?t[Je]=r:delete t[Je]),a},Ut=Object.prototype.toString;var Tn=function tt(t){return Ut.call(t)},pa=Qt?Qt.toStringTag:void 0;var ya=function Yi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":pa&&pa in Object(t)?ht(t):Tn(t)};var Zt=function Hi(t){return null!=t&&"object"==typeof t};var Kr=function ma(t){return"symbol"==typeof t||Zt(t)&&"[object Symbol]"==ya(t)},Xi=/^[-+]0x[0-9a-f]+$/i,sr=/^0b[01]+$/i,Zr=/^0o[0-7]+$/i,mr=parseInt;var Qr=function ba(t){if("number"==typeof t)return t;if(Kr(t))return NaN;if(ee(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ee(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Tr(t);var r=sr.test(t);return r||Zr.test(t)?mr(t.slice(2),r?2:8):Xi.test(t)?NaN:+t},Mr=Math.max,ja=Math.min;var un=function Gn(t,e,r){var n,a,i,o,s,l,u=0,f=!1,c=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(L){var w=n,I=a;return n=a=void 0,u=L,o=t.apply(I,w)}function y(L){var w=L-l;return void 0===l||w>=e||w<0||c&&L-u>=i}function p(){var L=ct();if(y(L))return m(L);s=setTimeout(p,function g(L){var D=e-(L-l);return c?ja(D,i-(L-u)):D}(L))}function m(L){return s=void 0,h&&n?v(L):(n=a=void 0,o)}function O(){var L=ct(),w=y(L);if(n=arguments,a=this,l=L,w){if(void 0===s)return function d(L){return u=L,s=setTimeout(p,e),f?v(L):o}(l);if(c)return clearTimeout(s),s=setTimeout(p,e),v(l)}return void 0===s&&(s=setTimeout(p,e)),o}return e=Qr(e)||0,ee(r)&&(f=!!r.leading,i=(c="maxWait"in r)?Mr(Qr(r.maxWait)||0,e):i,h="trailing"in r?!!r.trailing:h),O.cancel=function b(){void 0!==s&&clearTimeout(s),u=0,n=l=a=s=void 0},O.flush=function E(){return void 0===s?o:m(ct())},O},Cr=C?C.performance:null,zo=Cr&&Cr.now?function(){return Cr.now()}:function(){return Date.now()},pl=function(){if(C){if(C.requestAnimationFrame)return function(t){C.requestAnimationFrame(t)};if(C.mozRequestAnimationFrame)return function(t){C.mozRequestAnimationFrame(t)};if(C.webkitRequestAnimationFrame)return function(t){C.webkitRequestAnimationFrame(t)};if(C.msRequestAnimationFrame)return function(t){C.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(zo())},1e3/60)}}(),ei=function(e){return pl(e)},Jr=zo,_n=9261,Ea=5381,_o=function(e){for(var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_n;!(a=e.next()).done;)n=65599*n+a.value|0;return n},wa=function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:_n)+e|0},xa=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ea;return(r<<5)+r+e|0},ln=function(e){return 2097152*e[0]+e[1]},ti=function(e,r){return[wa(e[0],r[0]),xa(e[1],r[1])]},Cn=function(e,r){var n={value:0,done:!1},a=0,i=e.length;return _o({next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}},r)},$o=function(){return bl(arguments)},bl=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];r=0===n?Cn(a):Cn(a,r)}return r},Uo=!0,El=null!=console.warn,wl=null!=console.trace,Wi=Number.MAX_SAFE_INTEGER||9007199254740991,Vo=function(){return!0},ri=function(){return!1},Yo=function(){return 0},qi=function(){},Xt=function(e){throw new Error(e)},Ho=function(e){if(void 0===e)return Uo;Uo=!!e},Mt=function(e){Ho()&&(El?console.warn(e):(console.log(e),wl&&console.trace()))},Ur=function(e){return null==e?e:pe(e)?e.slice():fe(e)?function(e){return rt({},e)}(e):e},Xo=function(e,r){for(r=e="";e++<36;r+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return r},Cl={},Wo=function(){return Cl},er=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n?.[o];a[o]=void 0===s?e[o]:s}return a}},fn=function(e,r,n){for(var a=e.length-1;a>=0&&(e[a]!==r||(e.splice(a,1),!n));a--);},Ki=function(e){e.splice(0,e.length)},Nr=function(e,r,n){return n&&(r=it(n,r)),e[r]},cn=function(e,r,n,a){n&&(r=it(n,r)),e[r]=a},Sl=function(){function t(){He(this,t),this._obj={}}return U(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return void 0!==this._obj[r]}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Vr=typeof Map<"u"?Map:Sl,Al=function(){function t(e){if(He(this,t),this._obj=Object.create(null),this.size=0,null!=e){var r;r=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var n=0;n<r.length;n++)this.add(r[n])}}return U(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;1!==n[r]&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;1===n[r]&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return 1===this._obj[r]}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),$n="undefined"!==(typeof Set>"u"?"undefined":ze(Set))?Set:Al,ni=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==r&&Fe(e)){var a=r.group;if(null==a&&(a=r.data&&null!=r.data.source&&null!=r.data.target?"edges":"nodes"),"nodes"===a||"edges"===a){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:void 0===r.selectable||!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable||!!r.grabbable,pannable:void 0===r.pannable?"edges"===a:!!r.pannable,active:!1,classes:new $n,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];pe(r.classes)?u=r.classes:Y(r.classes)&&(u=r.classes.split(/\s+/));for(var f=0,c=u.length;f<c;f++){var h=u[f];!h||""===h||i.classes.add(h)}this.createEmitter();var v=r.style||r.css;v&&(Mt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v)),(void 0===n||n)&&this.restore()}else Xt("An element must be of type `nodes` or `edges`; you specified `"+a+"`")}else Xt("An element must have a core reference and parameters set")},qo=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;fe(n)&&!J(n)&&(n=(o=n).roots||o.root,a=o.visit,i=o.directed),i=2!==arguments.length||te(a)?i:a,a=te(a)?a:function(){};for(var g,s=this._private.cy,l=n=Y(n)?this.filter(n):n,u=[],f=[],c={},h={},v={},d=0,y=this.byGroup(),p=y.nodes,m=y.edges,b=0;b<l.length;b++){var E=l[b],O=E.id();E.isNode()&&(u.unshift(E),e.bfs&&(v[O]=!0,f.push(E)),h[O]=0)}for(var L=function(){var V=e.bfs?u.shift():u.pop(),z=V.id();if(e.dfs){if(v[z])return"continue";v[z]=!0,f.push(V)}var me,oe=h[z],H=c[z],Q=null!=H?H.source():null,ue=null!=H?H.target():null,ve=null==H?void 0:V.same(Q)?ue[0]:Q[0];if(!0===(me=a(V,H,ve,d++,oe)))return g=V,"break";if(!1===me)return"break";for(var ce=V.connectedEdges().filter(function(we){return(!i||we.source().same(V))&&m.has(we)}),ye=0;ye<ce.length;ye++){var Se=ce[ye],Oe=Se.connectedNodes().filter(function(we){return!we.same(V)&&p.has(we)}),Ce=Oe.id();0!==Oe.length&&!v[Ce]&&(u.push(Oe=Oe[0]),e.bfs&&(v[Ce]=!0,f.push(Oe)),c[Ce]=Se,h[Ce]=h[z]+1)}};0!==u.length;){var w=L();if("continue"!==w&&"break"===w)break}for(var I=s.collection(),D=0;D<f.length;D++){var B=f[D],F=c[B.id()];null!=F&&I.push(F),I.push(B)}return{path:s.collection(I),found:s.collection(g)}}},Ta={breadthFirstSearch:qo({bfs:!0}),depthFirstSearch:qo({dfs:!0})};Ta.bfs=Ta.breadthFirstSearch,Ta.dfs=Ta.depthFirstSearch;var Ca=function he(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){(function(){var r,n,a,i,o,s,l,u,f,c,h,v,d,g,y;a=Math.floor,c=Math.min,n=function(p,m){return p<m?-1:p>m?1:0},f=function(p,m,b,E,O){var L;if(null==b&&(b=0),null==O&&(O=n),b<0)throw new Error("lo must be non-negative");for(null==E&&(E=p.length);b<E;)O(m,p[L=a((b+E)/2)])<0?E=L:b=L+1;return[].splice.apply(p,[b,b-b].concat(m)),m},s=function(p,m,b){return null==b&&(b=n),p.push(m),g(p,0,p.length-1,b)},o=function(p,m){var b,E;return null==m&&(m=n),b=p.pop(),p.length?(E=p[0],p[0]=b,y(p,0,m)):E=b,E},u=function(p,m,b){var E;return null==b&&(b=n),E=p[0],p[0]=m,y(p,0,b),E},l=function(p,m,b){var E;return null==b&&(b=n),p.length&&b(p[0],m)<0&&(m=(E=[p[0],m])[0],p[0]=E[1],y(p,0,b)),m},i=function(p,m){var E,O,L,w,I;for(null==m&&(m=n),w=[],E=0,O=(L=function(){I=[];for(var D=0,B=a(p.length/2);0<=B?D<B:D>B;0<=B?D++:D--)I.push(D);return I}.apply(this).reverse()).length;E<O;E++)w.push(y(p,L[E],m));return w},d=function(p,m,b){var E;if(null==b&&(b=n),-1!==(E=p.indexOf(m)))return g(p,0,E,b),y(p,E,b)},h=function(p,m,b){var O,L,w,I;if(null==b&&(b=n),!(O=p.slice(0,m)).length)return O;for(i(O,b),L=0,w=(I=p.slice(m)).length;L<w;L++)l(O,I[L],b);return O.sort(b).reverse()},v=function(p,m,b){var E,O,L,w,I,D,B,F,N;if(null==b&&(b=n),10*m<=p.length){if(!(L=p.slice(0,m).sort(b)).length)return L;for(O=L[L.length-1],w=0,D=(B=p.slice(m)).length;w<D;w++)b(E=B[w],O)<0&&(f(L,E,0,null,b),L.pop(),O=L[L.length-1]);return L}for(i(p,b),N=[],I=0,F=c(m,p.length);0<=F?I<F:I>F;0<=F?++I:--I)N.push(o(p,b));return N},g=function(p,m,b,E){var O,L,w;for(null==E&&(E=n),O=p[b];b>m&&E(O,L=p[w=b-1>>1])<0;)p[b]=L,b=w;return p[b]=O},y=function(p,m,b){var E,O,L,w,I;for(null==b&&(b=n),O=p.length,I=m,L=p[m],E=2*m+1;E<O;)(w=E+1)<O&&!(b(p[E],p[w])<0)&&(E=w),p[m]=p[E],E=2*(m=E)+1;return p[m]=L,g(p,I,m,b)},r=function(){function p(m){this.cmp=m??n,this.nodes=[]}return p.push=s,p.pop=o,p.replace=u,p.pushpop=l,p.heapify=i,p.updateItem=d,p.nlargest=h,p.nsmallest=v,p.prototype.push=function(m){return s(this.nodes,m,this.cmp)},p.prototype.pop=function(){return o(this.nodes,this.cmp)},p.prototype.peek=function(){return this.nodes[0]},p.prototype.contains=function(m){return-1!==this.nodes.indexOf(m)},p.prototype.replace=function(m){return u(this.nodes,m,this.cmp)},p.prototype.pushpop=function(m){return l(this.nodes,m,this.cmp)},p.prototype.heapify=function(){return i(this.nodes,this.cmp)},p.prototype.updateItem=function(m){return d(this.nodes,m,this.cmp)},p.prototype.clear=function(){return this.nodes=[]},p.prototype.empty=function(){return 0===this.nodes.length},p.prototype.size=function(){return this.nodes.length},p.prototype.clone=function(){var m;return(m=new p).nodes=this.nodes.slice(0),m},p.prototype.toArray=function(){return this.nodes.slice(0)},p.prototype.insert=p.prototype.push,p.prototype.top=p.prototype.peek,p.prototype.front=p.prototype.peek,p.prototype.has=p.prototype.contains,p.prototype.copy=p.prototype.clone,p}(),t.exports=r}).call(re)}),Il=er({root:null,weight:function(e){return 1},directed:!1}),Ml={dijkstra:function(e){if(!fe(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var H,Q,n=Il(e),a=n.root,o=n.directed,s=this,l=n.weight,u=Y(a)?this.filter(a)[0]:a[0],f={},c={},h={},v=this.byGroup(),d=v.nodes,g=v.edges;g.unmergeBy(function(oe){return oe.isLoop()});for(var y=function(H){return f[H.id()]},m=new Ca(function(oe,H){return y(oe)-y(H)}),b=0;b<d.length;b++){var E=d[b];f[E.id()]=E.same(u)?0:1/0,m.push(E)}for(var O=function(H,Q){for(var me,ue=(o?H.edgesTo(Q):H.edgesWith(Q)).intersect(g),ve=1/0,ce=0;ce<ue.length;ce++){var ye=ue[ce],Se=l(ye);(Se<ve||!me)&&(ve=Se,me=ye)}return{edge:me,dist:ve}};m.size()>0;){var L=m.pop(),w=y(L),I=L.id();if(h[I]=w,w!==1/0)for(var D=L.neighborhood().intersect(d),B=0;B<D.length;B++){var F=D[B],N=F.id(),V=O(L,F),z=w+V.dist;z<y(F)&&(Q=z,f[(H=F).id()]=Q,m.updateItem(H),c[N]={node:L,edge:V.edge})}}return{distanceTo:function(H){var Q=Y(H)?d.filter(H)[0]:H[0];return h[Q.id()]},pathTo:function(H){var Q=Y(H)?d.filter(H)[0]:H[0],ue=[],ve=Q,me=ve.id();if(Q.length>0)for(ue.unshift(Q);c[me];){var ce=c[me];ue.unshift(ce.edge),ue.unshift(ce.node),me=(ve=ce.node).id()}return s.spawn(ue)}}}},Nl={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,l=function(E){for(var O=0;O<o.length;O++)if(o[O].has(E))return O},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var f=a.sort(function(b,E){return e(b)-e(E)}),c=0;c<f.length;c++){var h=f[c],v=h.source()[0],d=h.target()[0],g=l(v),y=l(d),p=o[g],m=o[y];g!==y&&(s.merge(h),p.merge(m),o.splice(y,1))}return s}},Rl=er({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),kl={aStar:function(e){var r=this.cy(),n=Rl(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var b,E,u=a.id(),f=i.id(),c={},h={},v={},d=new Ca(function(me,ce){return h[me.id()]-h[ce.id()]}),g=new $n,y={},p={},m=function(ce,ye){d.push(ce),g.add(ye)};m(a,u),c[u]=0,h[u]=o(a);for(var w=0;d.size()>0;){if(b=d.pop(),E=b.id(),g.delete(E),w++,E===f){for(var I=[],D=i,B=f,F=p[B];I.unshift(D),null!=F&&I.unshift(F),null!=(D=y[B]);)F=p[B=D.id()];return{found:!0,distance:c[E],path:this.spawn(I),steps:w}}v[E]=!0;for(var N=b._private.edges,V=0;V<N.length;V++){var z=N[V];if(this.hasElementWithId(z.id())&&(!s||z.data("source")===E)){var oe=z.source(),H=z.target(),Q=oe.id()!==E?oe:H,ue=Q.id();if(this.hasElementWithId(ue)&&!v[ue]){var ve=c[E]+l(z);if(!g.has(ue)){c[ue]=ve,h[ue]=ve+o(Q),m(Q,ue),y[ue]=b,p[ue]=z;continue}ve<c[ue]&&(c[ue]=ve,h[ue]=ve+o(Q),y[ue]=b,p[ue]=z)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},Pl=er({weight:function(e){return 1},directed:!1}),Bl={floydWarshall:function(e){for(var r=this.cy(),n=Pl(e),i=n.directed,o=n.weight,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,c=f*f,h=function(Se){return l.indexOf(Se)},v=function(Se){return l[Se]},d=new Array(c),g=0;g<c;g++){var y=g%f;d[g]=(g-y)/f===y?0:1/0}for(var m=new Array(c),b=new Array(c),E=0;E<u.length;E++){var O=u[E],L=O.source()[0],w=O.target()[0];if(L!==w){var I=h(L),D=h(w),B=I*f+D,F=o(O);if(d[B]>F&&(d[B]=F,m[B]=D,b[B]=O),!i){var N=D*f+I;!i&&d[N]>F&&(d[N]=F,m[N]=I,b[N]=O)}}}for(var V=0;V<f;V++)for(var z=0;z<f;z++)for(var oe=z*f+V,H=0;H<f;H++){var Q=z*f+H,ue=V*f+H;d[oe]+d[ue]<d[Q]&&(d[Q]=d[oe]+d[ue],m[Q]=m[oe])}var me=function(Se){return h(function(Se){return(Y(Se)?r.filter(Se):Se)[0]}(Se))};return{distance:function(Se,Oe){var Ce=me(Se),we=me(Oe);return d[Ce*f+we]},path:function(Se,Oe){var Ce=me(Se),we=me(Oe),se=v(Ce);if(Ce===we)return se.collection();if(null==m[Ce*f+we])return r.collection();var Le=r.collection();for(Le.merge(se);Ce!==we;)Le.merge(b[Ce*f+(Ce=m[Ce*f+we])]),Le.merge(v(Ce));return Le}}}},Fl=er({weight:function(e){return 1},directed:!1,root:null}),zl={bellmanFord:function(e){var r=this,n=Fl(e),i=n.directed,o=n.root,s=n.weight,l=this,u=this.cy(),f=this.byGroup(),c=f.edges,h=f.nodes,v=h.length,d=new Vr,g=!1,y=[];o=u.collection(o)[0],c.unmergeBy(function(Qe){return Qe.isLoop()});for(var p=c.length,m=function(Ye){var et=d.get(Ye.id());return et||(et={},d.set(Ye.id(),et)),et},b=function(Ye){return(Y(Ye)?u.$(Ye):Ye)[0]},L=0;L<v;L++){var w=h[L],I=m(w);I.dist=w.same(o)?0:1/0,I.pred=null,I.edge=null}for(var D=!1,B=function(Ye,et,xt,pt,ut,Re){var A=pt.dist+Re;A<ut.dist&&!xt.same(pt.edge)&&(ut.dist=A,ut.pred=Ye,ut.edge=xt,D=!0)},F=1;F<v;F++){D=!1;for(var N=0;N<p;N++){var V=c[N],z=V.source(),oe=V.target(),H=s(V),Q=m(z),ue=m(oe);B(z,0,V,Q,ue,H),i||B(oe,0,V,ue,Q,H)}if(!D)break}if(D)for(var ve=[],me=0;me<p;me++){var ce=c[me],ye=ce.source(),Se=ce.target(),Oe=s(ce),Ce=m(ye).dist,we=m(Se).dist;if(Ce+Oe<we||!i&&we+Oe<Ce){if(g||(Mt("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),!1===e.findNegativeWeightCycles)break;var se=[];Ce+Oe<we&&se.push(ye),!i&&we+Oe<Ce&&se.push(Se);for(var Le=se.length,Ie=0;Ie<Le;Ie++){var Be=se[Ie],Ue=[Be];Ue.push(m(Be).edge);for(var ft=m(Be).pred;-1===Ue.indexOf(ft);)Ue.push(ft),Ue.push(m(ft).edge),ft=m(ft).pred;for(var dt=(Ue=Ue.slice(Ue.indexOf(ft)))[0].id(),Ve=0,$e=2;$e<Ue.length;$e+=2)Ue[$e].id()<dt&&(dt=Ue[$e].id(),Ve=$e);(Ue=Ue.slice(Ve).concat(Ue.slice(0,Ve))).push(Ue[0]);var nt=Ue.map(function(Qe){return Qe.id()}).join(",");-1===ve.indexOf(nt)&&(y.push(l.spawn(Ue)),ve.push(nt))}}}return{distanceTo:function(Ye){return m(b(Ye)).dist},pathTo:function(Ye){for(var et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,pt=[],ut=b(Ye);;){if(null==ut)return r.spawn();var Re=m(ut),A=Re.edge,de=Re.pred;if(pt.unshift(ut[0]),ut.same(et)&&pt.length>0)break;null!=A&&pt.unshift(A),ut=de}return l.spawn(pt)},hasNegativeWeightCycle:g,negativeWeightCycles:y}}},Gl=Math.sqrt(2),_l=function(e,r,n){0===n.length&&Xt("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],s=r[a[1]],l=r[a[2]],u=n,f=u.length-1;f>=0;f--){var c=u[f],h=c[1],v=c[2];(r[h]===s&&r[v]===l||r[h]===l&&r[v]===s)&&u.splice(f,1)}for(var d=0;d<u.length;d++){var g=u[d];g[1]===l?(u[d]=g.slice(),u[d][1]=s):g[2]===l&&(u[d]=g.slice(),u[d][2]=s)}for(var y=0;y<r.length;y++)r[y]===l&&(r[y]=s);return u},Zi=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=_l(i,e,r),n--}return r},$l={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(ue){return ue.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Gl);if(!(i<2)){for(var u=[],f=0;f<o;f++){var c=a[f];u.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,v=[],d=new Array(i),g=new Array(i),y=new Array(i),p=function(ve,me){for(var ce=0;ce<i;ce++)me[ce]=ve[ce]},m=0;m<=s;m++){for(var b=0;b<i;b++)g[b]=b;var E=Zi(g,u.slice(),i,l),O=E.slice();p(g,y);var L=Zi(g,E,l,2),w=Zi(y,O,l,2);L.length<=w.length&&L.length<h?(h=L.length,v=L,p(g,d)):w.length<=L.length&&w.length<h&&(h=w.length,v=w,p(y,d))}for(var I=this.spawn(v.map(function(ue){return a[ue[0]]})),D=this.spawn(),B=this.spawn(),F=d[0],N=0;N<d.length;N++){var z=n[N];d[N]===F?D.merge(z):B.merge(z)}var oe=function(ve){var me=e.spawn();return ve.forEach(function(ce){me.merge(ce),ce.connectedEdges().forEach(function(ye){e.contains(ye)&&!I.contains(ye)&&me.merge(ye)})}),me},H=[oe(D),oe(B)];return{cut:I,components:H,partition1:D,partition2:B}}Xt("At least 2 nodes are required for Karger-Stein algorithm")}},ai=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Ko=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Un=function(e){return{x:e[0],y:e[1]}},ii=function(e,r){return Math.atan2(r,e)-Math.PI/2},Qi=Math.log2||function(t){return Math.log(t)/Math.log(2)},Zo=function(e){return e>0?1:e<0?-1:0},Dn=function(e,r){return Math.sqrt(Sn(e,r))},Sn=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},ql=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},jt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Vn=function(e,r,n,a){return{x:jt(e.x,r.x,n.x,a),y:jt(e.y,r.y,n.y,a)}},Da=function(e,r,n){return Math.max(e,Math.min(n,r))},br=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Jl=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},jl=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},oi=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ji=function(e){var n,a,i,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)n=a=i=o=r[0];else if(2===r.length)n=i=r[0],o=a=r[1];else if(4===r.length){var s=T(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Qo=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},ji=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Yn=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},ef=function(e,r){return Yn(e,r.x,r.y)},Jo=function(e,r){return Yn(e,r.x1,r.y1)&&Yn(e,r.x2,r.y2)},jo=function(e,r,n,a,i,o,s){var c,l=Aa(i,o),u=i/2,f=o/2,v=a-f-s;if((c=hn(e,r,n,a,n-u+l-s,v,n+u-l+s,v,!1)).length>0)return c;var y=n+u+s;if((c=hn(e,r,n,a,y,a-f+l-s,y,a+f-l+s,!1)).length>0)return c;var O=a+f+s;if((c=hn(e,r,n,a,n-u+l-s,O,n+u-l+s,O,!1)).length>0)return c;var N,I=n-u-s;if((c=hn(e,r,n,a,I,a-f+l-s,I,a+f-l+s,!1)).length>0)return c;var V=n-u+l,z=a-f+l;if((N=Sa(e,r,n,a,V,z,l+s)).length>0&&N[0]<=V&&N[1]<=z)return[N[0],N[1]];var oe=n+u-l,H=a-f+l;if((N=Sa(e,r,n,a,oe,H,l+s)).length>0&&N[0]>=oe&&N[1]<=H)return[N[0],N[1]];var Q=n+u-l,ue=a+f-l;if((N=Sa(e,r,n,a,Q,ue,l+s)).length>0&&N[0]>=Q&&N[1]>=ue)return[N[0],N[1]];var ve=n-u+l,me=a+f-l;return(N=Sa(e,r,n,a,ve,me,l+s)).length>0&&N[0]<=ve&&N[1]>=me?[N[0],N[1]]:[]},tf=function(e,r,n,a,i,o,s){var l=s,u=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,o),h=Math.max(a,o);return u-l<=e&&e<=f+l&&c-l<=r&&r<=h+l},rf=function(e,r,n,a,i,o,s,l,u){var f_x1=Math.min(n,s,i)-u,f_x2=Math.max(n,s,i)+u,f_y1=Math.min(a,l,o)-u,f_y2=Math.max(a,l,o)+u;return!(e<f_x1||e>f_x2||r<f_y1||r>f_y2)},of=function(e,r,n,a,i,o,s,l){var v=[];!function(e,r,n,a,i){var s,l,u,f,c,h,v,d;0===e&&(e=1e-5),u=-27*(a/=e)+(r/=e)*(9*(n/=e)-r*r*2),s=(l=(3*n-r*r)/9)*l*l+(u/=54)*u,i[1]=0,v=r/3,s>0?(c=(c=u+Math.sqrt(s))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),h=(h=u-Math.sqrt(s))<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-v+c+h,i[4]=i[2]=-(v+=(c+h)/2),v=Math.sqrt(3)*(-h+c)/2,i[3]=v,i[5]=-v):(i[5]=i[3]=0,0===s?(d=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=2*d-v,i[4]=i[2]=-(d+v)):(f=(l=-l)*l*l,f=Math.acos(u/Math.sqrt(f)),d=2*Math.sqrt(l),i[0]=-v+d*Math.cos(f/3),i[2]=-v+d*Math.cos((f+2*Math.PI)/3),i[4]=-v+d*Math.cos((f+4*Math.PI)/3)))}(1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r,1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,v);for(var g=[],y=0;y<6;y+=2)Math.abs(v[y+1])<1e-7&&v[y]>=0&&v[y]<=1&&g.push(v[y]);g.push(1),g.push(0);for(var m,b,E,p=-1,O=0;O<g.length;O++)m=Math.pow(1-g[O],2)*n+2*(1-g[O])*g[O]*i+g[O]*g[O]*s,b=Math.pow(1-g[O],2)*a+2*(1-g[O])*g[O]*o+g[O]*g[O]*l,E=Math.pow(m-e,2)+Math.pow(b-r,2),p>=0?E<p&&(p=E):p=E;return p},sf=function(e,r,n,a,i,o){var s=[e-n,r-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],c=s[0]*l[0]+s[1]*l[1],h=c*c/u;return c<0?f:h>u?(e-i)*(e-i)+(r-o)*(r-o):f-h},Er=function(e,r,n){for(var a,i,o,s,u=0,f=0;f<n.length/2;f++)if(i=n[2*f+1],f+1<n.length/2?(o=n[2*(f+1)],s=n[2*(f+1)+1]):(o=n[2*(f+1-n.length/2)],s=n[2*(f+1-n.length/2)+1]),(a=n[2*f])!=e||o!=e){if(!(a>=e&&e>=o||a<=e&&e<=o))continue;(e-a)/(o-a)*(s-i)+i>r&&u++}return u%2!=0},jr=function(e,r,n,a,i,o,s,l,u){var c,g,f=new Array(n.length);null!=l[0]?(c=Math.atan(l[1]/l[0]),l[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=l;for(var h=Math.cos(-c),v=Math.sin(-c),d=0;d<f.length/2;d++)f[2*d]=o/2*(n[2*d]*h-n[2*d+1]*v),f[2*d+1]=s/2*(n[2*d+1]*h+n[2*d]*v),f[2*d]+=a,f[2*d+1]+=i;if(u>0){var y=ts(f,-u);g=es(y)}else g=f;return Er(e,r,g)},es=function(e){for(var s,l,u,f,r=new Array(e.length/2),c=0;c<e.length/4;c++){c<e.length/4-1?(s=e[4*(c+1)],l=e[4*(c+1)+1],u=e[4*(c+1)+2],f=e[4*(c+1)+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var h=hn(e[4*c],e[4*c+1],e[4*c+2],e[4*c+3],s,l,u,f,!0);r[2*c]=h[0],r[2*c+1]=h[1]}return r},ts=function(e,r){for(var a,i,o,s,n=new Array(2*e.length),l=0;l<e.length/2;l++){l<e.length/2-1?(o=e[2*(l+1)],s=e[2*(l+1)+1]):(o=e[0],s=e[1]);var u=s-(i=e[2*l+1]),f=-(o-(a=e[2*l])),c=Math.sqrt(u*u+f*f),h=u/c,v=f/c;n[4*l]=a+h*r,n[4*l+1]=i+v*r,n[4*l+2]=o+h*r,n[4*l+3]=s+v*r}return n},Ln=function(e,r,n,a,i,o,s){return e-=i,r-=o,(e/=n/2+s)*e+(r/=a/2+s)*r<=1},Sa=function(e,r,n,a,i,o,s){var l=[n-e,a-r],u=[e-i,r-o],f=l[0]*l[0]+l[1]*l[1],c=2*(u[0]*l[0]+u[1]*l[1]),v=c*c-4*f*(u[0]*u[0]+u[1]*u[1]-s*s);if(v<0)return[];var d=(-c+Math.sqrt(v))/(2*f),g=(-c-Math.sqrt(v))/(2*f),y=Math.min(d,g),p=Math.max(d,g),m=[];if(y>=0&&y<=1&&m.push(y),p>=0&&p<=1&&m.push(p),0===m.length)return[];var b=m[0]*l[0]+e,E=m[0]*l[1]+r;return m.length>1?m[0]==m[1]?[b,E]:[b,E,m[1]*l[0]+e,m[1]*l[1]+r]:[b,E]},eo=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},hn=function(e,r,n,a,i,o,s,l,u){var f=e-i,c=n-e,h=s-i,v=r-o,d=a-r,g=l-o,y=h*v-g*f,p=c*v-d*f,m=g*c-h*d;if(0!==m){var b=y/m,E=p/m,L=-.001;return L<=b&&b<=1.001&&L<=E&&E<=1.001||u?[e+b*c,r+b*d]:[]}return 0===y||0===p?eo(e,n,s)===s?[s,l]:eo(e,n,i)===i?[i,o]:eo(i,s,n)===n?[n,a]:[]:[]},La=function(e,r,n,a,i,o,s,l){var f,v,u=[],c=new Array(n.length),h=!0;if(null==o&&(h=!1),h){for(var d=0;d<c.length/2;d++)c[2*d]=n[2*d]*o+a,c[2*d+1]=n[2*d+1]*s+i;if(l>0){var g=ts(c,-l);v=es(g)}else v=c}else v=n;for(var m,b,E=0;E<v.length/2;E++)E<v.length/2-1?(m=v[2*(E+1)],b=v[2*(E+1)+1]):(m=v[0],b=v[1]),0!==(f=hn(e,r,a,i,v[2*E],v[2*E+1],m,b)).length&&u.push(f[0],f[1]);return u},si=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},gr=function(e,r){var n=to(e,r);return rs(n)},rs=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);for(var f=2/(s-i),c=2/(l-o),h=0;h<a;h++)r=e[2*h]=e[2*h]*f,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-o);return e},to=function(e,r){var n=1/e*2*Math.PI,a=e%2==0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var o,i=new Array(2*e),s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Aa=function(e,r){return Math.min(e/4,r/4,8)},ro=function(e,r){return Math.min(e/10,r/10,8)},no=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},hf=er({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),vf={pageRank:function(e){for(var r=hf(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,c=u.length,v=f.length,d=new Array(c*c),g=new Array(c),y=(1-n)/c,p=0;p<c;p++){for(var m=0;m<c;m++)d[p*c+m]=0;g[p]=0}for(var E=0;E<v;E++){var O=f[E],L=O.data("source"),w=O.data("target");if(L!==w){var I=u.indexOfId(L),D=u.indexOfId(w),B=o(O);d[D*c+I]+=B,g[I]+=B}}for(var N=1/c+y,V=0;V<c;V++)if(0===g[V])for(var z=0;z<c;z++)d[z*c+V]=N;else for(var H=0;H<c;H++){var Q=H*c+V;d[Q]=d[Q]/g[V]+y}for(var me,ue=new Array(c),ve=new Array(c),ce=0;ce<c;ce++)ue[ce]=1;for(var ye=0;ye<i;ye++){for(var Se=0;Se<c;Se++)ve[Se]=0;for(var Oe=0;Oe<c;Oe++)for(var Ce=0;Ce<c;Ce++)ve[Oe]+=d[Oe*c+Ce]*ue[Ce];ql(ve),me=ue,ue=ve,ve=me;for(var se=0,Le=0;Le<c;Le++){var Ie=me[Le]-ue[Le];se+=Ie*Ie}if(se<a)break}return{rank:function(ft){return ft=s.collection(ft)[0],ue[u.indexOf(ft)]}}}},as=er({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Hn={degreeCentralityNormalized:function(e){e=as(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},h=0,v=0,d=0;d<a;d++){var g=n[d],y=g.id();e.root=g;var p=this.degreeCentrality(e);h<p.indegree&&(h=p.indegree),v<p.outdegree&&(v=p.outdegree),f[y]=p.indegree,c[y]=p.outdegree}return{indegree:function(b){return 0==h?0:(Y(b)&&(b=r.filter(b)),f[b.id()]/h)},outdegree:function(b){return 0===v?0:(Y(b)&&(b=r.filter(b)),c[b.id()]/v)}}}for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(b){return 0===o?0:(Y(b)&&(b=r.filter(b)),i[b.id()]/o)}}},degreeCentrality:function(e){e=as(e);var r=this.cy(),n=this,i=e.root,o=e.weight,s=e.directed,l=e.alpha;if(i=r.collection(i)[0],s){for(var v=i.connectedEdges(),d=v.filter(function(L){return L.target().same(i)&&n.has(L)}),g=v.filter(function(L){return L.source().same(i)&&n.has(L)}),y=d.length,p=g.length,m=0,b=0,E=0;E<d.length;E++)m+=o(d[E]);for(var O=0;O<g.length;O++)b+=o(g[O]);return{indegree:Math.pow(y,1-l)*Math.pow(m,l),outdegree:Math.pow(p,1-l)*Math.pow(b,l)}}for(var u=i.connectedEdges().intersection(n),f=u.length,c=0,h=0;h<u.length;h++)c+=o(u[h]);return{degree:Math.pow(f,1-l)*Math.pow(c,l)}}};Hn.dc=Hn.degreeCentrality,Hn.dcn=Hn.degreeCentralityNormalised=Hn.degreeCentralityNormalized;var is=er({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Xn={closenessCentralityNormalized:function(e){for(var r=is(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<u.length;c++){for(var h=0,v=u[c],d=0;d<u.length;d++)if(c!==d){var g=f.distance(v,u[d]);h+=n?1/g:g}n||(h=1/h),l<h&&(l=h),s[v.id()]=h}return{closeness:function(p){return 0==l?0:(p=Y(p)?o.filter(p)[0].id():p.id(),s[p]/l)}}},closenessCentrality:function(e){var r=is(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),f=0;f<u.length;f++){var c=u[f];if(!c.same(n)){var h=s.distanceTo(c);l+=o?1/h:h}}return o?l:1/l}};Xn.cc=Xn.closenessCentrality,Xn.ccn=Xn.closenessCentralityNormalised=Xn.closenessCentralityNormalized;var df=er({weight:null,directed:!1}),ao={betweennessCentrality:function(e){for(var r=df(e),n=r.directed,a=r.weight,i=null!=a,o=this.cy(),s=this.nodes(),l={},u={},f=0,c={set:function(b,E){u[b]=E,E>f&&(f=E)},get:function(b){return u[b]}},h=0;h<s.length;h++){var v=s[h],d=v.id();l[d]=n?v.outgoers().nodes():v.openNeighborhood().nodes(),c.set(d,0)}for(var g=function(b){for(var E=s[b].id(),O=[],L={},w={},I={},D=new Ca(function(Ce,we){return I[Ce]-I[we]}),B=0;B<s.length;B++){var F=s[B].id();L[F]=[],w[F]=0,I[F]=1/0}for(w[E]=1,I[E]=0,D.push(E);!D.empty();){var N=D.pop();if(O.push(N),i)for(var V=0;V<l[N].length;V++){var H,z=l[N][V],oe=o.getElementById(N);H=oe.edgesTo(z).length>0?oe.edgesTo(z)[0]:z.edgesTo(oe)[0];var Q=a(H);z=z.id(),I[z]>I[N]+Q&&(I[z]=I[N]+Q,D.nodes.indexOf(z)<0?D.push(z):D.updateItem(z),w[z]=0,L[z]=[]),I[z]==I[N]+Q&&(w[z]=w[z]+w[N],L[z].push(N))}else for(var ue=0;ue<l[N].length;ue++){var ve=l[N][ue].id();I[ve]==1/0&&(D.push(ve),I[ve]=I[N]+1),I[ve]==I[N]+1&&(w[ve]=w[ve]+w[N],L[ve].push(N))}}for(var me={},ce=0;ce<s.length;ce++)me[s[ce].id()]=0;for(;O.length>0;){for(var ye=O.pop(),Se=0;Se<L[ye].length;Se++){var Oe=L[ye][Se];me[Oe]=me[Oe]+w[Oe]/w[ye]*(1+me[ye])}ye!=s[b].id()&&c.set(ye,c.get(ye)+me[ye])}},y=0;y<s.length;y++)g(y);var p={betweenness:function(b){var E=o.collection(b).id();return c.get(E)},betweennessNormalized:function(b){if(0==f)return 0;var E=o.collection(b).id();return c.get(E)/f}};return p.betweennessNormalised=p.betweennessNormalized,p}};ao.bc=ao.betweennessCentrality;var gf=er({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),yf=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},os=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},bf=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*r[s*n+l]}return a},Ef=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=bf(e,a,r);return e},wf=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return os(a,r),a},xf=function(e,r,n,a){for(var i=0;i<n;i++)if(Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a)!=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a))return!1;return!0},Cf=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},ss=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=function(e){return gf(e)}(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var c,l=r.length,u=l*l,f=new Array(u),h=0;h<u;h++)f[h]=0;for(var v=0;v<n.length;v++){var d=n[v],g=o[d.source().id()],y=o[d.target().id()],p=yf(d,i.attributes);f[g*l+y]+=p,f[y*l+g]+=p}(function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n})(f,l,i.multFactor),os(f,l);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,c=Ef(f,l,i.expandFactor),f=wf(c,l,i.inflateFactor),xf(f,c,u,4)||(m=!0),b++;var E=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],l=0;l<r;l++)Math.round(1e3*e[o*r+l])/1e3>0&&s.push(n[l]);0!==s.length&&i.push(a.collection(s))}return i}(f,l,r,a);return function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&Cf(e[r],e[n])&&e.splice(n,1);return e}(E)},Sf={markovClustering:ss,mcl:ss},Lf=function(e){return e},us=function(e,r){return Math.abs(r-e)},ls=function(e,r,n){return e+us(r,n)},fs=function(e,r,n){return e+Math.pow(n-r,2)},Af=function(e){return Math.sqrt(e)},Of=function(e,r,n){return Math.max(e,us(r,n))},Oa=function(e,r,n,a,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lf,s=a,f=0;f<e;f++)s=i(s,r(f),n(f));return o(s)},Wn={euclidean:function(e,r,n){return e>=2?Oa(e,r,n,0,fs,Af):Oa(e,r,n,0,ls)},squaredEuclidean:function(e,r,n){return Oa(e,r,n,0,fs)},manhattan:function(e,r,n){return Oa(e,r,n,0,ls)},max:function(e,r,n){return Oa(e,r,n,-1/0,Of)}};function ui(t,e,r,n,a,i){var o;return o=te(t)?t:Wn[t]||Wn.euclidean,0===e&&te(t)?o(a,i):o(e,r,n,a,i)}Wn["squared-euclidean"]=Wn.squaredEuclidean,Wn.squaredeuclidean=Wn.squaredEuclidean;var If=er({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),io=function(e){return If(e)},li=function(e,r,n,a,i){var s="kMedoids"!==i?function(c){return n[c]}:function(c){return a[c](n)};return ui(e,a.length,s,function(h){return a[h](r)},n,r)},oo=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var f=0;f<r;f++){l=[];for(var c=0;c<a;c++)l[c]=Math.random()*(o[c]-i[c])+i[c];s[f]=l}return s},cs=function(e,r,n,a,i){for(var o=1/0,s=0,l=0;l<r.length;l++){var u=li(n,e,r[l],a,i);u<o&&(o=u,s=l)}return s},hs=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)n[(i=r[o]).id()]===e&&a.push(i);return a},Mf=function(e,r,n){return Math.abs(r-e)<=n},Nf=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++)if(Math.abs(e[a][i]-r[a][i])>n)return!1;return!0},Rf=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},vs=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];Rf(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},ds=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=li("manhattan",r[i],e,n,"kMedoids");return a},Bf=function(e,r,n,a,i){for(var o,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){o=0,s=0;for(var h=0;h<r.length;h++)o+=a[h][f]*i.attributes[c](r[h]),s+=a[h][f];e[f][c]=o/s}},Ff=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,l,u,f=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<a.length;h++){s=0;for(var v=0;v<n.length;v++)l=li(i.distance,a[h],n[c],i.attributes,"cmeans"),u=li(i.distance,a[h],n[v],i.attributes,"cmeans"),s+=Math.pow(l/u,f);e[h][c]=1/s}},zf=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var f=0;f<r[0].length;f++)r[u][f]>s&&(s=r[u][f],l=f);i[l].push(e[u])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},gs=function(e){var o,s,l,u,r=this.cy(),n=this.nodes(),a=io(e);l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var c=0;c<n.length;c++)s[c]=new Array(a.k);for(var h=0;h<n.length;h++){for(var v=0,d=0;d<a.k;d++)s[h][d]=Math.random(),v+=s[h][d];for(var g=0;g<a.k;g++)s[h][g]=s[h][g]/v}o=new Array(a.k);for(var y=0;y<a.k;y++)o[y]=new Array(a.attributes.length);u=new Array(n.length);for(var p=0;p<n.length;p++)u[p]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,Bf(o,n,s,u,a),Ff(s,l,o,n,a),Nf(s,l,a.sensitivityThreshold)||(m=!0),b++;return{clusters:zf(n,s,a,r),degreeOfMembership:s}},Gf={kMeans:function(e){var l,r=this.cy(),n=this.nodes(),a=null,i=io(e),o=new Array(i.k),s={};l=i.testMode?"number"==typeof i.testCentroids?oo(n,i.k,i.attributes):"object"===ze(i.testCentroids)?i.testCentroids:oo(n,i.k,i.attributes):oo(n,i.k,i.attributes);for(var u=!0,f=0;u&&f<i.maxIterations;){for(var c=0;c<n.length;c++)s[(a=n[c]).id()]=cs(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var h=0;h<i.k;h++){var v=hs(h,n,s);if(0!==v.length){for(var d=i.attributes.length,g=l[h],y=new Array(d),p=new Array(d),m=0;m<d;m++){p[m]=0;for(var b=0;b<v.length;b++)p[m]+=i.attributes[m](a=v[b]);y[m]=p[m]/v.length,Mf(y[m],g[m],i.sensitivityThreshold)||(u=!0)}l[h]=y,o[h]=r.collection(v)}}f++}return o},kMedoids:function(e){var s,u,r=this.cy(),n=this.nodes(),a=null,i=io(e),o=new Array(i.k),l={},f=new Array(i.k);i.testMode?"number"==typeof i.testCentroids||(s="object"===ze(i.testCentroids)?i.testCentroids:vs(n,i.k)):s=vs(n,i.k);for(var c=!0,h=0;c&&h<i.maxIterations;){for(var v=0;v<n.length;v++)l[(a=n[v]).id()]=cs(a,s,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<s.length;d++){var g=hs(d,n,l);if(0!==g.length){f[d]=ds(s[d],g,i.attributes);for(var y=0;y<g.length;y++)(u=ds(g[y],g,i.attributes))<f[d]&&(f[d]=u,s[d]=g[y],c=!0);o[d]=r.collection(g)}}h++}return o},fuzzyCMeans:gs,fcm:gs},_f=er({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),$f={single:"min",complete:"max"},ps=function(e,r,n,a,i){for(var l,o=0,s=1/0,u=i.attributes,f=function(D,B){return ui(i.distance,u.length,function(F){return u[F](D)},function(F){return u[F](B)},D,B)},c=0;c<e.length;c++){var h=e[c].key,v=n[h][a[h]];v<s&&(o=h,s=v)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var y,d=r[o],g=r[a[o]];y="dendrogram"===i.mode?{left:d,right:g,key:d.key}:{value:d.value.concat(g.value),key:d.key},e[d.index]=y,e.splice(g.index,1),r[d.key]=y;for(var p=0;p<e.length;p++){var m=e[p];d.key===m.key?l=1/0:"min"===i.linkage?(l=n[d.key][m.key],n[d.key][m.key]>n[g.key][m.key]&&(l=n[g.key][m.key])):"max"===i.linkage?(l=n[d.key][m.key],n[d.key][m.key]<n[g.key][m.key]&&(l=n[g.key][m.key])):l="mean"===i.linkage?(n[d.key][m.key]*d.size+n[g.key][m.key]*g.size)/(d.size+g.size):"dendrogram"===i.mode?f(m.value,d.value):f(m.value[0],d.value[0]),n[d.key][m.key]=n[m.key][d.key]=l}for(var b=0;b<e.length;b++){var E=e[b].key;if(a[E]===d.key||a[E]===g.key){for(var O=E,L=0;L<e.length;L++){var w=e[L].key;n[E][w]<n[E][O]&&(O=w)}a[E]=O}e[b].index=b}return d.key=g.key=d.index=g.index=null,!0},fi=function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},Vf=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}return e.value?e.value.id():void 0},Yf=function t(e,r,n){if(!e)return[];var a=[],i=[],o=[];return 0===r?(e.left&&fi(e.left,a),e.right&&fi(e.right,i),o=a.concat(i),[n.collection(o)]):1===r?e.value?[n.collection(e.value)]:(e.left&&fi(e.left,a),e.right&&fi(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(i=t(e.right,r-1,n)),a.concat(i))},ys=function(e){for(var r=this.cy(),n=this.nodes(),a=function(e){var r=_f(e),n=$f[r.linkage];return null!=n&&(r.linkage=n),r}(e),i=a.attributes,o=function(b,E){return ui(a.distance,i.length,function(O){return i[O](b)},function(O){return i[O](E)},b,E)},s=[],l=[],u=[],f=[],c=0;c<n.length;c++){var h={value:"dendrogram"===a.mode?n[c]:[n[c]],key:c,index:c};s[c]=h,f[c]=h,l[c]=[],u[c]=0}for(var v=0;v<s.length;v++)for(var d=0;d<=v;d++){var g;g="dendrogram"===a.mode?v===d?1/0:o(s[v].value,s[d].value):v===d?1/0:o(s[v].value[0],s[d].value[0]),l[v][d]=g,l[d][v]=g,g<l[v][u[v]]&&(u[v]=d)}for(var y=ps(s,f,l,u,a);y;)y=ps(s,f,l,u,a);var p;return"dendrogram"===a.mode?(p=Yf(s[0],a.dendrogramDepth,r),a.addDendrogram&&Vf(s[0],r)):(p=new Array(s.length),s.forEach(function(m,b){m.key=m.index=null,p[b]=r.collection(m.value)})),p},Hf={hierarchicalClustering:ys,hca:ys},Xf=er({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),qf=function(e,r,n,a){var i=function(s,l){return a[l](s)};return-ui(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},Kf=function(e,r){return"median"===r?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r)):e=e.slice(r,n);for(var s=0,l=e.length-1;l>=0;l--)o?isFinite(e[l])||(e[l]=-1/0,s++):e.splice(l,1);i&&e.sort(function(h,v){return h-v});var f=e.length,c=Math.floor(f/2);return f%2!=0?e[c+1+s]:(e[c-1+s]+e[c+s])/2}(e):"mean"===r?function(e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,a=0,i=0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i}(e):"min"===r?function(e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,a=1/0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a}(e):"max"===r?function(e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,a=-1/0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a}(e):r},ms=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>s&&(o=u,s=r[i*e+u])}o>0&&a.push(o)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},bs=function(e){for(var r=this.cy(),n=this.nodes(),a=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||Xt("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||x(n)||Xt("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Xf(e)}(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,f,c,h,D;l=(s=n.length)*s,u=new Array(l);for(var v=0;v<l;v++)u[v]=-1/0;for(var d=0;d<s;d++)for(var g=0;g<s;g++)d!==g&&(u[d*s+g]=qf(a.distance,n[d],n[g],a.attributes));f=Kf(u,a.preference);for(var y=0;y<s;y++)u[y*s+y]=f;c=new Array(l);for(var p=0;p<l;p++)c[p]=0;h=new Array(l);for(var m=0;m<l;m++)h[m]=0;for(var b=new Array(s),E=new Array(s),O=new Array(s),L=0;L<s;L++)b[L]=0,E[L]=0,O[L]=0;for(var w=new Array(s*a.minIterations),I=0;I<w.length;I++)w[I]=0;for(D=0;D<a.maxIterations;D++){for(var B=0;B<s;B++){for(var F=-1/0,N=-1/0,V=-1,z=0,oe=0;oe<s;oe++)b[oe]=c[B*s+oe],(z=h[B*s+oe]+u[B*s+oe])>=F?(N=F,F=z,V=oe):z>N&&(N=z);for(var H=0;H<s;H++)c[B*s+H]=(1-a.damping)*(u[B*s+H]-F)+a.damping*b[H];c[B*s+V]=(1-a.damping)*(u[B*s+V]-N)+a.damping*b[V]}for(var Q=0;Q<s;Q++){for(var ue=0,ve=0;ve<s;ve++)b[ve]=h[ve*s+Q],E[ve]=Math.max(0,c[ve*s+Q]),ue+=E[ve];ue-=E[Q],E[Q]=c[Q*s+Q],ue+=E[Q];for(var me=0;me<s;me++)h[me*s+Q]=(1-a.damping)*Math.min(0,ue-E[me])+a.damping*b[me];h[Q*s+Q]=(1-a.damping)*(ue-E[Q])+a.damping*b[Q]}for(var ce=0,ye=0;ye<s;ye++){var Se=h[ye*s+ye]+c[ye*s+ye]>0?1:0;w[D%a.minIterations*s+ye]=Se,ce+=Se}if(ce>0&&(D>=a.minIterations-1||D==a.maxIterations-1)){for(var Oe=0,Ce=0;Ce<s;Ce++){O[Ce]=0;for(var we=0;we<a.minIterations;we++)O[Ce]+=w[we*s+Ce];(0===O[Ce]||O[Ce]===a.minIterations)&&Oe++}if(Oe===s)break}}for(var se=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a}(s,c,h),Le=function(e,r,n){for(var a=ms(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,f=0;f<o.length;f++){for(var c=0,h=0;h<o.length;h++)c+=r[o[h]*e+o[f]];c>u&&(l=f,u=c)}n[i]=o[l]}return ms(e,r,n)}(s,u,se),Ie={},Be=0;Be<se.length;Be++)Ie[se[Be]]=[];for(var Ue=0;Ue<n.length;Ue++){var dt=Le[i[n[Ue].id()]];null!=dt&&Ie[dt].push(n[Ue])}for(var Ve=new Array(se.length),$e=0;$e<se.length;$e++)Ve[$e]=r.collection(Ie[se[$e]]);return Ve},Jf={affinityPropagation:bs,ap:bs},jf=er({root:void 0,directed:!1}),ec={hierholzer:function(e){if(!fe(e)){var r=arguments;e={root:r[0],directed:r[1]}}var l,u,f,n=jf(e),a=n.root,i=n.directed,o=this,s=!1;a&&(f=Y(a)?this.filter(a)[0].id():a[0].id());var c={},h={};o.forEach(i?function(m){var b=m.id();if(m.isNode()){var E=m.indegree(!0),O=m.outdegree(!0),L=E-O,w=O-E;1==L?l?s=!0:l=b:1==w?u?s=!0:u=b:(w>1||L>1)&&(s=!0),c[b]=[],m.outgoers().forEach(function(I){I.isEdge()&&c[b].push(I.id())})}else h[b]=[void 0,m.target().id()]}:function(m){var b=m.id();m.isNode()?(m.degree(!0)%2&&(l?u?s=!0:u=b:l=b),c[b]=[],m.connectedEdges().forEach(function(O){return c[b].push(O.id())})):h[b]=[m.source().id(),m.target().id()]});var v={found:!1,trail:void 0};if(s)return v;if(u&&l)if(i){if(f&&u!=f)return v;f=u}else{if(f&&u!=f&&l!=f)return v;f||(f=u)}else f||(f=o[0].id());var d=function(b){for(var L,w,I,E=b,O=[b];c[E].length;)L=c[E].shift(),w=h[L][0],E!=(I=h[L][1])?(c[I]=c[I].filter(function(D){return D!=L}),E=I):!i&&E!=w&&(c[w]=c[w].filter(function(D){return D!=L}),E=w),O.unshift(L),O.unshift(E);return O},g=[],y=[];for(y=d(f);1!=y.length;)0==c[y[0]].length?(g.unshift(o.getElementById(y.shift())),g.unshift(o.getElementById(y.shift()))):y=d(y.shift()).concat(y);for(var p in g.unshift(o.getElementById(y.shift())),c)if(c[p].length)return v;return v.found=!0,v.trail=this.spawn(g,!0),v}},ci=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},u=function c(h,v,d){h===d&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var y,p,m,b,g=e.getElementById(v).connectedEdges().intersection(e);0===g.size()?i.push(e.spawn(e.getElementById(v))):g.forEach(function(E){y=E.source().id(),p=E.target().id(),(m=y===v?p:y)!==d&&(b=E.id(),s[b]||(s[b]=!0,o.push({x:v,y:m,edge:E})),m in r?r[v].low=Math.min(r[v].low,r[m].id):(c(h,m,v),r[v].low=Math.min(r[v].low,r[m].low),r[v].id<=r[m].low&&(r[v].cutVertex=!0,function(h,v){for(var d=o.length-1,g=[],y=e.spawn();o[d].x!=h||o[d].y!=v;)g.push(o.pop().edge),d--;g.push(o.pop().edge),g.forEach(function(p){var m=p.connectedNodes().intersection(e);y.merge(p),m.forEach(function(b){var E=b.id(),O=b.connectedEdges().intersection(e);y.merge(b),y.merge(r[E].cutVertex?O.filter(function(L){return L.isLoop()}):O)})}),i.push(y)}(v,m))))})};e.forEach(function(c){if(c.isNode()){var h=c.id();h in r||(a=0,u(h,h),r[h].cutVertex=a>1)}});var f=Object.keys(r).filter(function(c){return r[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},hi=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){if(i.push(u),r[u]={index:n,low:n++,explored:!1},e.getElementById(u).connectedEdges().intersection(e).forEach(function(g){var y=g.target().id();y!==u&&(y in r||l(y),r[y].explored||(r[u].low=Math.min(r[u].low,r[y].low)))}),r[u].index===r[u].low){for(var c=e.spawn();;){var h=i.pop();if(c.merge(e.getElementById(h)),r[h].low=r[u].index,r[h].explored=!0,h===u)break}var v=c.edgesWith(c),d=c.merge(v);a.push(d),o=o.difference(d)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:o,components:a}},Es={};[Ta,Ml,Nl,kl,Bl,zl,$l,vf,Hn,Xn,ao,Sf,Gf,Hf,Jf,ec,{hopcroftTarjanBiconnected:ci,htbc:ci,htb:ci,hopcroftTarjanBiconnectedComponents:ci},{tarjanStronglyConnected:hi,tsc:hi,tscc:hi,tarjanStronglyConnectedComponents:hi}].forEach(function(t){rt(Es,t)});var en=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};en.prototype={fulfill:function(e){return Cs(this,1,"fulfillValue",e)},reject:function(e){return Cs(this,2,"rejectReason",e)},then:function(e,r){var n=this,a=new en;return n.onFulfilled.push(Ls(e,a,"fulfill")),n.onRejected.push(Ls(r,a,"reject")),Ds(n),a.proxy}};var Cs=function(e,r,n,a){return 0===e.state&&(e.state=r,e[n]=a,Ds(e)),e},Ds=function(e){1===e.state?Ss(e,"onFulfilled",e.fulfillValue):2===e.state&&Ss(e,"onRejected",e.rejectReason)},Ss=function(e,r,n){if(0!==e[r].length){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Ls=function(e,r,n){return function(a){if("function"!=typeof e)r[n].call(r,a);else{var i;try{i=e(a)}catch(o){return void r.reject(o)}nc(r,i)}}},nc=function t(e,r){if(e!==r&&e.proxy!==r){var n;if("object"===ze(r)&&null!==r||"function"==typeof r)try{n=r.then}catch(i){return void e.reject(i)}if("function"!=typeof n)e.fulfill(r);else{var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):t(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};en.all=function(t){return new en(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,++a===t.length&&e(n)},o=0;o<t.length;o++)!function(s){var l=t[s];null!=l&&null!=l.then?l.then(function(c){i(s,c)},function(c){r(c)}):i(s,l)}(o)})},en.resolve=function(t){return new en(function(e,r){e(t)})},en.reject=function(t){return new en(function(e,r){r(t)})};var qn=typeof Promise<"u"?Promise:en,so=function(e,r,n){var a=Fe(e),i=!a,o=this._private=rt({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&te(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},An=so.prototype;rt(An,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n=e.target._private.animation;(e.queue?n.queue:n.current).push(this),J(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return void 0===e?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return void 0===e?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var c=e[u];null!=c&&(e[u]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var n,r=this._private;return n="frame"===e?r.frames:r.completes,new qn(function(a,i){n.push(function(){a()})})}}),An.complete=An.completed,An.run=An.play,An.running=An.playing;var ac={animated:function(){return function(){var r=this,a=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return!1;var o=a[0];return o?o._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var r=this,a=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;for(var o=0;o<a.length;o++)a[o]._private.animation.queue=[];return this}},delay:function(){return function(r,n){return(this._private.cy||this).styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){return(this._private.cy||this).styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=void 0!==a.length,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var f=s.style();if(r=rt({},r,n),0===Object.keys(r).length)return new so(o[0],r);switch(void 0===r.duration&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200}if(u&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),u&&null!=r.renderedPosition){var h=r.renderedPosition,v=s.pan(),d=s.zoom();r.position=Ko(h,d,v)}if(l&&null!=r.panBy){var g=r.panBy,y=s.pan();r.pan={x:y.x+g.x,y:y.y+g.y}}var p=r.center||r.centre;if(l&&null!=p){var m=s.getCenterPan(p.eles,r.zoom);null!=m&&(r.pan=m)}if(l&&null!=r.fit){var b=r.fit,E=s.getFitViewport(b.eles||b.boundingBox,b.padding);null!=E&&(r.pan=E.pan,r.zoom=E.zoom)}if(l&&fe(r.zoom)){var O=s.getZoomedViewport(r.zoom);null!=O?(O.zoomed&&(r.zoom=O.zoom),O.panned&&(r.pan=O.pan)):r.zoom=null}return new so(o[0],r)}},animate:function(){return function(r,n){var a=this,o=void 0!==a.length?a:[a];if(!(this._private.cy||this).styleEnabled())return this;n&&(r=rt({},r,n));for(var l=0;l<o.length;l++){var u=o[l],f=u.animated()&&(void 0===r.queue||r.queue);u.animation(r,f?{queue:!0}:void 0).play()}return this}},stop:function(){return function(r,n){var a=this,o=void 0!==a.length?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var f=o[l]._private,c=f.animation.current,h=0;h<c.length;h++)n&&(c[h]._private.duration=0);r&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},vi=Array.isArray,oc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sc=/^\w*$/;var lc=function uc(t,e){if(vi(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Kr(t))||sc.test(t)||!oc.test(t)||null!=e&&t in Object(e)};var t,gc=function dc(t){if(!ee(t))return!1;var e=ya(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},uo=Ke["__core-js_shared__"],As=(t=/[^.]+$/.exec(uo&&uo.keys&&uo.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var mc=function yc(t){return!!As&&As in t},Ec=Function.prototype.toString;var xc=function wc(t){if(null!=t){try{return Ec.call(t)}catch{}try{return t+""}catch{}}return""},Cc=/^\[object .+?Constructor\]$/,Oc=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Mc=function Ic(t){return!(!ee(t)||mc(t))&&(gc(t)?Oc:Cc).test(xc(t))};var Rc=function Nc(t,e){return t?.[e]};var lo=function kc(t,e){var r=Rc(t,e);return Mc(r)?r:void 0},Ia=lo(Object,"create");var Gc=function zc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Uc=Object.prototype.hasOwnProperty;var Yc=function Vc(t){var e=this.__data__;if(Ia){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Uc.call(e,t)?e[t]:void 0},Xc=Object.prototype.hasOwnProperty;var qc=function Wc(t){var e=this.__data__;return Ia?void 0!==e[t]:Xc.call(e,t)};var Qc=function Zc(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ia&&void 0===e?"__lodash_hash_undefined__":e,this};function Kn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Kn.prototype.clear=function Bc(){this.__data__=Ia?Ia(null):{},this.size=0},Kn.prototype.delete=Gc,Kn.prototype.get=Yc,Kn.prototype.has=qc,Kn.prototype.set=Qc;var Os=Kn;var Is=function eh(t,e){return t===e||t!=t&&e!=e};var di=function th(t,e){for(var r=t.length;r--;)if(Is(t[r][0],e))return r;return-1},nh=Array.prototype.splice;var ih=function ah(t){var e=this.__data__,r=di(e,t);return!(r<0||(r==e.length-1?e.pop():nh.call(e,r,1),--this.size,0))};var sh=function oh(t){var e=this.__data__,r=di(e,t);return r<0?void 0:e[r][1]};var lh=function uh(t){return di(this.__data__,t)>-1};var ch=function fh(t,e){var r=this.__data__,n=di(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Zn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Zn.prototype.clear=function Jc(){this.__data__=[],this.size=0},Zn.prototype.delete=ih,Zn.prototype.get=sh,Zn.prototype.has=lh,Zn.prototype.set=ch;var hh=Zn,dh=lo(Ke,"Map");var mh=function yh(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var gi=function bh(t,e){var r=t.__data__;return mh(e)?r["string"==typeof e?"string":"hash"]:r.map};var wh=function Eh(t){var e=gi(this,t).delete(t);return this.size-=e?1:0,e};var Th=function xh(t){return gi(this,t).get(t)};var Dh=function Ch(t){return gi(this,t).has(t)};var Lh=function Sh(t,e){var r=gi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Qn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qn.prototype.clear=function gh(){this.size=0,this.__data__={hash:new Os,map:new(dh||hh),string:new Os}},Qn.prototype.delete=wh,Qn.prototype.get=Th,Qn.prototype.has=Dh,Qn.prototype.set=Lh;var Ms=Qn;function fo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(fo.Cache||Ms),r}fo.Cache=Ms;var Oh=fo;var Rh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kh=/\\(\\)?/g,Ns=function Mh(t){var e=Oh(t,function(n){return 500===r.size&&r.clear(),n}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Rh,function(r,n,a,i){e.push(a?i.replace(kh,"$1"):n||r)}),e});var Rs=function Bh(t,e){for(var r=-1,n=null==t?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a},ks=Qt?Qt.prototype:void 0,Ps=ks?ks.toString:void 0;var zh=function Bs(t){if("string"==typeof t)return t;if(vi(t))return Rs(t,Bs)+"";if(Kr(t))return Ps?Ps.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var Fs=function Gh(t){return null==t?"":zh(t)};var zs=function _h(t,e){return vi(t)?t:lc(t,e)?[t]:Ns(Fs(t))};var co=function Uh(t){if("string"==typeof t||Kr(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var Yh=function Vh(t,e){for(var r=0,n=(e=zs(e,t)).length;null!=t&&r<n;)t=t[co(e[r++])];return r&&r==n?t:void 0};var Xh=function Hh(t,e,r){var n=null==t?void 0:Yh(t,e);return void 0===n?r:n},Gs=function(){try{var t=lo(Object,"defineProperty");return t({},"",{}),t}catch{}}();var Kh=function qh(t,e,r){"__proto__"==e&&Gs?Gs(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Qh=Object.prototype.hasOwnProperty;var jh=function Jh(t,e,r){var n=t[e];(!Qh.call(t,e)||!Is(n,r)||void 0===r&&!(e in t))&&Kh(t,e,r)},tv=/^(?:0|[1-9]\d*)$/;var nv=function rv(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&("number"==r||"symbol"!=r&&tv.test(t))&&t>-1&&t%1==0&&t<e};var iv=function av(t,e,r,n){if(!ee(t))return t;for(var a=-1,i=(e=zs(e,t)).length,o=i-1,s=t;null!=s&&++a<i;){var l=co(e[a]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(a!=o){var f=s[l];void 0===(u=n?n(f,l,s):void 0)&&(u=ee(f)?f:nv(e[a+1])?[]:{})}jh(s,l,u),s=s[l]}return t};var sv=function ov(t,e,r){return null==t?t:iv(t,e,r)};var lv=function uv(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var cv=function fv(t){return vi(t)?Rs(t,co):Kr(t)?[t]:lv(Ns(Fs(t)))},vv={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new qn(function(s,l){var f=o.concat([function(v){i.off.apply(i,c),s(v)}]),c=f.concat([]);i.on.apply(i,f)})}}},Nt={};[ac,{data:function(e){return e=rt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}},e),function(a,i){var o=e,s=this,l=void 0!==s.length,u=l?s:[s],f=l?s[0]:s;if(Y(a)){var v,h=-1!==a.indexOf(".")&&cv(a);if(o.allowGetting&&void 0===i)return f&&(o.beforeGet(f),v=h&&void 0===f._private[o.field][a]?Xh(f._private[o.field],h):f._private[o.field][a]),v;if(o.allowSetting&&void 0!==i&&!o.immutableKeys[a]){var g=P({},a,i);o.beforeSet(s,g);for(var y=0,p=u.length;y<p;y++){var m=u[y];o.canSet(m)&&(h&&void 0===f._private[o.field][a]?sv(m._private[o.field],h,i):m._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}else if(o.allowSetting&&fe(a)){var E,O,b=a,L=Object.keys(b);o.beforeSet(s,b);for(var w=0;w<L.length;w++)if(O=b[E=L[w]],!o.immutableKeys[E])for(var D=0;D<u.length;D++){var B=u[D];o.canSet(B)&&(B._private[o.field][E]=O)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&te(a))s.on(o.bindingEvent,a);else if(o.allowGetting&&void 0===a){var N;return f&&(o.beforeGet(f),N=f._private[o.field]),N}return s}},removeData:function(e){return e=rt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(a){var i=e,o=this,l=void 0!==o.length?o:[o];if(Y(a)){for(var u=a.split(/\s+/),f=u.length,c=0;c<f;c++){var h=u[c];if(!at(h)&&!i.immutableKeys[h])for(var d=0,g=l.length;d<g;d++)l[d]._private[i.field][h]=void 0}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(void 0===a){for(var y=0,p=l.length;y<p;y++)for(var m=l[y]._private[i.field],b=Object.keys(m),E=0;E<b.length;E++){var O=b[E];!i.immutableKeys[O]&&(m[O]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},vv].forEach(function(t){rt(Nt,t)});var dv={animate:Nt.animate(),animation:Nt.animation(),animated:Nt.animated(),clearQueue:Nt.clearQueue(),delay:Nt.delay(),delayAnimation:Nt.delayAnimation(),stop:Nt.stop()},pi={classes:function(e){var r=this;if(void 0===e){var n=[];return r[0]._private.classes.forEach(function(d){return n.push(d)}),n}pe(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new $n(e),o=0;o<r.length;o++){for(var s=r[o],l=s._private,u=l.classes,f=!1,c=0;c<e.length;c++)if(!u.has(e[c])){f=!0;break}f||(f=u.size!==e.length),f&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return null!=r&&r._private.classes.has(e)},toggleClass:function(e,r){pe(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=void 0===r,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,f=!1,c=0;c<e.length;c++){var h=e[c],v=u.has(h),d=!1;r||a&&!v?(u.add(h),d=!0):(!r||a&&v)&&(u.delete(h),d=!0),!f&&d&&(i.push(l),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(null==r)r=250;else if(0===r)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};pi.className=pi.classNames=pi.classes;var St={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:kt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};St.variable="(?:[\\w-.]|(?:\\\\"+St.metaChar+"))+",St.className="(?:[\\w-]|(?:\\\\"+St.metaChar+"))+",St.value=St.string+"|"+St.number,St.id=St.variable,function(){var t,e,r;for(t=St.comparatorOp.split("|"),r=0;r<t.length;r++)St.comparatorOp+="|@"+(e=t[r]);for(t=St.comparatorOp.split("|"),r=0;r<t.length;r++)!((e=t[r]).indexOf("!")>=0)&&"="!==e&&(St.comparatorOp+="|\\!"+e)}();var Ze_GROUP=0,Ze_COLLECTION=1,Ze_FILTER=2,Ze_DATA_COMPARE=3,Ze_DATA_EXIST=4,Ze_DATA_BOOL=5,Ze_META_COMPARE=6,Ze_STATE=7,Ze_ID=8,Ze_CLASS=9,Ze_UNDIRECTED_EDGE=10,Ze_DIRECTED_EDGE=11,Ze_NODE_SOURCE=12,Ze_NODE_TARGET=13,Ze_NODE_NEIGHBOR=14,Ze_CHILD=15,Ze_DESCENDANT=16,Ze_PARENT=17,Ze_ANCESTOR=18,Ze_COMPOUND_SPLIT=19,Ze_TRUE=20,ho=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return function(e,r){return-1*on(e,r)}(t.selector,e.selector)}),gv=function(){for(var e,t={},r=0;r<ho.length;r++)t[(e=ho[r]).selector]=e.matches;return t}(),yv="("+ho.map(function(t){return t.selector}).join("|")+")",Jn=function(e){return e.replace(new RegExp("\\\\("+St.metaChar+")","g"),function(r,n){return n})},vn=function(e,r,n){e[e.length-1]=n},vo=[{name:"group",query:!0,regex:"("+St.group+")",populate:function(e,r,n){var i=T(n,1)[0];r.checks.push({type:Ze_GROUP,value:"*"===i?i:i+"s"})}},{name:"state",query:!0,regex:yv,populate:function(e,r,n){var a=T(n,1);r.checks.push({type:Ze_STATE,value:a[0]})}},{name:"id",query:!0,regex:"\\#("+St.id+")",populate:function(e,r,n){var a=T(n,1);r.checks.push({type:Ze_ID,value:Jn(a[0])})}},{name:"className",query:!0,regex:"\\.("+St.className+")",populate:function(e,r,n){var a=T(n,1);r.checks.push({type:Ze_CLASS,value:Jn(a[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+St.variable+")\\s*\\]",populate:function(e,r,n){var a=T(n,1);r.checks.push({type:Ze_DATA_EXIST,field:Jn(a[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+St.variable+")\\s*("+St.comparatorOp+")\\s*("+St.value+")\\s*\\]",populate:function(e,r,n){var a=T(n,3),i=a[0],o=a[1],s=a[2];s=null!=new RegExp("^"+St.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),r.checks.push({type:Ze_DATA_COMPARE,field:Jn(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+St.boolOp+")\\s*("+St.variable+")\\s*\\]",populate:function(e,r,n){var a=T(n,2),i=a[0];r.checks.push({type:Ze_DATA_BOOL,field:Jn(a[1]),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+St.meta+")\\s*("+St.comparatorOp+")\\s*("+St.number+")\\s*\\]\\]",populate:function(e,r,n){var a=T(n,3),o=a[1],s=a[2];r.checks.push({type:Ze_META_COMPARE,field:Jn(a[0]),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:St.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];return null!=n&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:St.directedEdge,populate:function(e,r){if(null==e.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:Ze_DIRECTED_EDGE,source:r,target:i}),vn(e,0,n),e.edgeCount++,i}var o={checks:[]},l={checks:[]};return o.checks.push({type:Ze_NODE_SOURCE,source:r,target:l}),vn(e,0,o),e.edgeCount++,l}},{name:"undirectedEdge",separator:!0,regex:St.undirectedEdge,populate:function(e,r){if(null==e.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:Ze_UNDIRECTED_EDGE,nodes:[r,i]}),vn(e,0,n),e.edgeCount++,i}var o={checks:[]},l={checks:[]};return o.checks.push({type:Ze_NODE_NEIGHBOR,node:r,neighbor:l}),vn(e,0,o),l}},{name:"child",separator:!0,regex:St.child,populate:function(e,r){if(null==e.currentSubject){var n={checks:[]},a={checks:[]};return n.checks.push({type:Ze_CHILD,parent:e[e.length-1],child:a}),vn(e,0,n),e.compoundCount++,a}if(e.currentSubject===r){var o={checks:[]},s=e[e.length-1],l={checks:[]},u={checks:[]},f={checks:[]},c={checks:[]};return o.checks.push({type:Ze_COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Ze_TRUE}],c.checks.push({type:Ze_TRUE}),l.checks.push({type:Ze_PARENT,parent:c,child:f}),vn(e,0,o),e.currentSubject=u,e.compoundCount++,f}var h={checks:[]},v={checks:[]},d=[{type:Ze_PARENT,parent:h,child:v}];return h.checks=r.checks,r.checks=d,e.compoundCount++,v}},{name:"descendant",separator:!0,regex:St.descendant,populate:function(e,r){if(null==e.currentSubject){var n={checks:[]},a={checks:[]};return n.checks.push({type:Ze_DESCENDANT,ancestor:e[e.length-1],descendant:a}),vn(e,0,n),e.compoundCount++,a}if(e.currentSubject===r){var o={checks:[]},s=e[e.length-1],l={checks:[]},u={checks:[]},f={checks:[]},c={checks:[]};return o.checks.push({type:Ze_COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Ze_TRUE}],c.checks.push({type:Ze_TRUE}),l.checks.push({type:Ze_ANCESTOR,ancestor:c,descendant:f}),vn(e,0,o),e.currentSubject=u,e.compoundCount++,f}var h={checks:[]},v={checks:[]},d=[{type:Ze_ANCESTOR,ancestor:h,descendant:v}];return h.checks=r.checks,r.checks=d,e.compoundCount++,v}},{name:"subject",modifier:!0,regex:St.subject,populate:function(e,r){if(null!=e.currentSubject&&e.currentSubject!==r)return Mt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var a=e[e.length-1].checks[0],i=null==a?null:a.type;i===Ze_DIRECTED_EDGE?a.type=Ze_NODE_TARGET:i===Ze_UNDIRECTED_EDGE&&(a.type=Ze_NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];vo.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var mv=function(e){for(var r,n,a,i=0;i<vo.length;i++){var o=vo[i],s=o.name,l=e.match(o.regexObj);if(null!=l){n=l,r=o,a=s,e=e.substring(l[0].length);break}}return{expr:r,match:n,name:a,remaining:e}},xv={parse:function(e){var r=this,n=r.inputText=e,a=r[0]={checks:[]};for(r.length=1,n=function(e){var r=e.match(/^\s+/);return r&&(e=e.substring(r[0].length)),e}(n);;){var i=mv(n);if(null==i.expr)return Mt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(!1===s)return!1;if(null!=s&&(a=s),(n=i.remaining).match(/^\s*$/))break}var l=r[r.length-1];null!=r.currentSubject&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var f=r[u];if(f.compoundCount>0&&f.edgeCount>0)return Mt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Mt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===f.edgeCount&&Mt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return Y(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},i=function(f,c){return f.checks.reduce(function(h,v,d){return h+(c===f&&0===d?"$":"")+function(f,c){var v=f.value;switch(f.type){case Ze_GROUP:var d=e(v);return d.substring(0,d.length-1);case Ze_DATA_COMPARE:return"["+f.field+n(e(f.operator))+r(v)+"]";case Ze_DATA_BOOL:var m=f.field;return"["+e(f.operator)+m+"]";case Ze_DATA_EXIST:return"["+f.field+"]";case Ze_META_COMPARE:return"[["+f.field+n(e(f.operator))+r(v)+"]]";case Ze_STATE:return v;case Ze_ID:return"#"+v;case Ze_CLASS:return"."+v;case Ze_PARENT:case Ze_CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case Ze_ANCESTOR:case Ze_DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case Ze_COMPOUND_SPLIT:var L=i(f.left,c),w=i(f.subject,c),I=i(f.right,c);return L+(L.length>0?" ":"")+w+I;case Ze_TRUE:return""}}(v,c)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o}},_s=function(e,r,n){var a,l,u,i=Y(e),o=x(e),s=Y(n),f=!1,c=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),c=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(i||s||f)&&(l=i||o?""+e:"",u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=0===l.indexOf(u);break;case"=":a=e===n;break;case">":h=!0,a=e>n;break;case">=":h=!0,a=e>=n;break;case"<":h=!0,a=e<n;break;case"<=":h=!0,a=e<=n;break;default:a=!1}return c&&(null!=e||!h)&&(a=!a),a},go=function(e,r){return e.data(r)},Wt=[],Vt=function(e,r){return e.checks.every(function(n){return Wt[n.type](n,r)})};Wt[Ze_GROUP]=function(t,e){var r=t.value;return"*"===r||r===e.group()},Wt[Ze_STATE]=function(t,e){return function(e,r){return gv[e](r)}(t.value,e)},Wt[Ze_ID]=function(t,e){var r=t.value;return e.id()===r},Wt[Ze_CLASS]=function(t,e){return e.hasClass(t.value)},Wt[Ze_META_COMPARE]=function(t,e){var n=t.operator,a=t.value;return _s(function(e,r){return e[r]()}(e,t.field),n,a)},Wt[Ze_DATA_COMPARE]=function(t,e){var n=t.operator,a=t.value;return _s(go(e,t.field),n,a)},Wt[Ze_DATA_BOOL]=function(t,e){var n=t.operator;return function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(go(e,t.field),n)},Wt[Ze_DATA_EXIST]=function(t,e){return function(e){return void 0!==e}(go(e,t.field))},Wt[Ze_UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Vt(r,a)&&Vt(n,i)||Vt(n,a)&&Vt(r,i)},Wt[Ze_NODE_NEIGHBOR]=function(t,e){return Vt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Vt(t.neighbor,r)})},Wt[Ze_DIRECTED_EDGE]=function(t,e){return Vt(t.source,e.source())&&Vt(t.target,e.target())},Wt[Ze_NODE_SOURCE]=function(t,e){return Vt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Vt(t.target,r)})},Wt[Ze_NODE_TARGET]=function(t,e){return Vt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Vt(t.source,r)})},Wt[Ze_CHILD]=function(t,e){return Vt(t.child,e)&&Vt(t.parent,e.parent())},Wt[Ze_PARENT]=function(t,e){return Vt(t.parent,e)&&e.children().some(function(r){return Vt(t.child,r)})},Wt[Ze_DESCENDANT]=function(t,e){return Vt(t.descendant,e)&&e.ancestors().some(function(r){return Vt(t.ancestor,r)})},Wt[Ze_ANCESTOR]=function(t,e){return Vt(t.ancestor,e)&&e.descendants().some(function(r){return Vt(t.descendant,r)})},Wt[Ze_COMPOUND_SPLIT]=function(t,e){return Vt(t.subject,e)&&Vt(t.left,e)&&Vt(t.right,e)},Wt[Ze_TRUE]=function(){return!0},Wt[Ze_COLLECTION]=function(t,e){return t.value.has(e)},Wt[Ze_FILTER]=function(t,e){return(0,t.value)(e)};var dn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||Y(e)&&e.match(/^\s*$/)||(J(e)?this.addQuery({checks:[{type:Ze_COLLECTION,value:e.collection()}]}):te(e)?this.addQuery({checks:[{type:Ze_FILTER,value:e}]}):Y(e)?this.parse(e)||(this.invalid=!0):Xt("A selector must be created from a string; found "))},gn=dn.prototype;[xv,{matches:function(e){for(var n=0;n<this.length;n++)if(Vt(this[n],e))return!0;return!1},filter:function(e){var r=this;if(1===r.length&&1===r[0].checks.length&&r[0].checks[0].type===Ze_ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++)if(Vt(r[o],i))return!0;return!1};return null==r.text()&&(n=function(){return!0}),e.filter(n)}}].forEach(function(t){return rt(gn,t)}),gn.text=function(){return this.inputText},gn.size=function(){return this.length},gn.eq=function(t){return this[t]},gn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},gn.addQuery=function(t){this[this.length++]=t},gn.selector=gn.toString;var pn={allAre:function(e){var r=new dn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new dn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++)if(r?e.apply(r,[this[n],n,this]):e(this[n],n,this))return!0;return!1},every:function(e,r){for(var n=0;n<this.length;n++)if(!(r?e.apply(r,[this[n],n,this]):e(this[n],n,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length;return r===e.length&&(1===r?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};pn.allAreNeighbours=pn.allAreNeighbors,pn.has=pn.contains,pn.equal=pn.equals=pn.same;var Ma,Vs,Lr=function(e,r){return function(a,i,o,s){var f,l=a,u=this;if(null==l?f="":J(l)&&1===l.length&&(f=l.id()),1===u.length&&f){var c=u[0]._private,h=c.traversalCache=c.traversalCache||{},v=h[r]=h[r]||[],d=Cn(f);return v[d]||(v[d]=e.call(u,a,i,o,s))}return e.call(u,a,i,o,s)}},jn={parent:function(e){var r=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var o=this[a]._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++)r.push(n[a]);n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var i=this[n].parents();r=(r=r||i).intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Lr(function(t){for(var e=[],r=0;r<this.length;r++)for(var a=this[r]._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var r=[];return function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}(this.children()),this.spawn(r,!0).filter(e)}};function po(t,e,r,n){for(var a=[],i=new $n,s=t.cy().hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),s&&n(a,i,f)}return t}function $s(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}function Us(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}function Ov(t,e,r){Us(t,e,r),$s(t,e,r)}jn.forEachDown=function(t){return po(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],$s)},jn.forEachUp=function(t){return po(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Us)},jn.forEachUpAndDown=function(t){return po(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ov)},jn.ancestors=jn.parents,(Ma=Vs={data:Nt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Nt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Nt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Nt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Nt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Nt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=Ma.data,Ma.removeAttr=Ma.removeData;var Iv=Vs,yi={};function yo(t){return function(e){var r=this;if(void 0===e&&(e=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}}}function ea(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i][t](r);void 0!==s&&(void 0===n||e(s,n))&&(n=s)}return n}}rt(yi,{degree:yo(function(t,e){return e.source().same(e.target())?2:1}),indegree:yo(function(t,e){return e.target().same(t)?1:0}),outdegree:yo(function(t,e){return e.source().same(t)?1:0})}),rt(yi,{minDegree:ea("degree",function(t,e){return t<e}),maxDegree:ea("degree",function(t,e){return t>e}),minIndegree:ea("indegree",function(t,e){return t<e}),maxIndegree:ea("indegree",function(t,e){return t>e}),minOutdegree:ea("outdegree",function(t,e){return t<e}),maxOutdegree:ea("outdegree",function(t,e){return t>e})}),rt(yi,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Rr,Ys,Hs=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:null!=r.x?r.x-o.x:0,y:null!=r.y?r.y-o.y:0};i.isParent()&&!(0===s.x&&0===s.y)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Xs={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Hs(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(Rr=Ys={position:Nt.data(Xs),silentPosition:Nt.data(rt({},Xs,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Hs(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(fe(e))r?this.silentPosition(e):this.position(e);else if(te(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s,o=this[i];(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(fe(e)?(a={x:x(e.x)?e.x:0,y:x(e.y)?e.y:0},n=r):Y(e)&&x(r)&&((a={x:0,y:0})[e]=r),null!=a){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return fe(e)?this.shift(e,!0):Y(e)&&x(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=fe(e)?e:void 0,l=void 0!==s||void 0!==r&&Y(e);if(n&&n.isNode()){if(!l){var c=n.position();return s=ai(c,i,o),void 0===e?s:s[e]}for(var u=0;u<this.length;u++){var f=this[u];void 0!==r?f.position(e,(r-o[e])/i):void 0!==s&&f.position(Ko(s,i,o))}}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=fe(e)?e:void 0,o=void 0!==i||void 0!==r&&Y(e),s=a.hasCompoundNodes();if(n&&n.isNode()){if(!o){var d=n.position(),g=s?n.parent():null,y=g&&g.length>0;y&&(g=g[0]);var m=y?g.position():{x:0,y:0};return i={x:d.x-m.x,y:d.y-m.y},void 0===e?i:i[e]}for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,c=f&&f.length>0;c&&(f=f[0]);var v=c?f.position():{x:0,y:0};void 0!==r?u.position(e,r+v[e]):void 0!==i&&u.position({x:i.x+v.x,y:i.y+v.y})}}else if(!o)return;return this}}).modelPosition=Rr.point=Rr.position,Rr.modelPositions=Rr.points=Rr.positions,Rr.renderedPoint=Rr.renderedPosition,Rr.relativePoint=Rr.relativePosition;var ta,yn,Mv=Ys;ta=yn={},yn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}},yn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this):this},yn.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(o.isParent()){var s=o._private,l=o.children(),u="include"===o.pstyle("compound-sizing-wrt-labels").value,f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},c=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),h=s.position;(0===c.w||0===c.h)&&((c={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue}).x1=h.x-c.w/2,c.x2=h.x+c.w/2,c.y1=h.y-c.h/2,c.y2=h.y+c.h/2);var g=f.width.left.value;"px"===f.width.left.units&&f.width.val>0&&(g=100*g/f.width.val);var y=f.width.right.value;"px"===f.width.right.units&&f.width.val>0&&(y=100*y/f.width.val);var p=f.height.top.value;"px"===f.height.top.units&&f.height.val>0&&(p=100*p/f.height.val);var m=f.height.bottom.value;"px"===f.height.bottom.units&&f.height.val>0&&(m=100*m/f.height.val);var b=v(f.width.val-c.w,g,y),E=b.biasDiff,O=b.biasComplementDiff,L=v(f.height.val-c.h,p,m),w=L.biasDiff,I=L.biasComplementDiff;s.autoPadding=function d(D,B,F,N){if("%"!==F.units)return"px"===F.units?F.pfValue:0;switch(N){case"width":return D>0?F.pfValue*D:0;case"height":return B>0?F.pfValue*B:0;case"average":return D>0&&B>0?F.pfValue*(D+B)/2:0;case"min":return D>0&&B>0?D>B?F.pfValue*B:F.pfValue*D:0;case"max":return D>0&&B>0?D>B?F.pfValue*D:F.pfValue*B:0;default:return 0}}(c.w,c.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(c.w,f.width.val),h.x=(-E+c.x1+c.x2+O)/2,s.autoHeight=Math.max(c.h,f.height.val),h.y=(-w+c.y1+c.y2+I)/2}function v(D,B,F){var N=0,V=0,z=B+F;return D>0&&z>0&&(N=B/z*D,V=F/z*D),{biasDiff:N,biasComplementDiff:V}}}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Ar=function(e){return e===1/0||e===-1/0?0:e},kr=function(e,r,n,a,i){a-r==0||i-n==0||null==r||null==n||null==a||null==i||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},On=function(e,r){return null==r?e:kr(e,r.x1,r.y1,r.x2,r.y2)},Na=function(e,r,n){return Nr(e,r,n)},mi=function(e,r,n){if(!r.cy().headless()){var l,u,a=r._private,i=a.rstyle,o=i.arrowWidth/2;if("none"!==r.pstyle(n+"-arrow-shape").value){"source"===n?(l=i.srcX,u=i.srcY):"target"===n?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=l-o,c.y1=u-o,c.x2=l+o,c.y2=u+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,oi(c,1),kr(e,c.x1,c.y1,c.x2,c.y2)}}},mo=function(e,r,n){if(!r.cy().headless()){var a,i=r._private,o=i.rstyle;if(r.pstyle((a=n?n+"-":"")+"label").strValue){var F,N,V,z,l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),f=Na(o,"labelWidth",n),c=Na(o,"labelHeight",n),h=Na(o,"labelX",n),v=Na(o,"labelY",n),d=r.pstyle(a+"text-margin-x").pfValue,g=r.pstyle(a+"text-margin-y").pfValue,y=r.isEdge(),p=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,E=r.pstyle("text-border-width").pfValue/2,O=r.pstyle("text-background-padding").pfValue,w=c,I=f,D=I/2,B=w/2;if(y)F=h-D,N=h+D,V=v-B,z=v+B;else{switch(l.value){case"left":F=h-I,N=h;break;case"center":F=h-D,N=h+D;break;case"right":F=h,N=h+I}switch(u.value){case"top":V=v-w,z=v;break;case"center":V=v-B,z=v+B;break;case"bottom":V=v,z=v+w}}F+=d-Math.max(m,E)-O-2,N+=d+Math.max(m,E)+O+2,V+=g-Math.max(m,E)-O-2,z+=g+Math.max(m,E)+O+2;var oe=n||"main",H=i.labelBounds,Q=H[oe]=H[oe]||{};Q.x1=F,Q.y1=V,Q.x2=N,Q.y2=z,Q.w=N-F,Q.h=z-V;var ue=y&&"autorotate"===p.strValue;if(ue||null!=p.pfValue&&0!==p.pfValue){var me=ue?Na(i.rstyle,"labelAngle",n):p.pfValue,ce=Math.cos(me),ye=Math.sin(me),Se=(F+N)/2,Oe=(V+z)/2;if(!y){switch(l.value){case"left":Se=N;break;case"right":Se=F}switch(u.value){case"top":Oe=z;break;case"bottom":Oe=V}}var Ce=function(dt,Ve){return{x:(dt-=Se)*ce-(Ve-=Oe)*ye+Se,y:dt*ye+Ve*ce+Oe}},we=Ce(F,V),se=Ce(F,z),Le=Ce(N,V),Ie=Ce(N,z);F=Math.min(we.x,se.x,Le.x,Ie.x),N=Math.max(we.x,se.x,Le.x,Ie.x),V=Math.min(we.y,se.y,Le.y,Ie.y),z=Math.max(we.y,se.y,Le.y,Ie.y)}var Be=oe+"Rot",Ue=H[Be]=H[Be]||{};Ue.x1=F,Ue.y1=V,Ue.x2=N,Ue.y2=z,Ue.w=N-F,Ue.h=z-V,kr(e,F,V,N,z),kr(i.labelBounds.all,F,V,N,z)}return e}},Ws=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),(a+=n(e.includeTargetLabels))+n(e.includeOverlays)},qs=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return function(e,r){var n={value:0,done:!1},a=0,i=e.length;return _o({next:function(){return a<i?n.value=e[a++]:n.done=!0,n}},r)}([a(r.x),a(r.y),a(n.x),a(n.y)])}return 0},Ks=function(e,r){var a,n=e._private,i=e.isEdge(),s=(null==r?Zs:Ws(r))===Zs,l=qs(e),u=n.bbCachePosKey===l,f=r.useCache&&u,c=function(g){return null==g._private.bbCache||g._private.styleDirty};if(!f||c(e)||i&&c(e.source())||c(e.target())?(u||e.recalculateRenderedStyle(f),a=function(e,r){var f,c,h,v,d,g,n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=br(),s=e._private,l=e.isNode(),u=e.isEdge(),y=s.rstyle,p=l&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(nt){return"none"!==nt.pstyle("display").value},b=!a||m(e)&&(!u||m(e.source())&&m(e.target()));if(b){var O=0;a&&r.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(O=e.pstyle("overlay-padding").value);var w=0;a&&r.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(w=e.pstyle("underlay-padding").value);var I=Math.max(O,w),B=0;if(a&&(B=e.pstyle("width").pfValue/2),l&&r.includeNodes){var F=e.position();d=F.x,g=F.y;var V=e.outerWidth()/2,oe=e.outerHeight()/2;kr(o,f=d-V,h=g-oe,c=d+V,v=g+oe)}else if(u&&r.includeEdges)if(a&&!i){var H=e.pstyle("curve-style").strValue;if(f=Math.min(y.srcX,y.midX,y.tgtX),c=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),v=Math.max(y.srcY,y.midY,y.tgtY),kr(o,f-=B,h-=B,c+=B,v+=B),"haystack"===H){var Q=y.haystackPts;if(Q&&2===Q.length){if((f=Q[0].x)>(c=Q[1].x)){var ue=f;f=c,c=ue}if((h=Q[0].y)>(v=Q[1].y)){var ve=h;h=v,v=ve}kr(o,f-B,h-B,c+B,v+B)}}else if("bezier"===H||"unbundled-bezier"===H||"segments"===H||"taxi"===H){var me;switch(H){case"bezier":case"unbundled-bezier":me=y.bezierPts;break;case"segments":case"taxi":me=y.linePts}if(null!=me)for(var ce=0;ce<me.length;ce++){var ye=me[ce];kr(o,f=ye.x-B,h=ye.y-B,c=ye.x+B,v=ye.y+B)}}}else{var Oe=e.source().position(),we=e.target().position();if((f=Oe.x)>(c=we.x)){var se=f;f=c,c=se}if((h=Oe.y)>(v=we.y)){var Le=h;h=v,v=Le}kr(o,f-=B,h-=B,c+=B,v+=B)}if(a&&r.includeEdges&&u&&(mi(o,e,"mid-source"),mi(o,e,"mid-target"),mi(o,e,"source"),mi(o,e,"target")),a&&"yes"===e.pstyle("ghost").value){var Be=e.pstyle("ghost-offset-x").pfValue,Ue=e.pstyle("ghost-offset-y").pfValue;kr(o,o.x1+Be,o.y1+Ue,o.x2+Be,o.y2+Ue)}var ft=s.bodyBounds=s.bodyBounds||{};Qo(ft,o),Ji(ft,p),oi(ft,1),a&&kr(o,(f=o.x1)-I,(h=o.y1)-I,(c=o.x2)+I,(v=o.y2)+I);var dt=s.overlayBounds=s.overlayBounds||{};Qo(dt,o),Ji(dt,p),oi(dt,1);var Ve=s.labelBounds=s.labelBounds||{};null!=Ve.all?function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0}(Ve.all):Ve.all=br(),a&&r.includeLabels&&(r.includeMainLabels&&mo(o,e,null),u&&(r.includeSourceLabels&&mo(o,e,"source"),r.includeTargetLabels&&mo(o,e,"target")))}return o.x1=Ar(o.x1),o.y1=Ar(o.y1),o.x2=Ar(o.x2),o.y2=Ar(o.y2),o.w=Ar(o.x2-o.x1),o.h=Ar(o.y2-o.y1),o.w>0&&o.h>0&&b&&(Ji(o,p),oi(o,1)),o}(e,Ra),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var v=e.isNode();a=br(),(r.includeNodes&&v||r.includeEdges&&!v)&&On(a,r.includeOverlays?n.overlayBounds:n.bodyBounds),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?On(a,n.labelBounds.all):(r.includeMainLabels&&On(a,n.labelBounds.mainRot),r.includeSourceLabels&&On(a,n.labelBounds.sourceRot),r.includeTargetLabels&&On(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ra={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Zs=Ws(Ra),Qs=er(Ra);yn.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=br();var r=Qs(t=t||Ra),n=this;if(n.cy().styleEnabled())for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=qs(s);s.recalculateRenderedStyle(r.useCache&&l.bbCachePosKey===u&&!l.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var h=0;h<n.length;h++)On(e,Ks(n[h],r))}else t=void 0===t?Ra:Qs(t),e=Ks(this[0],t);return e.x1=Ar(e.x1),e.y1=Ar(e.y1),e.x2=Ar(e.x2),e.y2=Ar(e.y2),e.w=Ar(e.x2-e.x1),e.h=Ar(e.y2-e.y1),e},yn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},yn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),fe(t)){var i=t;t=function(){return i}}r.startBatch(),e.forEach(function(f,c){return f._private.bbAtOldPos=t(f,c)}).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return e.silentPositions(function(f){return f._private.bbAtOldPos}),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l},ta.boundingbox=ta.bb=ta.boundingBox,ta.renderedBoundingbox=ta.renderedBoundingBox;var ka,Pa,Rv=yn;ka=Pa={};var Js=function(e){e.uppercaseName=Yt(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Yt(e.outerName),ka[e.name]=function(){var n=this[0],a=n._private;if(n){if(a.cy._private.styleEnabled){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);return"label"===s.strValue?(n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0):s.pfValue}return 1}},ka["outer"+e.uppercaseName]=function(){var n=this[0];if(n)return n._private.cy._private.styleEnabled?n[e.name]()+n.pstyle("border-width").pfValue+2*n.padding():1},ka["rendered"+e.uppercaseName]=function(){var n=this[0];if(n)return n[e.name]()*this.cy().zoom()},ka["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n)return n[e.outerName]()*this.cy().zoom()}};Js({name:"width"}),Js({name:"height"}),Pa.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},Pa.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},Pa.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var kv=Pa,js={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},Yv=Object.keys(js).reduce(function(t,e){var r=js[e],n=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(e);return t[e]=function(){return function(e,r){if(e.isEdge())return r(e)}(this,r.get)},t[n]=r.mult?function(){return function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return ai(o,i,a)})}}(this,r.get)}:function(){return function(e,r){if(e.isEdge()){var n=e.cy();return ai(r(e),n.zoom(),n.pan())}}(this,r.get)},t},{}),Hv=rt({},Mv,Rv,kv,Yv),eu=function(e,r){this.recycle(e,r)};function Ba(){return!1}function bi(){return!0}eu.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ba,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?bi:Ba):null!=e&&e.type?r=e:this.type=e,null!=r&&(this.originalEvent=r.originalEvent,this.type=null!=r.type?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=bi;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=bi;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bi,this.stopPropagation()},isDefaultPrevented:Ba,isPropagationStopped:Ba,isImmediatePropagationStopped:Ba};var tu=/^([^.]+)(\.(?:[^.]+))?$/,ru={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},nu=Object.keys(ru),Wv={};function Ei(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wv,e=arguments.length>1?arguments[1]:void 0,r=0;r<nu.length;r++){var n=nu[r];this[n]=t[n]||ru[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var mn=Ei.prototype,au=function(e,r,n,a,i,o,s){te(a)&&(i=a,a=null),s&&(o=null==o?s:rt({},o,s));for(var l=pe(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!at(f)){var c=f.match(tu);if(c&&!1===r(e,f,c[1],c[2]?c[2]:null,a,i,o))break}}},iu=function(e,r){return e.addEventFields(e.context,r),new eu(r.type,r)},qv=function(e,r,n){if(function(e){return"event"===ae(e)}(n))r(e,n);else if(fe(n))r(e,iu(e,n));else for(var a=pe(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!at(o)){var s=o.match(tu);s&&r(e,iu(e,{type:s[1],namespace:s[2]?s[2]:null,target:e.context}))}}};mn.on=mn.addListener=function(t,e,r,n,a){return au(this,function(i,o,s,l,u,f,c){te(f)&&i.listeners.push({event:o,callback:f,type:s,namespace:l,qualifier:u,conf:c})},t,e,r,n,a),this},mn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})},mn.removeListener=mn.off=function(t,e,r,n){var a=this;0!==this.emitting&&(this.listeners=function(e){return e.slice()}(this.listeners));for(var i=this.listeners,o=function(u){var f=i[u];au(a,function(c,h,v,d,g,y){if((f.type===v||"*"===t)&&(!d&&".*"!==f.namespace||f.namespace===d)&&(!g||c.qualifierCompare(f.qualifier,g))&&(!y||f.callback===y))return i.splice(u,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this},mn.removeAllListeners=function(){return this.removeListener("*")},mn.emit=mn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,pe(e)||(e=[e]),qv(this,function(i,o){null!=r&&(a=(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}]).length);for(var s=function(f){var c=n[f];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||".*"===c.namespace)&&i.eventMatches(i.context,c,o)){var h=[o];null!=e&&function(e,r){for(var n=0;n<r.length;n++)e.push(r[n])}(h,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(g){return g!==c}));var v=i.callbackContext(i.context,c,o),d=c.callback.apply(v,h);i.afterEmit(i.context,c,o),!1===d&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var Kv={qualifierCompare:function(e,r){return null==e||null==r?null==e&&null==r:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return null==a||e!==n.target&&ge(n.target)&&a.matches(n.target)},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return null!=r.qualifier?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},wi=function(e){return Y(e)?new dn(e):e},ou={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Ei(Kv,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=wi(r),i=0;i<this.length;i++)this[i].emitter().on(e,a,n);return this},removeListener:function(e,r,n){for(var a=wi(r),i=0;i<this.length;i++)this[i].emitter().removeListener(e,a,n);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,r,n){for(var a=wi(r),i=0;i<this.length;i++)this[i].emitter().one(e,a,n);return this},once:function(e,r,n){for(var a=wi(r),i=0;i<this.length;i++)this[i].emitter().on(e,a,n,{once:!0,onceCollection:this})},emit:function(e,r){for(var n=0;n<this.length;n++)this[n].emitter().emit(e,r);return this},emitAndNotify:function(e,r){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,r),this}};Nt.eventAliasesOn(ou);var su={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(void 0===e)return this;if(Y(e)||J(e))return new dn(e).filter(this);if(te(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i];(r?e.apply(r,[o,i,a]):e(o,i,a))&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Y(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n];e.has(a)||r.push(a)}return r}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(Y(e))return this.filter(e);for(var n=this.spawn(),o=this.length<e.length,s=o?this:e,l=o?e:this,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;Y(e)&&(e=r.$(e));var n=this.spawn(),i=e,o=function(l,u){for(var f=0;f<l.length;f++){var c=l[f];u.hasElementWithId(c._private.data.id)||n.push(c)}};return o(this,i),o(i,this),n},diff:function(e){var r=this._private.cy;Y(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=e,l=function(f,c,h){for(var v=0;v<f.length;v++){var d=f[v];c.hasElementWithId(d._private.data.id)?i.merge(d):h.push(d)}};return l(this,s,n),l(s,this,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(Y(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i];!this.has(o)&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Y(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id;if(!i.has(l)){var f=this.length++;this[f]=s,i.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var n=this[e].id(),i=this._private.map;if(this[e]=void 0,i.delete(n),this.length>1&&e!==this.length-1){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){var i=this._private.map.get((e=e[0])._private.data.id);return i?(this.unmergeAt(i.index),this):this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Y(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--)e(this[r])&&this.unmergeAt(r);return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var a,n=-1/0,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var a,n=1/0,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},Lt=su;Lt.u=Lt["|"]=Lt["+"]=Lt.union=Lt.or=Lt.add,Lt["\\"]=Lt["!"]=Lt["-"]=Lt.difference=Lt.relativeComplement=Lt.subtract=Lt.not,Lt.n=Lt["&"]=Lt["."]=Lt.and=Lt.intersection=Lt.intersect,Lt["^"]=Lt["(+)"]=Lt["(-)"]=Lt.symmetricDifference=Lt.symdiff=Lt.xor,Lt.fnFilter=Lt.filterFn=Lt.stdFilter=Lt.filter,Lt.complement=Lt.abscomp=Lt.absoluteComplement;var uu=function(e,r){var a=e.cy().hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return"auto"===c.value?a?f.zDepth():0:"bottom"===c.value?-1:"top"===c.value?Wi:0}var o=i(e)-i(r);if(0!==o)return o;function s(f){return"auto"===f.pstyle("z-index-compare").value&&f.isNode()?1:0}var l=s(e)-s(r);if(0!==l)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return 0!==u?u:e.poolIndex()-r.poolIndex()},xi={forEach:function(e,r){if(te(e))for(var n=this.length,a=0;a<n;a++){var i=this[a];if(!1===(r?e.apply(r,[i,a,this]):e(i,a,this)))break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;null==r&&(r=a),null==e&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!te(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(uu)},zDepth:function(){var e=this[0];if(e){var r=e._private;if("nodes"===r.group){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Wi-1}var o=r.target,s=r.source.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}};xi.each=xi.forEach;var e;e="undefined",(typeof Symbol>"u"?"undefined":ze(Symbol))!=e&&ze(Symbol.iterator)!=e&&(xi[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return P({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})});var Jv=er({nodeDimensionsIncludeLabels:!1}),Ti={layoutDimensions:function(e){var r;if(e=Jv(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};else r={w:0,h:0};return(0===r.w||0===r.h)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(O){return!O.isParent()}),i=this.cy(),o=r.eles,s=function(L){return L.id()},l=bt(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=r.spacingFactor&&1!==r.spacingFactor,h=function(){if(!f)return null;for(var L=br(),w=0;w<a.length;w++){var D=l(a[w],w);jl(L,D.x,D.y)}return L}(),v=bt(function(O,L){var w=l(O,L);f&&(w=function(L,w,I){var D_x=w.x1+w.w/2,D_y=w.y1+w.h/2;return{x:D_x+(I.x-D_x)*L,y:D_y+(I.y-D_y)*L}}(Math.abs(r.spacingFactor),h,w));return null!=r.transform&&(w=r.transform(O,w)),w},s);if(r.animate){for(var d=0;d<a.length;d++){var g=a[d],y=v(g,d);if(null==r.animateFilter||r.animateFilter(g,d)){var m=g.animation({position:y,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else g.position(y)}if(r.fit){var b=i.animation({fit:{boundingBox:o.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(void 0!==r.zoom&&void 0!==r.pan){var E=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}e.animations.forEach(function(O){return O.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),qn.all(e.animations.map(function(O){return O.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),null!=r.zoom&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(rt({},e,{eles:this}))}};function lu(t,e,r){var i,n=r._private,a=n.styleCache=n.styleCache||[];return null!=(i=a[t])||(i=a[t]=e(r)),i}function Ci(t,e){return t=Cn(t),function(n){return lu(t,e,n)}}function Di(t,e){t=Cn(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return lu(t,r,a)}}Ti.createLayout=Ti.makeLayout=Ti.layout;var tr={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var n,e=this.cy(),r=function(i){return i._private.styleCache=null};return e.hasCompoundNodes()?((n=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(n.connectedEdges()),n.forEach(r)):this.forEach(function(a){r(a),a.connectedEdges().forEach(r)}),this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching())return r._private.batchStyleEles.merge(this),this;var i=this;e=!(!e&&void 0!==e),r.hasCompoundNodes()&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],a=n.cy();if(a.styleEnabled()&&n)return this.cleanStyle(),n._private.style[e]??(r?a.style().getDefaultProperty(e):null)},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];return n?r.style().getRenderedStyle(n,e):void 0},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(fe(e))i.applyBypass(this,e,false),this.emitAndNotify("style");else if(Y(e)){if(void 0===r){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}i.applyBypass(this,e,r,false),this.emitAndNotify("style")}else if(void 0===e){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var a=r.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++)a.removeAllBypasses(i[o],false);else{e=e.split(/\s+/);for(var l=0;l<i.length;l++)a.removeBypasses(i[l],e,false)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++)i*=o[s].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();return r?n?0===r.effectiveOpacity():0===r.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function bo(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++)if(!e(n[a]))return!1;return!0}function Eo(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||bo(i,n);var l=s.source,u=s.target;return r(l)&&(!o||bo(l,r))&&(l===u||r(u)&&(!o||bo(u,r)))}}}var ra=Ci("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});tr.takesUpSpace=Di("takesUpSpace",Eo({ok:ra}));var jv=Ci("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&ra(t)}),ed=Ci("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&ra(t)});tr.interactive=Di("interactive",Eo({ok:jv,parentOk:ed,edgeOkViaNode:ra})),tr.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var td=Ci("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&ra(t)});tr.visible=Di("visible",Eo({ok:td,edgeOkViaNode:ra})),tr.hidden=function(){var t=this[0];if(t)return!t.visible()},tr.isBundledBezier=Di("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),tr.bypass=tr.css=tr.style,tr.renderedCss=tr.renderedStyle,tr.removeBypass=tr.removeCss=tr.removeStyle,tr.pstyle=tr.parsedStyle;var bn={};function fu(t){return function(){var e=arguments,r=[];if(2===e.length)this.on(t.event,e[0],e[1]);else if(1===e.length&&te(e[0]))this.on(t.event,e[0]);else if(0===e.length||1===e.length&&pe(e[0])){for(var o=1===e.length?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],f=l._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(l);if(void 0!==c&&(u=c,!c))return this}u&&(l._private[t.field]=t.value,f&&r.push(l))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),o&&h.emit(o)}return this}}function na(t){bn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(void 0!==r)return r}return e._private[t.field]}},bn[t.on]=fu({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),bn[t.off]=fu({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}na({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),na({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),na({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),na({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),bn.deselect=bn.unselect,bn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},na({field:"active",on:"activate",off:"unactivate"}),na({field:"pannable",on:"panify",off:"unpanify"}),bn.inactive=function(){var t=this[0];if(t)return!t._private.active};var ur={},cu=function(e){return function(n){for(var i=[],o=0;o<this.length;o++){var s=this[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var c=u[f],h=c.source(),v=c.target();if(e.noIncomingEdges&&v===s&&h!==s||e.noOutgoingEdges&&h===s&&v!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},hu=function(e){return function(r){for(var a=[],i=0;i<this.length;i++){var o=this[i];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),c=u.target();e.outgoing&&f===o?(a.push(u),a.push(c)):e.incoming&&c===o&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(r)}},vu=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],f=u.id();i[f]||(i[f]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};function du(t){return function(r){for(var n=[],a=0;a<this.length;a++){var o=this[a]._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}function gu(t){return function(r){var n=[],a=this._private.cy,i=t||{};Y(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),h=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target);(c||h)&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(u))}return this.spawn(n,!0)}}function pu(t){return t=rt({},{codirected:!1},t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var u=i[s]._private,f=u.source,c=f._private.data.id,h=u.data.target,v=f._private.edges,d=0;d<v.length;d++){var g=v[d],y=g._private.data,p=y.target,m=y.source,b=p===h&&m===c;(o.codirected&&b||!o.codirected&&(b||c===p&&h===m))&&a.push(g)}return this.spawn(a,!0).filter(n)}}ur.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},rt(ur,{roots:cu({noIncomingEdges:!0}),leaves:cu({noOutgoingEdges:!0}),outgoers:Lr(hu({outgoing:!0}),"outgoers"),successors:vu({outgoing:!0}),incomers:Lr(hu({incoming:!0}),"incomers"),predecessors:vu({incoming:!0})}),rt(ur,{neighborhood:Lr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),ur.neighbourhood=ur.neighborhood,ur.closedNeighbourhood=ur.closedNeighborhood,ur.openNeighbourhood=ur.openNeighborhood,rt(ur,{source:Lr(function(e){var n,r=this[0];return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Lr(function(e){var n,r=this[0];return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:du({attr:"source"}),targets:du({attr:"target"})}),rt(ur,{edgesWith:Lr(gu(),"edgesWith"),edgesTo:Lr(gu({thisIsSrc:!0}),"edgesTo")}),rt(ur,{connectedEdges:Lr(function(t){for(var e=[],n=0;n<this.length;n++){var a=this[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++)e.push(i[o])}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Lr(function(t){for(var e=[],n=0;n<this.length;n++){var a=this[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Lr(pu(),"parallelEdges"),codirectedEdges:Lr(pu({codirected:!0}),"codirectedEdges")}),rt(ur,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=null==e?r.nodes():e.nodes(),o=[];null!=e&&i.empty()&&(i=e.sources());var s=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return r.spawn();var l=function(){var f=n.collection();o.push(f);var c=i[0];s(c,f),r.bfs({directed:!1,roots:c,visit:function(v){return s(v,f)}}),f.forEach(function(h){h.connectedEdges().forEach(function(v){r.has(v)&&f.has(v.source())&&f.has(v.target())&&f.merge(v)})})};do{l()}while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),ur.componentsOf=ur.components;var rr=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var i=new Vr,o=!1;if(r){if(r.length>0&&fe(r[0])&&!ge(r[0])){o=!0;for(var s=[],l=new $n,u=0,f=r.length;u<f;u++){var c=r[u];null==c.data&&(c.data={});var h=c.data;if(null==h.id)h.id=Xo();else if(e.hasElementWithId(h.id)||l.has(h.id))continue;var v=new ni(e,c,!1);s.push(v),l.add(h.id)}r=s}}else r=[];this.length=0;for(var d=0,g=r.length;d<g;d++){var y=r[d][0];if(null!=y){var p=y._private.data.id;(!n||!i.has(p))&&(n&&i.set(p,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new Vr,E=this.eles,O=0;O<E.length;O++){var L=E[O];b.set(L.id(),{index:O,ele:L})}}},n&&(this._private.map=i),o&&!a&&this.restore()}else Xt("A collection must have a reference to the core")},_t=ni.prototype=rr.prototype=Object.create(Array.prototype);_t.instanceString=function(){return"collection"},_t.spawn=function(t,e){return new rr(this.cy(),t,e)},_t.spawnSelf=function(){return this.spawn(this)},_t.cy=function(){return this._private.cy},_t.renderer=function(){return this._private.cy.renderer()},_t.element=function(){return this[0]},_t.collection=function(){return Me(this)?this:new rr(this._private.cy,[this])},_t.unique=function(){return new rr(this._private.cy,this,!0)},_t.hasElementWithId=function(t){return this._private.map.has(t=""+t)},_t.getElementById=function(t){var e=this._private.cy,r=this._private.map.get(t=""+t);return r?r.ele:new rr(e)},_t.$id=_t.getElementById,_t.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},_t.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},_t.indexOfId=function(t){return this._private.map.get(t=""+t).index},_t.json=function(t){var e=this.element(),r=this.cy();if(null==e&&t)return this;if(null!=e){var n=e._private;if(fe(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,l=t.data.target;null!=s&&s!=a.source&&(o.source=""+s,i=!0),null!=l&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var f=t.data.parent;"parent"in t.data&&(null!=f||null!=a.parent)&&f!=a.parent&&(void 0===f&&(f=null),null!=f&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var c=function(g,y,p){var m=t[g];null!=m&&m!==n[g]&&(m?e[y]():e[p]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),r.endBatch(),this}if(void 0===t){var h={data:Ur(n.data),position:Ur(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:""},v=0;return n.classes.forEach(function(d){return h.classes+=0==v++?d:" "+d}),h}}},_t.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},_t.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var a=this[r].json(),i=new ni(t,a,!1);e.push(i)}return new rr(t,e)},_t.copy=_t.clone,_t.restore=function(){for(var s,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=r.cy(),a=n._private,i=[],o=[],l=0,u=r.length;l<u;l++){var f=r[l];e&&!f.removed()||(f.isNode()?i.push(f):o.push(f))}s=i.concat(o);var c,h=function(){s.splice(c,1),c--};for(c=0;c<s.length;c++){var v=s[c],d=v._private,g=d.data;if(v.clearTraversalCache(),e||d.removed)if(void 0===g.id)g.id=Xo();else if(x(g.id))g.id=""+g.id;else{if(at(g.id)||!Y(g.id)){Xt("Can not create element with invalid string ID `"+g.id+"`"),h();continue}if(n.hasElementWithId(g.id)){Xt("Can not create second element with ID `"+g.id+"`"),h();continue}}var y=g.id;if(v.isNode()){var p=d.position;null==p.x&&(p.x=0),null==p.y&&(p.y=0)}if(v.isEdge()){for(var m=v,b=["source","target"],E=b.length,O=!1,L=0;L<E;L++){var w=b[L],I=g[w];x(I)&&(I=g[w]=""+g[w]),null==I||""===I?(Xt("Can not create edge `"+y+"` with unspecified "+w),O=!0):n.hasElementWithId(I)||(Xt("Can not create edge `"+y+"` with nonexistant "+w+" `"+I+"`"),O=!0)}if(O){h();continue}var D=n.getElementById(g.source),B=n.getElementById(g.target);D.same(B)?D._private.edges.push(m):(D._private.edges.push(m),B._private.edges.push(m)),m._private.source=D,m._private.target=B}d.map=new Vr,d.map.set(y,{ele:v,index:0}),d.removed=!1,e&&n.addToPool(v)}for(var F=0;F<i.length;F++){var N=i[F],V=N._private.data;x(V.parent)&&(V.parent=""+V.parent);var z=V.parent;if(null!=z||N._private.parent){var H=N._private.parent?n.collection().merge(N._private.parent):n.getElementById(z);if(H.empty())V.parent=void 0;else if(H[0].removed())Mt("Node added with missing parent, reference to parent removed"),V.parent=void 0,N._private.parent=null;else{for(var Q=!1,ue=H;!ue.empty();){if(N.same(ue)){Q=!0,V.parent=void 0;break}ue=ue.parent()}Q||(H[0]._private.children.push(N),N._private.parent=H[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var ve=s.length===r.length?r:new rr(n,s),me=0;me<ve.length;me++){var ce=ve[me];ce.isNode()||(ce.parallelEdges().clearTraversalCache(),ce.source().clearTraversalCache(),ce.target().clearTraversalCache())}(a.hasCompoundNodes?n.collection().merge(ve).merge(ve.connectedNodes()).merge(ve.parent()):ve).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ve.emitAndNotify("add"):e&&ve.emit("add")}return r},_t.removed=function(){var t=this[0];return t&&t._private.removed},_t.inside=function(){var t=this[0];return t&&!t._private.removed},_t.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],a={},i=r._private.cy;function l(z){var oe=a[z.id()];e&&z.removed()||oe||(a[z.id()]=!0,z.isNode()?(n.push(z),function o(z){for(var oe=z._private.edges,H=0;H<oe.length;H++)l(oe[H])}(z),function s(z){for(var oe=z._private.children,H=0;H<oe.length;H++)l(oe[H])}(z)):n.unshift(z))}for(var u=0,f=r.length;u<f;u++)l(r[u]);function h(z,oe){fn(z._private.edges,oe),z.clearTraversalCache()}var d=[];function g(z,oe){oe=oe[0];var H=(z=z[0])._private.children,Q=z.id();fn(H,oe),oe._private.parent=null,d.ids[Q]||(d.ids[Q]=!0,d.push(z))}d.ids={},r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var y=0;y<n.length;y++){var p=n[y];if(p.isEdge()){var m=p.source()[0],b=p.target()[0];h(m,p),h(b,p);for(var E=p.parallelEdges(),O=0;O<E.length;O++){var L=E[O];L.clearTraversalCache(),L.isBundledBezier()&&L.dirtyBoundingBoxCache()}}else{var w=p.parent();0!==w.length&&g(w,p)}e&&(p._private.removed=!0)}var I=i._private.elements;i._private.hasCompoundNodes=!1;for(var D=0;D<I.length;D++)if(I[D].isParent()){i._private.hasCompoundNodes=!0;break}var F=new rr(this.cy(),n);F.size()>0&&(t?F.emitAndNotify("remove"):e&&F.emit("remove"));for(var N=0;N<d.length;N++){var V=d[N];(!e||!V.removed())&&V.updateStyle()}return F},_t.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(d){return null==d?d:""+d};if(void 0!==t.source||void 0!==t.target){var o=i(t.source),s=i(t.target),l=null!=o&&e.hasElementWithId(o),u=null!=s&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var d=r[v],g=d._private.data;d.isEdge()&&(l&&(g.source=o),u&&(g.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(void 0!==t.parent){var f=i(t.parent);if(null===f||e.hasElementWithId(f)){var h=null===f?void 0:f;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var g=r[d],y=g._private.data;g.isNode()&&(y.parent=h)}v.restore(n,a)}),r.emitAndNotify("move")}}return this},[Es,dv,pi,pn,jn,Iv,yi,Hv,ou,su,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},xi,Ti,tr,bn,ur].forEach(function(t){rt(_t,t)});var nd={add:function(e){var r,n=this;if(J(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++)i.push(a[o].json());r=new rr(n,i)}}else if(pe(e))r=new rr(n,e);else if(fe(e)&&(pe(e.nodes)||pe(e.edges))){for(var u=e,f=[],c=["nodes","edges"],h=0,v=c.length;h<v;h++){var d=c[h],g=u[d];if(pe(g))for(var y=0,p=g.length;y<p;y++){var m=rt({group:d},g[y]);f.push(m)}}r=new rr(n,f)}else r=new ni(n,e).collection();return r},remove:function(e){return J(e)||Y(e)&&(e=this.$(e)),e.remove()}};function ad(t,e,r,n){var a=4,o=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var c=0;c<4;++c)if("number"!=typeof arguments[c]||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=f?new Float32Array(l):new Array(l);function v(B,F){return 1-3*F+3*B}function d(B,F){return 3*F-6*B}function g(B){return 3*B}function y(B,F,N){return((v(F,N)*B+d(F,N))*B+g(F))*B}function p(B,F,N){return 3*v(F,N)*B*B+2*d(F,N)*B+g(F)}function O(B){for(var F=0,N=1,V=l-1;N!==V&&h[N]<=B;++N)F+=u;--N;var oe=F+(B-h[N])/(h[N+1]-h[N])*u,H=p(oe,t,r);return H>=.001?function m(B,F){for(var N=0;N<a;++N){var V=p(F,t,r);if(0===V)return F;F-=(y(F,t,r)-B)/V}return F}(B,oe):0===H?oe:function E(B,F,N){var V,z,oe=0;do{(V=y(z=F+(N-F)/2,t,r)-B)>0?N=z:F=z}while(Math.abs(V)>o&&++oe<s);return z}(B,F,F+u)}var L=!1;function w(){L=!0,(t!==e||r!==n)&&function b(){for(var B=0;B<l;++B)h[B]=y(B*u,t,r)}()}var I=function(F){return L||w(),t===e&&r===n?F:0===F?0:1===F?1:y(O(F),e,n)};I.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var D="generateBezier("+[t,e,r,n]+")";return I.toString=function(){return D},I}var id=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,.5*a,i),s=e(n,.5*a,o),l=e(n,a,s),f=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+s.dx)+l.dx)*a,n.v=n.v+f*a,n}return function n(a,i,o){var h,v,d,s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1e-4;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,v=(h=null!==o)?(u=n(a,i))/o*.016:.016;d=r(d||s,v),l.push(1+d.x),u+=16,Math.abs(d.x)>f&&Math.abs(d.v)>f;);return h?function(g){return l[g*(l.length-1)|0]}:u}}(),$t=function(e,r,n,a){var i=ad(e,r,n,a);return function(o,s,l){return o+(s-o)*i(l)}},Si={linear:function(e,r,n){return e+(r-e)*n},ease:$t(.25,.1,.25,1),"ease-in":$t(.42,0,1,1),"ease-out":$t(0,0,.58,1),"ease-in-out":$t(.42,0,.58,1),"ease-in-sine":$t(.47,0,.745,.715),"ease-out-sine":$t(.39,.575,.565,1),"ease-in-out-sine":$t(.445,.05,.55,.95),"ease-in-quad":$t(.55,.085,.68,.53),"ease-out-quad":$t(.25,.46,.45,.94),"ease-in-out-quad":$t(.455,.03,.515,.955),"ease-in-cubic":$t(.55,.055,.675,.19),"ease-out-cubic":$t(.215,.61,.355,1),"ease-in-out-cubic":$t(.645,.045,.355,1),"ease-in-quart":$t(.895,.03,.685,.22),"ease-out-quart":$t(.165,.84,.44,1),"ease-in-out-quart":$t(.77,0,.175,1),"ease-in-quint":$t(.755,.05,.855,.06),"ease-out-quint":$t(.23,1,.32,1),"ease-in-out-quint":$t(.86,0,.07,1),"ease-in-expo":$t(.95,.05,.795,.035),"ease-out-expo":$t(.19,1,.22,1),"ease-in-out-expo":$t(1,0,0,1),"ease-in-circ":$t(.6,.04,.98,.335),"ease-out-circ":$t(.075,.82,.165,1),"ease-in-out-circ":$t(.785,.135,.15,.86),spring:function(e,r,n){if(0===n)return Si.linear;var a=id(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":$t};function yu(t,e,r,n,a){if(1===n||e===r)return r;var i=a(e,r,n);return null==t||((t.roundValue||t.color)&&(i=Math.round(i)),void 0!==t.min&&(i=Math.max(i,t.min)),void 0!==t.max&&(i=Math.min(i,t.max))),i}function mu(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function aa(t,e,r,n,a){var i=null!=a?a.type:null;r<0?r=0:r>1&&(r=1);var o=mu(t,a),s=mu(e,a);if(x(o)&&x(s))return yu(i,o,s,r,n);if(pe(o)&&pe(s)){for(var l=[],u=0;u<s.length;u++){var f=o[u],c=s[u];if(null!=f&&null!=c){var h=yu(i,f,c,r,n);l.push(h)}else l.push(c)}return l}}function od(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,l=o.startTime,f=(n?t:t.cy()).style();if(!o.easingImpl)if(null==s)o.easingImpl=Si.linear;else{var c,v,d;c=Y(s)?f.parse("transition-timing-function",s).value:s,Y(c)?(v=c,d=[]):(v=c[1],d=c.slice(2).map(function(ve){return+ve})),d.length>0?("spring"===v&&d.push(o.duration),o.easingImpl=Si[v].apply(null,d)):o.easingImpl=Si[v]}var y,g=o.easingImpl;if(y=0===o.duration?1:(r-l)/o.duration,o.applying&&(y=o.progress),y<0?y=0:y>1&&(y=1),null==o.delay){var p=o.startPosition,m=o.position;if(m&&a&&!t.locked()){var b={};Fa(p.x,m.x)&&(b.x=aa(p.x,m.x,y,g)),Fa(p.y,m.y)&&(b.y=aa(p.y,m.y,y,g)),t.position(b)}var E=o.startPan,O=o.pan,L=i.pan,w=null!=O&&n;w&&(Fa(E.x,O.x)&&(L.x=aa(E.x,O.x,y,g)),Fa(E.y,O.y)&&(L.y=aa(E.y,O.y,y,g)),t.emit("pan"));var I=o.startZoom,D=o.zoom,B=null!=D&&n;B&&(Fa(I,D)&&(i.zoom=Da(i.minZoom,aa(I,D,y,g),i.maxZoom)),t.emit("zoom")),(w||B)&&t.emit("viewport");var F=o.style;if(F&&F.length>0&&a){for(var N=0;N<F.length;N++){var V=F[N],z=V.name,H=o.startStyle[z],ue=aa(H,V,y,g,f.properties[H.name]);f.overrideBypass(t,z,ue)}t.emit("style")}}return o.progress=y,y}function Fa(t,e){return!(null==t||null==e||!(x(t)&&x(e)||t&&e))}function sd(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function bu(t,e){var r=e._private.aniEles,n=[];function a(f,c){var h=f._private,v=h.animation.current,d=h.animation.queue,g=!1;if(0===v.length){var y=d.shift();y&&v.push(y)}for(var p=function(L){for(var w=L.length-1;w>=0;w--)(0,L[w])();L.splice(0,L.length)},m=v.length-1;m>=0;m--){var b=v[m],E=b._private;E.stopped?(v.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,p(E.frames)):!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||sd(0,b,t),od(f,b,t,c),E.applying&&(E.applying=!1),p(E.frames),null!=E.step&&E.step(t),b.completed()&&(v.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,p(E.completes)),g=!0)}return!c&&0===v.length&&0===d.length&&n.push(f),g}for(var i=!1,o=0;o<r.length;o++){var l=a(r[o]);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var ud={animate:Nt.animate(),animation:Nt.animation(),animated:Nt.animated(),clearQueue:Nt.clearQueue(),delay:Nt.delay(),delayAnimation:Nt.delayAnimation(),stop:Nt.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){bu(o,e)},n.beforeRenderPriorities.animations):function r(){e._private.animationsRunning&&ei(function(i){bu(i,e),r()})}()}}},ld={qualifierCompare:function(e,r){return null==e||null==r?null==e&&null==r:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return null==a||e!==n.target&&ge(n.target)&&a.matches(n.target)},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return null!=r.qualifier?n.target:e}},Li=function(e){return Y(e)?new dn(e):e},Eu={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Ei(ld,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Li(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Li(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Li(r),n),this},once:function(e,r,n){return this.emitter().one(e,Li(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Nt.eventAliasesOn(Eu);var wo={png:function(e){return this._private.renderer.png(e=e||{})},jpg:function(e){var r=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",r.jpg(e)}};wo.jpeg=wo.jpg;var Ai={layout:function(e){var r=this;if(null!=e)if(null!=e.name){var i,n=e.name,a=r.extension("layout",n);if(null!=a)return i=Y(e.eles)?r.$(e.eles):null!=e.eles?e.eles:r.$(),new a(rt({},e,{cy:r,eles:i}));Xt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Xt("A `name` must be specified to make a layout");else Xt("Layout options must be specified to make a layout")}};Ai.createLayout=Ai.makeLayout=Ai.layout;var fd={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=r&&a.merge(r)}else if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return void 0===e?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i];r.getElementById(i).data(o)}})}},cd=er({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),xo={renderTo:function(e,r,n,a){return this._private.renderer.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(null!=n){void 0!==e.wheelSensitivity&&Mt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=cd(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")}else Xt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};xo.invalidateDimensions=xo.resize;var Oi={collection:function(e,r){return Y(e)?this.$(e):J(e)?e.collection():pe(e)?(r||(r={}),new rr(this,e,r.unique,r.removed)):new rr(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Oi.elements=Oi.filter=Oi.$;var lr={};lr.apply=function(t){for(var e=this,a=e._private.cy.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0,e.updateStyleHints(o)&&a.push(o)}}return a},lr.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c="t"===e[l],h="t"===t[l]!==c,v=u.mappedProperties.length>0;if(h||c&&v){var d=void 0;h&&v||h?d=u.properties:v&&(d=u.mappedProperties);for(var g=0;g<d.length;g++){for(var y=d[g],p=y.name,m=!1,b=l+1;b<r.length&&("t"!==e[b]||!(m=null!=r[b].properties[y.name]));b++);!s[p]&&!m&&(s[p]=!0,o.push(p))}}}return n[a]=o,o},lr.getContextMeta=function(t){for(var n,e=this,r="",a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i];r+=o.selector&&o.selector.matches(t)?"t":"f"}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:0===n.length}},lr.getContextStyle=function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a},lr.applyContextStyle=function(t,e,r){for(var a=t.diffPropNames,i={},o=this.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=r.pstyle(l);if(!u){if(!f)continue;u=f.bypass?{name:l,deleteBypassed:!0}:{name:l,delete:!0}}if(f!==u){if(u.mapped===o.fn&&null!=f&&null!=f.mapping&&f.mapping.value===u.value){var c=f.mapping;if((c.fnValue=u.value(r))===c.prevFnValue)continue}var v=i[l]={prev:f};this.applyParsedProperty(r,u),v.next=r.pstyle(l),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}},lr.updateStyleHints=function(t){var n,e=t._private,r=this,a=r.propertyGroupKeys,i=function(Be,Ue,ft){return r.getPropertiesHash(Be,Ue,ft)},o=e.styleKey;if(t.removed())return!1;var Be,s="nodes"===e.group,l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++)e.styleKeys[a[u]]=[_n,Ea];for(var c=function(Be,Ue){return e.styleKeys[Ue][0]=wa(Be,e.styleKeys[Ue][0])},h=function(Be,Ue){return e.styleKeys[Ue][1]=xa(Be,e.styleKeys[Ue][1])},v=function(Be,Ue){c(Be,Ue),h(Be,Ue)},d=function(Be,Ue){for(var ft=0;ft<Be.length;ft++){var dt=Be.charCodeAt(ft);c(dt,Ue),h(dt,Ue)}},p=0;p<n.length;p++){var m=n[p],b=l[m];if(null!=b){var E=this.properties[m],O=E.type,L=E.groupKey,w=void 0;null!=E.hashOverride?w=E.hashOverride(t,b):null!=b.pfValue&&(w=b.pfValue);var I=null==E.enums?b.value:null,D=null!=w,N=b.units;!O.number||!D&&null==I||O.multiple?d(b.strValue,L):(v(-128<(Be=D?w:I)&&Be<128&&Math.floor(Be)!==Be?2e9-(1024*Be|0):Be,L),!D&&null!=N&&d(N,L))}}for(var z=[_n,Ea],oe=0;oe<a.length;oe++){var Q=e.styleKeys[a[oe]];z[0]=wa(Q[0],z[0]),z[1]=xa(Q[1],z[1])}e.styleKey=function(e,r){return 2097152*e+r}(z[0],z[1]);var ue=e.styleKeys;e.labelDimsKey=ln(ue.labelDimensions);var ve=i(t,["label"],ue.labelDimensions);if(e.labelKey=ln(ve),e.labelStyleKey=ln(ti(ue.commonLabel,ve)),!s){var me=i(t,["source-label"],ue.labelDimensions);e.sourceLabelKey=ln(me),e.sourceLabelStyleKey=ln(ti(ue.commonLabel,me));var ce=i(t,["target-label"],ue.labelDimensions);e.targetLabelKey=ln(ce),e.targetLabelStyleKey=ln(ti(ue.commonLabel,ce))}if(s){var ye=e.styleKeys,se=ye.pie,Le=[ye.nodeBody,ye.nodeBorder,ye.backgroundImage,ye.compound,se].filter(function(Ie){return null!=Ie}).reduce(ti,[_n,Ea]);e.nodeKey=ln(Le),e.hasPie=null!=se&&se[0]!==_n&&se[1]!==Ea}return o!==e.styleKey},lr.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},lr.applyParsedProperty=function(t,e){var i,r=this,n=e,a=t._private.style,o=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,c=t._private,h="mapping",v=function(Se){return null==Se?null:null!=Se.pfValue?Se.pfValue:Se.value},d=function(){var Se=v(u),Oe=v(n);r.checkTriggers(t,n.name,Se,Oe)};if(n&&"pie"===n.name.substr(0,3)&&Mt("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,d(),!0;if(n.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,d(),!0):(d(),!0);if(n.deleteBypass)return u?!!u.bypass&&(a[n.name]=u.bypassed,d(),!0):(d(),!0);var g=function(){Mt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:for(var y=n.field.split("."),p=c.data,m=0;m<y.length&&p;m++)p=p[y[m]];if(null==p)return g(),!1;var E;if(!x(p))return Mt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+p+"` for `"+t.id()+"` is non-numeric)"),!1;var O=n.fieldMax-n.fieldMin;if((E=0===O?0:(p-n.fieldMin)/O)<0?E=0:E>1&&(E=1),s.color){var L=n.valueMin[0],I=n.valueMin[1],D=n.valueMax[1],B=n.valueMin[2],F=n.valueMax[2],N=null==n.valueMin[3]?1:n.valueMin[3],V=null==n.valueMax[3]?1:n.valueMax[3],z=[Math.round(L+(n.valueMax[0]-L)*E),Math.round(I+(D-I)*E),Math.round(B+(F-B)*E),Math.round(N+(V-N)*E)];i={bypass:n.bypass,name:n.name,value:z,strValue:"rgb("+z[0]+", "+z[1]+", "+z[2]+")"}}else{if(!s.number)return!1;i=this.parse(n.name,n.valueMin+(n.valueMax-n.valueMin)*E,n.bypass,h)}if(!i)return g(),!1;i.mapping=n,n=i;break;case o.data:for(var H=n.field.split("."),Q=c.data,ue=0;ue<H.length&&Q;ue++)Q=Q[H[ue]];if(null!=Q&&(i=this.parse(n.name,Q,n.bypass,h)),!i)return g(),!1;i.mapping=n,n=i;break;case o.fn:var ce=null!=n.fnValue?n.fnValue:(0,n.value)(t);if(n.prevFnValue=ce,null==ce)return Mt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(i=this.parse(n.name,ce,n.bypass,h)))return Mt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Ur(n),n=i;break;case void 0:break;default:return!1}return l?(n.bypassed=f?u.bypassed:u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,d(),!0},lr.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),e)for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];null!=l&&(l.bypass?l.bypassed=null:a[s]=null)}else n._private.style={}}},lr.update=function(){this._private.cy.mutableElements().updateStyle()},lr.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],c=t.pstyle(f),h=e[f];if(h){var d=h.prev,g=null!=h.next?h.next:c,y=!1,p=void 0,m=1e-6;d&&(x(d.pfValue)&&x(g.pfValue)?p=d.pfValue+m*(y=g.pfValue-d.pfValue):x(d.value)&&x(g.value)?p=d.value+m*(y=g.value-d.value):pe(d.value)&&pe(g.value)&&(y=d.value[0]!==g.value[0]||d.value[1]!==g.value[1]||d.value[2]!==g.value[2],p=d.strValue),y&&(s[f]=g.strValue,this.applyBypass(t,f,p),l=!0))}}if(!l)return;n.transitioning=!0,new qn(function(b){o>0?t.delayAnimation(o).play().promise().then(b):b()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)},lr.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);null!=s&&s(r,n)&&i(o)},lr.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})},lr.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&("curve-style"===e&&("bezier"===r||"bezier"===n)||"display"===e&&("none"===r||"none"===n))&&t.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})},lr.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var Ga={applyBypass:function(t,e,r,n){var i=[];if("*"===e||"**"===e){if(void 0!==r)for(var s=0;s<this.properties.length;s++){var f=this.parse(this.properties[s].name,r,!0);f&&i.push(f)}}else if(Y(e)){var c=this.parse(e,r,!0);c&&i.push(c)}else{if(!fe(e))return!1;var h=e;n=r;for(var v=Object.keys(h),d=0;d<v.length;d++){var g=v[d],y=h[g];if(void 0===y&&(y=h[Kt(g)]),void 0!==y){var p=this.parse(g,y,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var m=!1,b=0;b<t.length;b++){for(var E=t[b],O={},L=void 0,w=0;w<i.length;w++){var I=i[w];if(n){var D=E.pstyle(I.name);L=O[I.name]={prev:D}}m=this.applyParsedProperty(E,Ur(I))||m,n&&(L.next=E.pstyle(I.name))}m&&this.updateStyleHints(E),n&&this.updateTransitions(E,O,true)}return m},overrideBypass:function(t,e,r){e=Tt(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?null!=i.pfValue?i.pfValue:i.value:null;i&&i.bypass?(i.value=r,null!=i.pfValue&&(i.pfValue=r),i.strValue=s?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(a)):this.applyBypass(a,e,r),this.checkTriggers(a,e,u,r)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,r){for(var a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=i.pstyle(u.name);if(f&&f.bypass){var h=this.parse(l,"",!0),v=o[u.name]={prev:f};this.applyParsedProperty(i,h),v.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,true)}}},To={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var r=this._private.cy.container();if(C&&r&&C.getComputedStyle)return C.getComputedStyle(r).getPropertyValue(t)}},Yr={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var r=this;if(t=t[0]){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);null!=o&&(n[i.name]=o,n[Kt(i.name)]=o)}return n}},getIndexedStyle:function(t,e,r,n){return t.pstyle(e)[r][n]??t.cy().style().getDefaultProperty(e)[r][0]},getStylePropertyValue:function(t,e,r){if(t=t[0]){var a=this.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&null!=s&&x(s)){var f=t.cy().zoom(),c=function(y){return y*f},h=function(y,p){return c(y)+p},v=pe(s);return(v?l.every(function(g){return null!=g}):null!=l)?v?s.map(function(g,y){return h(g,l[y])}).join(" "):h(s,l):v?s.map(function(g){return Y(g)?g:""+c(g)}).join(" "):""+c(s)}if(null!=u)return u}return null}},getAnimationStartStyle:function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n].name,o=t.pstyle(i);void 0!==o&&(o=fe(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(r[i]=o)}return r},getPropsList:function(t){var r=[],n=t,a=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[Tt(s)],f=this.parse(u.name,l);f&&r.push(f)}return r},getNonDefaultPropertiesHash:function(t,e,r){var i,o,s,l,u,n=r.slice();for(l=0;l<e.length;l++)if(null!=(i=t.pstyle(e[l],!1)))if(null!=i.pfValue)n[0]=wa(s,n[0]),n[1]=xa(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=wa(s,n[0]),n[1]=xa(s,n[1]);return n}};Yr.getPropertiesHash=Yr.getNonDefaultPropertiesHash;var Ii={appendFromJson:function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s];e.css(l,i[l])}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t}},Co={appendFromString:function(t){var a,i,o,r=this,n=""+t;function s(){n=n.length>a.length?n.substr(a.length):""}function l(){i=i.length>o.length?i.substr(o.length):""}for(n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");!n.match(/^\s*$/);){var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Mt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if("core"!==c&&new dn(c).invalid)Mt("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();else{var v=f[2],d=!1;i=v;for(var g=[];!i.match(/^\s*$/);){var p=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){Mt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),d=!0;break}o=p[0];var m=p[1],b=p[2];this.properties[m]?r.parse(m,b)?(g.push({name:m,val:b}),l()):(Mt("Skipping property: Invalid property definition in: "+o),l()):(Mt("Skipping property: Invalid property name in: "+o),l())}if(d){s();break}r.selector(c);for(var L=0;L<g.length;L++){var w=g[L];r.css(w.name,w.val)}s()}}return r},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},nr={};(function(){var t=kt,e=dr,r=_r,i=function(Le){return"^"+Le+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(Le){var Ie=t+"|\\w+|"+e+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Le+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+Ie+")\\s*\\,\\s*("+Ie+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];nr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Le,Ie){switch(Le.length){case 2:return"deg"!==Ie[0]&&"rad"!==Ie[0]&&"deg"!==Ie[1]&&"rad"!==Ie[1];case 1:return Y(Le[0])||"deg"===Ie[0]||"rad"===Ie[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Le){var Ie=Le.length;return 1===Ie||2===Ie||4===Ie}}};var l={zeroNonZero:function(Le,Ie){return(null==Le||null==Ie)&&Le!==Ie||0==Le&&0!=Ie||0!=Le&&0==Ie},any:function(Le,Ie){return Le!=Ie},emptyNonEmpty:function(Le,Ie){var Be=at(Le),Ue=at(Ie);return Be&&!Ue||!Be&&Ue}},u=nr.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],c=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],h=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],d=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],g=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],p=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],m=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],b=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],E=function(Le,Ie){return"label"===Ie.value?-Le.poolIndex():Ie.pfValue},O=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],L=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],w=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],I=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],D=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],B=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],F=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],N=[];nr.pieBackgroundN=16,N.push({name:"pie-size",type:u.sizeMaybePercent});for(var V=1;V<=nr.pieBackgroundN;V++)N.push({name:"pie-"+V+"-background-color",type:u.color}),N.push({name:"pie-"+V+"-background-size",type:u.percent}),N.push({name:"pie-"+V+"-background-opacity",type:u.zeroOneNumber});var z=[],oe=nr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach(function(se){oe.forEach(function(Le){z.push({name:Le+"-"+se.name,type:se.type,triggersBounds:se.triggersBounds})})},{});var H=nr.properties=[].concat(g,b,y,p,m,B,d,v,f,c,h,O,L,w,N,I,D,z,F),Q=nr.propertyGroups={behavior:g,transition:b,visibility:y,overlay:p,underlay:m,ghost:B,commonLabel:d,labelDimensions:v,mainLabel:f,sourceLabel:c,targetLabel:h,nodeBody:O,nodeBorder:L,backgroundImage:w,pie:N,compound:I,edgeLine:D,edgeArrow:z,core:F},ue=nr.propertyGroupNames={};(nr.propertyGroupKeys=Object.keys(Q)).forEach(function(se){ue[se]=Q[se].map(function(Le){return Le.name}),Q[se].forEach(function(Le){return Le.groupKey=se})});var me=nr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];nr.propertyNames=H.map(function(se){return se.name});for(var ce=0;ce<H.length;ce++){var ye=H[ce];H[ye.name]=ye}for(var Se=0;Se<me.length;Se++){var Oe=me[Se],we={name:Oe.name,alias:!0,pointsTo:H[Oe.pointsTo]};H.push(we),H[Oe.name]=we}})(),nr.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},nr.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=rt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=nr.pieBackgroundN;f++)l[u.name.replace("{{i}}",f)]=u.value;return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(l,u){return nr.arrowPrefixes.forEach(function(f){l[f+"-"+u.name]=u.value}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=this.parse(i,e[i]);r[i]=s}}return t.defaultProperties=r,t.defaultProperties},nr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Mi={parse:function(t,e,r,n){var a=this;if(te(e))return a.parseImplWarn(t,e,r,n);var f,l=$o(t,""+e,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),u=a.propCache=a.propCache||[];return(f=u[l])||(f=u[l]=a.parseImplWarn(t,e,r,n)),(r||"mapping"===n)&&(f=Ur(f))&&(f.value=Ur(f.value)),f},parseImplWarn:function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&null!=e&&Mt("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&("width"===a.name||"height"===a.name)&&"label"===e&&Mt("The style value of `label` is deprecated for `"+a.name+"`"),a},parseImpl:function(t,e,r,n){var a=this;t=Tt(t);var i=a.properties[t],o=e,s=a.types;if(!i||void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var l=Y(e);l&&(e=e.trim());var f,c,u=i.type;if(!u)return null;if(r&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(te(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};if(!(!l||n||e.length<7||"a"!==e[1])){if(e.length>=7&&"d"===e[0]&&(f=new RegExp(s.data.regex).exec(e)))return!r&&{name:t,value:f,strValue:""+e,mapped:s.data,field:f[1],bypass:r};if(e.length>=10&&"m"===e[0]&&(c=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var v=s.mapData;if(!u.color&&!u.number)return!1;var d=this.parse(t,c[4]);if(!d||d.mapped)return!1;var g=this.parse(t,c[5]);if(!g||g.mapped)return!1;if(d.pfValue===g.pfValue||d.strValue===g.strValue)return Mt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(u.color){var y=d.value,p=g.value;if(!(y[0]!==p[0]||y[1]!==p[1]||y[2]!==p[2]||y[3]!==p[3]&&(null!=y[3]&&1!==y[3]||null!=p[3]&&1!==p[3])))return!1}return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:d.value,valueMax:g.value,bypass:r}}}if(u.multiple&&"multiple"!==n){var b;if(b=l?e.split(/\s+/):pe(e)?e:[e],u.evenMultiple&&b.length%2!=0)return null;for(var E=[],O=[],L=[],w="",I=!1,D=0;D<b.length;D++){var B=a.parse(t,b[D],r,"multiple");I=I||Y(B.value),E.push(B.value),L.push(null!=B.pfValue?B.pfValue:B.value),O.push(B.units),w+=(D>0?" ":"")+B.strValue}return u.validate&&!u.validate(E,O)?null:u.singleEnum&&I?1===E.length&&Y(E[0])?{name:t,value:E[0],strValue:E[0],bypass:r}:null:{name:t,value:E,pfValue:L,strValue:w,bypass:r,units:O}}var F=function(){for(var Ie=0;Ie<u.enums.length;Ie++)if(u.enums[Ie]===e)return{name:t,value:e,strValue:""+e,bypass:r};return null};if(u.number){var N,V="px";if(u.units&&(N=u.units),u.implicitUnits&&(V=u.implicitUnits),!u.unitless)if(l){var z="px|em"+(u.allowPercent?"|\\%":"");N&&(z=N);var oe=e.match("^("+kt+")("+z+")?$");oe&&(e=oe[1],N=oe[2]||V)}else(!N||u.implicitUnits)&&(N=V);if(e=parseFloat(e),isNaN(e)&&void 0===u.enums)return null;if(isNaN(e)&&void 0!==u.enums)return e=o,F();if(u.integer&&!function(e){return x(e)&&Math.floor(e)===e}(e)||void 0!==u.min&&(e<u.min||u.strictMin&&e===u.min)||void 0!==u.max&&(e>u.max||u.strictMax&&e===u.max))return null;var H={name:t,value:e,strValue:""+e+(N||""),units:N,bypass:r};return H.pfValue=u.unitless||"px"!==N&&"em"!==N?e:"px"!==N&&N?this.getEmSizeInPixels()*e:e,("ms"===N||"s"===N)&&(H.pfValue="ms"===N?e:1e3*e),("deg"===N||"rad"===N)&&(H.pfValue="rad"===N?e:function(e){return Math.PI*e/180}(e)),"%"===N&&(H.pfValue=e/100),H}if(u.propList){var Q=[],ue=""+e;if("none"!==ue){for(var ve=ue.split(/\s*,\s*|\s+/),me=0;me<ve.length;me++){var ce=ve[me].trim();a.properties[ce]?Q.push(ce):Mt("`"+ce+"` is not a valid property name")}if(0===Q.length)return null}return{name:t,value:Q,strValue:0===Q.length?"none":Q.join(" "),bypass:r}}if(u.color){var ye=ne(e);return ye?{name:t,value:ye,pfValue:ye,strValue:"rgb("+ye[0]+","+ye[1]+","+ye[2]+")",bypass:r}:null}if(u.regex||u.regexes){if(u.enums){var Se=F();if(Se)return Se}for(var Oe=u.regexes?u.regexes:[u.regex],Ce=0;Ce<Oe.length;Ce++){var se=new RegExp(Oe[Ce]).exec(e);if(se)return{name:t,value:u.singleRegexMatchValue?se[1]:se,strValue:""+e,bypass:r}}return null}return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?F():null}},fr=function t(e){if(!(this instanceof t))return new t(e);Fe(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):Xt("A style must have a core reference")},cr=fr.prototype;cr.instanceString=function(){return"style"},cr.clear=function(){for(var t=this._private,r=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this},cr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},cr.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},cr.selector=function(t){var e="core"===t?null:new dn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this},cr.css=function(){var e=arguments;if(1===e.length)for(var r=e[0],n=0;n<this.properties.length;n++){var a=this.properties[n],i=r[a.name];void 0===i&&(i=r[Kt(a.name)]),void 0!==i&&this.cssRule(a.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},cr.style=cr.css,cr.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},cr.append=function(t){return _e(t)?t.appendToStyle(this):pe(t)?this.appendFromJson(t):Y(t)&&this.appendFromString(t),this},fr.fromJson=function(t,e){var r=new fr(t);return r.fromJson(e),r},fr.fromString=function(t,e){return new fr(t).fromString(e)},[lr,Ga,To,Yr,Ii,Co,nr,Mi].forEach(function(t){rt(cr,t)}),fr.types=cr.types,fr.properties=cr.properties,fr.propertyGroups=cr.propertyGroups,fr.propertyGroupNames=cr.propertyGroupNames,fr.propertyGroupKeys=cr.propertyGroupKeys;var vd={style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var r=this._private;return r.style=_e(e)?e.generateStyle(this):pe(e)?fr.fromJson(this,e):Y(e)?fr.fromString(this,e):fr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},In={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var r=this._private;return null==r.selectionType&&(r.selectionType="single"),void 0===e?r.selectionType:(("additive"===e||"single"===e)&&(r.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var n,a,i,o,s,e=arguments,r=this._private.pan;switch(e.length){case 0:return r;case 1:if(Y(e[0]))return r[n=e[0]];if(fe(e[0])){if(!this._private.panningEnabled)return this;s=(i=e[0]).y,x(o=i.x)&&(r.x=o),x(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=e[1],("x"===(n=e[0])||"y"===n)&&x(a)&&(r[n]=a),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,r){var i,o,s,l,u,n=arguments,a=this._private.pan;if(!this._private.panningEnabled)return this;switch(n.length){case 1:fe(e)&&(u=(s=n[0]).y,x(l=s.x)&&(a.x+=l),x(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:o=r,("x"===(i=e)||"y"===i)&&x(o)&&(a[i]+=o),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){var n;if(x(e)&&void 0===r&&(r=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(Y(e)?e=this.$(e):function(e){return fe(e)&&x(e.x1)&&x(e.x2)&&x(e.y1)&&x(e.y2)}(e)?((n={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):J(e)||(e=this.mutableElements()),!J(e)||!e.empty())){n=n||e.boundingBox();var l,o=this.width(),s=this.height();if(r=x(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:l=(l=(l=Math.min((o-2*r)/n.w,(s-2*r)/n.h))>this._private.maxZoom?this._private.maxZoom:l)<this._private.minZoom?this._private.minZoom:l,pan:{x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2}}}},zoomRange:function(e,r){var n=this._private;if(null==r){var a=e;e=a.min,r=a.max}return x(e)&&x(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):x(e)&&void 0===r&&e<=n.maxZoom?n.minZoom=e:x(r)&&void 0===e&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var i,o,r=this._private,n=r.pan,a=r.zoom,s=!1;return r.zoomingEnabled||(s=!0),x(e)?o=e:fe(e)&&(o=e.level,null!=e.position?i=ai(e.position,a,n):null!=e.renderedPosition&&(i=e.renderedPosition),null!=i&&!r.panningEnabled&&(s=!0)),o=(o=o>r.maxZoom?r.maxZoom:o)<r.minZoom?r.minZoom:o,!s&&x(o)&&o!==a&&(null==i||x(i.x)&&x(i.y))?null!=i?{zoomed:!0,panned:!0,zoom:o,pan:{x:-o/a*(i.x-n.x)+i.x,y:-o/a*(i.y-n.y)+i.y}}:{zoomed:!0,panned:!1,zoom:o,pan:n}:null},zoom:function(e){if(void 0===e)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return null!=r&&r.zoomed?(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(x(e.zoom)||(n=!1),fe(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;x(u.x)&&(r.pan.x=u.x,s=!1),x(u.y)&&(r.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Y(e)){var n=e;e=this.mutableElements().filter(n)}else J(e)||(e=this.mutableElements());if(0!==e.length){var a=e.boundingBox(),i=this.width(),o=this.height();return{x:(i-(r=void 0===r?this._private.zoom:r)*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var n,a,e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?(n=C.getComputedStyle(r),{width:r.clientWidth-(a=function(o){return parseFloat(n.getPropertyValue(o))})("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};In.centre=In.center,In.autolockNodes=In.autolock,In.autoungrabifyNodes=In.autoungrabify;var _a={data:Nt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Nt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Nt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Nt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};_a.attr=_a.data,_a.removeAttr=_a.removeData;var $a=function(e){var r=this,n=(e=rt({},e)).container;n&&!X(n)&&X(n[0])&&(n=n[0]);var a=n?n._cyreg:null;(a=a||{})&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=void 0!==C&&void 0!==n&&!e.headless,s=e;s.layout=rt({name:o?"grid":"null"},s.layout),s.renderer=rt({name:o?"canvas":"null"},s.renderer);var l=function(d,g,y){return void 0!==g?g:void 0!==y?y:d},u=this._private={container:n,ready:!1,options:s,elements:new rr(this),listeners:[],aniEles:new rr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?o:s.styleEnabled,zoom:x(s.zoom)?s.zoom:1,pan:{x:fe(s.pan)&&x(s.pan.x)?s.pan.x:0,y:fe(s.pan)&&x(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});u.styleEnabled&&r.setStyle([]);var c=rt({},s,s.renderer);r.initRenderer(c);!function(d,g){if(d.some(We))return qn.all(d).then(g);g(d)}([s.style,s.elements],function(v){var d=v[0],g=v[1];u.styleEnabled&&r.style().append(d),function(d,g,y){r.notifications(!1);var p=r.mutableElements();p.length>0&&p.remove(),null!=d&&(fe(d)||pe(d))&&r.add(d),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",g),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",y),r.emit("done")});var m=rt({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()}(g,function(){r.startAnimationLoop(),u.ready=!0,te(s.ready)&&r.on("ready",s.ready);for(var y=0;y<i.length;y++)r.on("ready",i[y]);a&&(a.readies=[]),r.emit("ready")},s.done)})},Ni=$a.prototype;rt(Ni,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var r=this,n=r._private,a=n.options;return!X(e)&&X(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(rt({},a,a.renderer,{name:"null"===a.renderer.name?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ur(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements();if(fe(e)){if(r.startBatch(),e.elements){var o={},s=function(E,O){for(var L=[],w=[],I=0;I<E.length;I++){var D=E[I];if(D.data.id){var B=""+D.data.id,F=r.getElementById(B);o[B]=!0,0!==F.length?w.push({ele:F,json:D}):(O&&(D.group=O),L.push(D))}else Mt("cy.json() cannot handle elements without an ID attribute")}r.add(L);for(var N=0;N<w.length;N++){var V=w[N];V.ele.json(V.json)}};if(pe(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],c=e.elements[f];pe(c)&&s(c,f)}var h=r.collection();a.filter(function(b){return!o[b.id()]}).forEach(function(b){b.isParent()?h.merge(b):b.remove()}),h.forEach(function(b){return b.children().move({parent:null})}),h.forEach(function(b){return(E=b,r.getElementById(E.id())).remove();var E})}e.style&&r.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<v.length;d++){var g=v[d];null!=e[g]&&r[g](e[g])}return r.endBatch(),this}var p={};e?p.elements=this.elements().map(function(b){return b.json()}):(p.elements={},a.forEach(function(b){var E=b.group();p.elements[E]||(p.elements[E]=[]),p.elements[E].push(b.json())})),this._private.styleEnabled&&(p.style=r.style().json()),p.data=Ur(r.data());var m=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=Ur(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=Ur(m.renderer),p.hideEdgesOnViewport=m.hideEdgesOnViewport,p.textureOnViewport=m.textureOnViewport,p.wheelSensitivity=m.wheelSensitivity,p.motionBlur=m.motionBlur,p.multiClickDebounceTime=m.multiClickDebounceTime,p}}),Ni.$id=Ni.getElementById,[nd,ud,Eu,wo,Ai,fd,xo,Oi,vd,In,_a].forEach(function(t){rt(Ni,t)});var gd={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},ia=function(e){return e.scratch("breadthfirst")},wu=function(e,r){return e.scratch("breadthfirst",r)};function xu(t){this.options=rt({},gd,t)}xu.prototype.run=function(){var u,t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(Ve){return!Ve.isParent()}),i=n,o=e.directed,s=e.maximal||e.maximalAdjustments>0,l=br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(J(e.roots))u=e.roots;else if(pe(e.roots)){for(var f=[],c=0;c<e.roots.length;c++){var v=r.getElementById(e.roots[c]);f.push(v)}u=r.collection(f)}else if(Y(e.roots))u=r.$(e.roots);else if(o)u=a.roots();else{var d=n.components();u=r.collection();for(var g=function($e){var nt=d[$e],Qe=nt.maxDegree(!1),Ye=nt.filter(function(et){return et.degree(!1)===Qe});u=u.add(Ye)},y=0;y<d.length;y++)g(y)}var p=[],m={},b=function($e,nt){null==p[nt]&&(p[nt]=[]);var Qe=p[nt].length;p[nt].push($e),wu($e,{index:Qe,depth:nt})};i.bfs({roots:u,directed:e.directed,visit:function($e,nt,Qe,Ye,et){var xt=$e[0],pt=xt.id();b(xt,et),m[pt]=!0}});for(var O=[],L=0;L<a.length;L++){var w=a[L];m[w.id()]||O.push(w)}var I=function($e){for(var nt=p[$e],Qe=0;Qe<nt.length;Qe++){var Ye=nt[Qe];null!=Ye?wu(Ye,{depth:$e,index:Qe}):(nt.splice(Qe,1),Qe--)}},D=function(){for(var $e=0;$e<p.length;$e++)I($e)},B=function($e,nt){for(var Qe=ia($e),Ye=$e.incomers().filter(function(A){return A.isNode()&&n.has(A)}),et=-1,xt=$e.id(),pt=0;pt<Ye.length;pt++){var Re=ia(Ye[pt]);et=Math.max(et,Re.depth)}return Qe.depth<=et&&(nt[xt]?null:(function($e,nt){var Qe=ia($e);p[Qe.depth][Qe.index]=null,b($e,nt)}($e,et+1),nt[xt]=!0,!0))};if(o&&s){var F=[],N={},V=function($e){return F.push($e)};for(a.forEach(function(Ve){return F.push(Ve)});F.length>0;){var oe=F.shift(),H=B(oe,N);if(H)oe.outgoers().filter(function(Ve){return Ve.isNode()&&n.has(Ve)}).forEach(V);else if(null===H){Mt("Detected double maximal shift for node `"+oe.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}D();var Q=0;if(e.avoidOverlap)for(var ue=0;ue<a.length;ue++){var me=a[ue].layoutDimensions(e);Q=Math.max(Q,me.w,me.h)}var Se={},Oe=function($e){if(Se[$e.id()])return Se[$e.id()];for(var nt=ia($e).depth,Qe=$e.neighborhood(),Ye=0,et=0,xt=0;xt<Qe.length;xt++){var pt=Qe[xt];if(!pt.isEdge()&&!pt.isParent()&&a.has(pt)){var ut=ia(pt);if(null!=ut){var Re=ut.index,A=ut.depth;null!=Re&&null!=A&&A<nt&&(Ye+=Re/p[A].length,et++)}}}return Ye/=et=Math.max(1,et),0===et&&(Ye=0),Se[$e.id()]=Ye,Ye},Ce=function($e,nt){var et=Oe($e)-Oe(nt);return 0===et?on($e.id(),nt.id()):et};void 0!==e.depthSort&&(Ce=e.depthSort);for(var we=0;we<p.length;we++)p[we].sort(Ce),I(we);for(var se=[],Le=0;Le<O.length;Le++)se.push(O[Le]);p.unshift(se),D();for(var Ie=0,Be=0;Be<p.length;Be++)Ie=Math.max(p[Be].length,Ie);var Ue_x=l.x1+l.w/2,Ue_y=l.x1+l.h/2,ft=p.reduce(function(Ve,$e){return Math.max(Ve,$e.length)},0);return n.nodes().layoutPositions(this,e,function($e){var nt=ia($e),Qe=nt.depth,Ye=nt.index,et=p[Qe].length,xt=Math.max(l.w/((e.grid?ft:et)+1),Q),pt=Math.max(l.h/(p.length+1),Q),ut=Math.min(l.w/2/p.length,l.h/2/p.length);if(ut=Math.max(ut,Q),e.circle){var A=ut*Qe+ut-(p.length>0&&p[0].length<=3?ut/2:0),de=2*Math.PI/p[Qe].length*Ye;return 0===Qe&&1===p[0].length&&(A=1),{x:Ue_x+A*Math.cos(de),y:Ue_y+A*Math.sin(de)}}return{x:Ue_x+(Ye+1-(et+1)/2)*xt,y:(Qe+1)*pt}}),this};var pd={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Tu(t){this.options=rt({},pd,t)}Tu.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var f,o=br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=(void 0===e.sweep?2*Math.PI-2*Math.PI/i.length:e.sweep)/Math.max(1,i.length-1),c=0,h=0;h<i.length;h++){var d=i[h].layoutDimensions(e);c=Math.max(c,d.w,d.h)}if(f=x(e.radius)?e.radius:i.length<=1?0:Math.min(o.h,o.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var p=Math.cos(u)-Math.cos(0),m=Math.sin(u)-Math.sin(0),b=Math.sqrt(c*c/(p*p+m*m));f=Math.max(b,f)}return n.nodes().layoutPositions(this,e,function(L,w){var I=e.startAngle+w*u*(a?1:-1),D=f*Math.cos(I),B=f*Math.sin(I);return{x:s.x+D,y:s.y+B}}),this};var yd={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Cu(t){this.options=rt({},yd,t)}Cu.prototype.run=function(){for(var t=this.options,e=t,r=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,f=0;f<i.length;f++){var h,c=i[f];h=e.concentric(c),l.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var v=0;v<i.length;v++){var g=i[v].layoutDimensions(e);u=Math.max(u,g.w,g.h)}l.sort(function(Ve,$e){return $e.value-Ve.value});for(var y=e.levelWidth(i),p=[[]],m=p[0],b=0;b<l.length;b++){var E=l[b];m.length>0&&Math.abs(m[0].value-E.value)>=y&&p.push(m=[]),m.push(E)}var L=u+e.minNodeSpacing;if(!e.avoidOverlap){var w=p.length>0&&p[0].length>1,I=Math.min(o.w,o.h)/2-L;L=Math.min(L,I/(p.length+w?1:0))}for(var B=0,F=0;F<p.length;F++){var N=p[F],V=void 0===e.sweep?2*Math.PI-2*Math.PI/N.length:e.sweep,z=N.dTheta=V/Math.max(1,N.length-1);if(N.length>1&&e.avoidOverlap){var oe=Math.cos(z)-Math.cos(0),H=Math.sin(z)-Math.sin(0),Q=Math.sqrt(L*L/(oe*oe+H*H));B=Math.max(Q,B)}N.r=B,B+=L}if(e.equidistant){for(var ue=0,ve=0,me=0;me<p.length;me++)ue=Math.max(ue,p[me].r-ve);ve=0;for(var Se=0;Se<p.length;Se++){var Oe=p[Se];0===Se&&(ve=Oe.r),Oe.r=ve,ve+=ue}}for(var Ce={},we=0;we<p.length;we++)for(var se=p[we],Le=se.dTheta,Ie=se.r,Be=0;Be<se.length;Be++){var Ue=se[Be],ft=e.startAngle+(r?1:-1)*Le*Be,dt={x:s.x+Ie*Math.cos(ft),y:s.y+Ie*Math.sin(ft)};Ce[Ue.node.id()]=dt}return a.nodes().layoutPositions(this,e,function(Ve){var $e=Ve.id();return Ce[$e]}),this};var Do,md={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ri(t){this.options=rt({},md,t),this.options.layout=this}Ri.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(!0===t.animate||!1===t.animate)&&r.emit({type:"layoutstart",layout:r}),Do=!0===t.debug;var n=bd(e,r,t);Do&&undefined(n),t.randomize&&Td(n);var a=Jr(),i=function(){Cd(n,e,t),!0===t.fit&&e.fit(t.padding)},o=function(h){return!(r.stopped||h>=t.numIter||(Dd(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),v=Du(n,t,h);h.layoutPositions(r,t,v)}},l=0,u=!0;if(!0===t.animate)!function c(){for(var h=0;u&&h<t.refresh;)u=o(l),l++,h++;u?(Jr()-a>=t.animationThreshold&&i(),ei(c)):(Lu(n,t),s())}();else{for(;u;)u=o(l),l++;Lu(n,t),s()}return this},Ri.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Ri.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var bd=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:br(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var f=s[u],c=0;c<f.length;c++)l[f[c].id()]=u;for(u=0;u<o.nodeSize;u++){var d=(v=i[u]).layoutDimensions(n);(g={}).isLocked=v.locked(),g.id=v.data("id"),g.parentId=v.data("parent"),g.cmptId=l[v.id()],g.children=[],g.positionX=v.position("x"),g.positionY=v.position("y"),g.offsetX=0,g.offsetY=0,g.height=d.w,g.width=d.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(v.style("padding")),g.padRight=parseFloat(v.style("padding")),g.padTop=parseFloat(v.style("padding")),g.padBottom=parseFloat(v.style("padding")),g.nodeRepulsion=te(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=u}var y=[],p=0,m=-1,b=[];for(u=0;u<o.nodeSize;u++){var v,E=(v=o.layoutNodes[u]).parentId;null!=E?o.layoutNodes[o.idToIndex[E]].children.push(v.id):(y[++m]=v.id,b.push(v.id))}for(o.graphSet.push(b);p<=m;){var O=y[p++],w=o.layoutNodes[o.idToIndex[O]].children;if(w.length>0)for(o.graphSet.push(w),u=0;u<w.length;u++)y[++m]=w[u]}for(u=0;u<o.graphSet.length;u++){var I=o.graphSet[u];for(c=0;c<I.length;c++)o.indexToGraph[o.idToIndex[I[c]]]=u}for(u=0;u<o.edgeSize;u++){var B=a[u],F={};F.id=B.data("id"),F.sourceId=B.data("source"),F.targetId=B.data("target");var N=te(n.idealEdgeLength)?n.idealEdgeLength(B):n.idealEdgeLength,V=te(n.edgeElasticity)?n.edgeElasticity(B):n.edgeElasticity,z=o.idToIndex[F.sourceId],oe=o.idToIndex[F.targetId];if(o.indexToGraph[z]!=o.indexToGraph[oe]){for(var ue=Ed(F.sourceId,F.targetId,o),ve=o.graphSet[ue],me=0,g=o.layoutNodes[z];-1===ve.indexOf(g.id);)g=o.layoutNodes[o.idToIndex[g.parentId]],me++;for(g=o.layoutNodes[oe];-1===ve.indexOf(g.id);)g=o.layoutNodes[o.idToIndex[g.parentId]],me++;N*=me*n.nestingFactor}F.idealLength=N,F.elasticity=V,o.layoutEdges.push(F)}return o},Ed=function(e,r,n){var a=wd(e,r,0,n);return 2>a.count?0:a.graph},wd=function t(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var f=a.layoutNodes[a.idToIndex[i[s]]].children;if(0!==f.length){var h=t(e,r,a.indexToGraph[a.idToIndex[f[0]]],a);if(0!==h.count){if(1!==h.count)return h;if(2==++o)break}}}return{count:o,graph:n}},Td=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0===o.children.length&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},Du=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];return r.boundingBox?{x:a.x1+(l.positionX-i.x1)/i.w*a.w,y:a.y1+(l.positionY-i.y1)/i.h*a.h}:{x:l.positionX,y:l.positionY}}},Cd=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=Du(e,n,i);i.positions(o),!0!==e.ready&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},Dd=function(e,r,n){Sd(e,r),Od(e),Id(e,r),Md(e),Nd(e)},Sd=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++)Ld(s,e.layoutNodes[e.idToIndex[a[l]]],e,r)},Su=function(e){return-e+2*e*Math.random()},Ld=function(e,r,n,a){if(e.cmptId===r.cmptId||n.isCompound){var s=r.positionX-e.positionX,l=r.positionY-e.positionY;0===s&&0===l&&(s=Su(1),l=Su(1));var f=Ad(e,r,s,l);if(f>0)var v=(c=a.nodeOverlap*f)*s/(h=Math.sqrt(s*s+l*l)),d=c*l/h;else{var c,g=ki(e,s,l),y=ki(r,-1*s,-1*l),p=y.x-g.x,m=y.y-g.y,b=p*p+m*m,h=Math.sqrt(b);v=(c=(e.nodeRepulsion+r.nodeRepulsion)/b)*p/h,d=c*m/h}e.isLocked||(e.offsetX-=v,e.offsetY-=d),r.isLocked||(r.offsetX+=v,r.offsetY+=d)}},Ad=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ki=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/r,u=o/s,f={};return 0===r&&0<n||0===r&&0>n?(f.x=a,f.y=i+o/2,f):0<r&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=i+s*n/2/r,f):0>r&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=i-s*n/2/r,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+o*r/2/n,f.y=i+o/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-o*r/2/n,f.y=i-o/2),f)},Od=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],o=e.layoutNodes[e.idToIndex[a.sourceId]],l=e.layoutNodes[e.idToIndex[a.targetId]],u=l.positionX-o.positionX,f=l.positionY-o.positionY;if(0!==u||0!==f){var c=ki(o,u,f),h=ki(l,-1*u,-1*f),v=h.x-c.x,d=h.y-c.y,g=Math.sqrt(v*v+d*d),y=Math.pow(a.idealLength-g,2)/a.elasticity;if(0!==g)var p=y*v/g,m=y*d/g;else p=0,m=0;o.isLocked||(o.offsetX+=p,o.offsetY+=m),l.isLocked||(l.offsetX-=p,l.offsetY-=m)}}},Id=function(e,r){if(0!==r.gravity)for(var a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(0===a)var s=e.clientHeight/2,l=e.clientWidth/2;else{var f=e.layoutNodes[e.idToIndex[e.layoutNodes[e.idToIndex[i[0]]].parentId]];s=f.positionX,l=f.positionY}for(var c=0;c<o;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var v=s-h.positionX,d=l-h.positionY,g=Math.sqrt(v*v+d*d);if(g>1){var p=r.gravity*d/g;h.offsetX+=r.gravity*v/g,h.offsetY+=p}}}}},Md=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],l=e.layoutNodes[e.idToIndex[o]],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,c=l.offsetY,h=0;h<u.length;h++){var v=e.layoutNodes[e.idToIndex[u[h]]];v.offsetX+=f,v.offsetY+=c,n[++i]=u[h]}l.offsetX=0,l.offsetY=0}}},Nd=function(e,r){for(var n=0;n<e.nodeSize;n++)0<(a=e.layoutNodes[n]).children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0);for(n=0;n<e.nodeSize;n++)if(!(0<(a=e.layoutNodes[n]).children.length||a.isLocked)){var i=Rd(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,kd(a,e)}for(n=0;n<e.nodeSize;n++){var a;0<(a=e.layoutNodes[n]).children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Rd=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else i={x:e,y:r};return i},kd=function t(e,r){var n=e.parentId;if(null!=n){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((null==a.maxX||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(null==a.minX||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(null==a.maxY||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(null==a.minY||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return t(a,r)}},Lu=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId;(a[s]=a[s]||[]).push(o)}var u=0;for(i=0;i<a.length;i++)if(f=a[i]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var h=f[c];f.x1=Math.min(f.x1,h.positionX-h.width/2),f.x2=Math.max(f.x2,h.positionX+h.width/2),f.y1=Math.min(f.y1,h.positionY-h.height/2),f.y2=Math.max(f.y2,h.positionY+h.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}a.sort(function(m,b){return b.w*b.h-m.w*m.h});var v=0,d=0,g=0,y=0,p=Math.sqrt(u)*e.clientWidth/e.clientHeight;for(i=0;i<a.length;i++){var f;if(f=a[i]){for(c=0;c<f.length;c++)(h=f[c]).isLocked||(h.positionX+=v-f.x1,h.positionY+=d-f.y1);v+=f.w+r.componentSpacing,g+=f.w+r.componentSpacing,y=Math.max(y,f.h),g>p&&(d+=y+r.componentSpacing,v=0,g=0,y=0)}}},Pd={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Au(t){this.options=rt({},Pd,t)}Au.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=br(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===i.h||0===i.w)n.nodes().layoutPositions(this,e,function(Se){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),f=function(Oe){if(null==Oe)return Math.min(l,u);Math.min(l,u)==l?l=Oe:u=Oe},c=function(Oe){if(null==Oe)return Math.max(l,u);Math.max(l,u)==l?l=Oe:u=Oe},h=e.rows,v=null!=e.cols?e.cols:e.columns;if(null!=h&&null!=v)l=h,u=v;else if(null!=h&&null==v)l=h,u=Math.ceil(o/l);else if(null==h&&null!=v)u=v,l=Math.ceil(o/u);else if(u*l>o){var d=f(),g=c();(d-1)*g>=o?f(d-1):(g-1)*d>=o&&c(g-1)}else for(;u*l<o;){var y=f(),p=c();(p+1)*y>=o?c(p+1):f(y+1)}var m=i.w/u,b=i.h/l;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var E=0;E<a.length;E++){var O=a[E],L=O._private.position;(null==L.x||null==L.y)&&(L.x=0,L.y=0);var w=O.layoutDimensions(e),I=e.avoidOverlapPadding,B=w.h+I;m=Math.max(m,w.w+I),b=Math.max(b,B)}for(var F={},N=function(Oe,Ce){return!!F["c-"+Oe+"-"+Ce]},V=function(Oe,Ce){F["c-"+Oe+"-"+Ce]=!0},z=0,oe=0,H=function(){++oe>=u&&(oe=0,z++)},Q={},ue=0;ue<a.length;ue++){var ve=a[ue],me=e.position(ve);if(me&&(void 0!==me.row||void 0!==me.col)){var ce={row:me.row,col:me.col};if(void 0===ce.col)for(ce.col=0;N(ce.row,ce.col);)ce.col++;else if(void 0===ce.row)for(ce.row=0;N(ce.row,ce.col);)ce.row++;Q[ve.id()]=ce,V(ce.row,ce.col)}}a.layoutPositions(this,e,function(Oe,Ce){var we,se;if(Oe.locked()||Oe.isParent())return!1;var Le=Q[Oe.id()];if(Le)we=Le.col*m+m/2+i.x1,se=Le.row*b+b/2+i.y1;else{for(;N(z,oe);)H();we=oe*m+m/2+i.x1,se=z*b+b/2+i.y1,V(z,oe),H()}return{x:we,y:se}})}return this};var Bd={ready:function(){},stop:function(){}};function So(t){this.options=rt({},Bd,t)}So.prototype.run=function(){var t=this.options,e=t.eles,r=this;return r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this},So.prototype.stop=function(){return this};var Fd={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Ou(t){this.options=rt({},Fd,t)}Ou.prototype.run=function(){var t=this.options,r=t.eles.nodes(),n=te(t.positions);return r.layoutPositions(this,t,function(i,o){var s=function a(i){return null==t.positions?function(e){return{x:e.x,y:e.y}}(i.position()):n?t.positions(i):t.positions[i._private.data.id]??null}(i);return!i.locked()&&null!=s&&s}),this};var zd={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Iu(t){this.options=rt({},zd,t)}Iu.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=br(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return r.nodes().layoutPositions(this,t,function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}}),this};var Gd=[{name:"breadthfirst",impl:xu},{name:"circle",impl:Tu},{name:"concentric",impl:Cu},{name:"cose",impl:Ri},{name:"grid",impl:Au},{name:"null",impl:So},{name:"preset",impl:Ou},{name:"random",impl:Iu}];function Mu(t){this.options=t,this.notifications=0}var Nu=function(){},Ru=function(){throw new Error("A headless instance can not render images")};Mu.prototype={recalculateRenderedStyle:Nu,notify:function(){this.notifications++},init:Nu,isHeadless:function(){return!0},png:Ru,jpg:Ru};var Lo={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,r=function(u,f,c,h,v,d,g){return v.x-c/2-g<=u&&u<=v.x+c/2+g&&v.y-c/2-g<=f&&f<=v.y+c/2+g},n=function(u,f,c,h,v){var d=u*Math.cos(h)-f*Math.sin(h),g=u*Math.sin(h)+f*Math.cos(h);return{x:d*c+v.x,y:g*c+v.y}},a=function(u,f,c,h){for(var v=[],d=0;d<u.length;d+=2)v.push(n(u[d],u[d+1],f,c,h));return v},i=function(u){for(var f=[],c=0;c<u.length;c++){var h=u[c];f.push(h.x,h.y)}return f},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){Y(f)&&(f=t[f]),t[u]=rt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,v,d,g,y,p){var m=i(a(this.points,d+2*p,g,y));return Er(h,v,m)},roughCollide:r,draw:function(h,v,d,g){var y=a(this.points,v,d,g);e.arrowShapeImpl("polygon")(h,y)},spacing:function(h){return 0},gap:o},f)};s("none",{collide:ri,roughCollide:ri,draw:qi,spacing:Yo,gap:Yo}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,f,c,h,v){var d=a(this.points,f,c,h),g=this.controlPoint,y=n(g[0],g[1],f,c,h);e.arrowShapeImpl(this.name)(u,d,y)},gap:function(u){return.8*o(u)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,c,h,v,d,g){var y=i(a(this.points,c+2*g,h,v)),p=i(a(this.pointsTee,c+2*g,h,v));return Er(u,f,y)||Er(u,f,p)},draw:function(u,f,c,h,v){var d=a(this.points,f,c,h),g=a(this.pointsTee,f,c,h);e.arrowShapeImpl(this.name)(u,d,g)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,c,h,v,d,g){var y=v,p=Math.pow(y.x-u,2)+Math.pow(y.y-f,2)<=Math.pow((c+2*g)*this.radius,2),m=i(a(this.points,c+2*g,h,v));return Er(u,f,m)||p},draw:function(u,f,c,h,v){var d=a(this.pointsTr,f,c,h);e.arrowShapeImpl(this.name)(u,d,h.x,h.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var c=this.baseCrossLinePts.slice(),h=f/u;return c[3]=c[3]-h,c[5]=c[5]-h,c},collide:function(u,f,c,h,v,d,g){var y=i(a(this.points,c+2*g,h,v)),p=i(a(this.crossLinePts(c,d),c+2*g,h,v));return Er(u,f,y)||Er(u,f,p)},draw:function(u,f,c,h,v){var d=a(this.points,f,c,h),g=a(this.crossLinePts(f,v),f,c,h);e.arrowShapeImpl(this.name)(u,d,g)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return.525*o(u)}}),s("circle",{radius:.15,collide:function(u,f,c,h,v,d,g){var y=v;return Math.pow(y.x-u,2)+Math.pow(y.y-f,2)<=Math.pow((c+2*g)*this.radius,2)},draw:function(u,f,c,h,v){e.arrowShapeImpl(this.name)(u,h.x,h.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return.95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})}},Mn={projectIntoViewport:function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),l=r.zoom();return[((t-a)/o-s.x)/l,((e-i)/o-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=C.getComputedStyle(t),n=function(p){return parseFloat(r.getPropertyValue(p))},a_left=n("padding-left"),a_right=n("padding-right"),a_top=n("padding-top"),a_bottom=n("padding-bottom"),i_left=n("border-left-width"),i_right=n("border-right-width"),i_top=n("border-top-width"),o=(n("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+a_left+i_left,e.top+a_top+i_top,o-(a_left+a_right),t.clientHeight-(a_top+a_bottom),e.width/(o+(i_left+i_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]},findNearestElements:function(t,e,r,n){var d,g,a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),f=(n?24:8)/l,c=(n?8:2)/l,h=(n?8:2)/l,v=1/0;function y(w,I){if(w.isNode()){if(g)return;g=w,s.push(w)}if(w.isEdge()&&(null==I||I<v))if(d){if(d.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value)for(var D=0;D<s.length;D++)if(s[D].isEdge()){s[D]=w,d=w,v=I??v;break}}else s.push(w),d=w,v=I??v}function p(w){var I=w.outerWidth()+2*c,D=w.outerHeight()+2*c,B=I/2,F=D/2,N=w.position();if(N.x-B<=t&&t<=N.x+B&&N.y-F<=e&&e<=N.y+F&&i.nodeShapes[a.getNodeShape(w)].checkPoint(t,e,0,I,D,N.x,N.y))return y(w,0),!0}function m(w){var oe,I=w._private,D=I.rscratch,B=w.pstyle("width").pfValue,F=w.pstyle("arrow-scale").value,N=B/2+f,V=N*N,z=2*N,ue=I.source,ve=I.target;if("segments"===D.edgeType||"straight"===D.edgeType||"haystack"===D.edgeType){for(var H=D.allpts,Q=0;Q+3<H.length;Q+=2)if(tf(t,e,H[Q],H[Q+1],H[Q+2],H[Q+3],z)&&V>(oe=sf(t,e,H[Q],H[Q+1],H[Q+2],H[Q+3])))return y(w,oe),!0}else if("bezier"===D.edgeType||"multibezier"===D.edgeType||"self"===D.edgeType||"compound"===D.edgeType)for(H=D.allpts,Q=0;Q+5<D.allpts.length;Q+=4)if(rf(t,e,H[Q],H[Q+1],H[Q+2],H[Q+3],H[Q+4],H[Q+5],z)&&V>(oe=of(t,e,H[Q],H[Q+1],H[Q+2],H[Q+3],H[Q+4],H[Q+5])))return y(w,oe),!0;ue=ue||I.source,ve=ve||I.target;var me=a.getArrowWidth(B,F),ce=[{name:"source",x:D.arrowStartX,y:D.arrowStartY,angle:D.srcArrowAngle},{name:"target",x:D.arrowEndX,y:D.arrowEndY,angle:D.tgtArrowAngle},{name:"mid-source",x:D.midX,y:D.midY,angle:D.midsrcArrowAngle},{name:"mid-target",x:D.midX,y:D.midY,angle:D.midtgtArrowAngle}];for(Q=0;Q<ce.length;Q++){var ye=ce[Q],Se=i.arrowShapes[w.pstyle(ye.name+"-arrow-shape").value],Oe=w.pstyle("width").pfValue;if(Se.roughCollide(t,e,me,ye.angle,{x:ye.x,y:ye.y},Oe,f)&&Se.collide(t,e,me,ye.angle,{x:ye.x,y:ye.y},Oe,f))return y(w),!0}u&&s.length>0&&(p(ue),p(ve))}function b(w,I,D){return Nr(w,I,D)}function E(w,I){var F,D=w._private,B=h;F=I?I+"-":"",w.boundingBox();var N=D.labelBounds[I||"main"],V=w.pstyle(F+"label").value;if("yes"===w.pstyle("text-events").strValue&&V){var oe=b(D.rscratch,"labelX",I),H=b(D.rscratch,"labelY",I),Q=b(D.rscratch,"labelAngle",I),ue=w.pstyle(F+"text-margin-x").pfValue,ve=w.pstyle(F+"text-margin-y").pfValue,me=N.x1-B-ue,ce=N.x2+B-ue,ye=N.y1-B-ve,Se=N.y2+B-ve;if(Q){var Oe=Math.cos(Q),Ce=Math.sin(Q),we=function(dt,Ve){return{x:(dt-=oe)*Oe-(Ve-=H)*Ce+oe,y:dt*Ce+Ve*Oe+H}},se=we(me,ye),Le=we(me,Se),Ie=we(ce,ye),Be=we(ce,Se);if(Er(t,e,[se.x+ue,se.y+ve,Ie.x+ue,Ie.y+ve,Be.x+ue,Be.y+ve,Le.x+ue,Le.y+ve]))return y(w),!0}else if(Yn(N,t,e))return y(w),!0}}r&&(o=o.interactive);for(var O=o.length-1;O>=0;O--){var L=o[O];L.isNode()?p(L)||E(L):m(L)||E(L)||E(L,"source")||E(L,"target")}return s},getAllInBox:function(t,e,r,n){for(var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(t,r),s=Math.max(t,r),l=Math.min(e,n),u=Math.max(e,n),f=br({x1:t=o,y1:e=l,x2:r=s,y2:n=u}),c=0;c<a.length;c++){var h=a[c];if(h.isNode()){var v=h,d=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ji(f,d)&&!Jo(d,f)&&i.push(v)}else{var g=h,y=g._private,p=y.rscratch;if(null!=p.startX&&null!=p.startY&&!Yn(f,p.startX,p.startY)||null!=p.endX&&null!=p.endY&&!Yn(f,p.endX,p.endY))continue;if("bezier"===p.edgeType||"multibezier"===p.edgeType||"self"===p.edgeType||"compound"===p.edgeType||"segments"===p.edgeType||"haystack"===p.edgeType){for(var m=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,b=!0,E=0;E<m.length;E++)if(!ef(f,m[E])){b=!1;break}b&&i.push(g)}else("haystack"===p.edgeType||"straight"===p.edgeType)&&i.push(g)}}return i}},Pi={calculateArrowAngles:function(t){var l,u,f,c,h,v,e=t._private.rscratch,r="haystack"===e.edgeType,n="bezier"===e.edgeType,a="multibezier"===e.edgeType,i="segments"===e.edgeType,o="compound"===e.edgeType,s="self"===e.edgeType;r?(f=e.haystackPts[0],c=e.haystackPts[1],h=e.haystackPts[2],v=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,h=e.arrowEndX,v=e.arrowEndY),p=e.midX,m=e.midY,i?(l=f-e.segpts[0],u=c-e.segpts[1]):a||o||s||n?(l=f-jt((d=e.allpts)[0],d[2],d[4],.1),u=c-jt(d[1],d[3],d[5],.1)):(l=f-p,u=c-m),e.srcArrowAngle=ii(l,u);var p=e.midX,m=e.midY;if(r&&(p=(f+h)/2,m=(c+v)/2),l=h-f,u=v-c,i)if((d=e.allpts).length/2%2==0)l=d[b=d.length/2]-d[E=b-2],u=d[b+1]-d[E+1];else{var b,E,O=2+(b=d.length/2-1);l=d[b]-d[E=b-2],u=d[b+1]-d[E+1]}else if(a||o||s){var w,I,D,B,N,F,V,d=e.allpts;e.ctrlpts.length/2%2==0?(w=jt(d[F=d.length/2-1],d[N=F+2],d[V=N+2],0),I=jt(d[F+1],d[N+1],d[V+1],0),D=jt(d[F],d[N],d[V],1e-4),B=jt(d[F+1],d[N+1],d[V+1],1e-4)):(w=jt(d[F=(N=d.length/2-1)-2],d[N],d[V=N+2],.4999),I=jt(d[F+1],d[N+1],d[V+1],.4999),D=jt(d[F],d[N],d[V],.5),B=jt(d[F+1],d[N+1],d[V+1],.5)),l=D-w,u=B-I}if(e.midtgtArrowAngle=ii(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i&&(d=e.allpts).length/2%2!=0&&(l=-(d[O=2+(b=d.length/2-1)]-d[b]),u=-(d[O+1]-d[b+1])),e.midsrcArrowAngle=ii(l,u),i)l=h-e.segpts[e.segpts.length-2],u=v-e.segpts[e.segpts.length-1];else if(a||o||s||n){var z=(d=e.allpts).length;l=h-jt(d[z-6],d[z-4],d[z-2],.9),u=v-jt(d[z-5],d[z-3],d[z-1],.9)}else l=h-p,u=v-m;e.tgtArrowAngle=ii(l,u)}};Pi.getArrowWidth=Pi.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(13.37*t,.9),29)*e,r[t+", "+e]=n,n)};var pr={};function ku(t){var e=[];if(null!=t){for(var r=0;r<t.length;r+=2)e.push({x:t[r],y:t[r+1]});return e}}pr.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=2*Math.random()*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=2*Math.random()*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),f=o.width(),c=s.width(),h=o.height(),v=s.height(),g=r.pstyle("haystack-radius").value/2;a.haystackPts=a.allpts=[a.source.x*f*g+l.x,a.source.y*h*g+l.y,a.target.x*c*g+u.x,a.target.y*v*g+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},pr.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,i=e.vectorNormInverse,o=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var f=0;f<u;f++){var c=s.pfValue[f],h=l.pfValue[f],v=1-c,g="node-position"===o?n:a,y={x:g.x1*v+g.x2*c,y:g.y1*v+g.y2*c};r.segpts.push(y.x+i.x*h,y.y+i.y*h)}},pr.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=r,v=c;n&&(h=0,v=l);var d=u-Math.PI/2,g=d-f/2,y=d+f/2,p=u+"_"+f;h=void 0===i[p]?i[p]=0:++i[p],a.ctrlpts=[o.x+1.4*Math.cos(g)*v*(h/3+1),o.y+1.4*Math.sin(g)*v*(h/3+1),o.x+1.4*Math.cos(y)*v*(h/3+1),o.y+1.4*Math.sin(y)*v*(h/3+1)]},pr.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=r,g=c;n&&(d=0,g=h?h.pfValue[0]:void 0);var p={x:i.x-s/2,y:i.y-l/2},m={x:o.x-u/2,y:o.y-f/2},b={x:Math.min(p.x,m.x),y:Math.min(p.y,m.y)},O=Math.max(.5,Math.log(.01*s)),L=Math.max(.5,Math.log(.01*u));a.ctrlpts=[b.x,b.y-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*O,b.x-(1+Math.pow(50,1.12)/100)*g*(d/3+1)*L,b.y]},pr.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},pr.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,f=t.pstyle("control-point-step-size").pfValue,c=t.pstyle("control-point-distances"),h=t.pstyle("control-point-weights"),v=c&&h?Math.min(c.value.length,h.value.length):1,d=c?c.pfValue[0]:void 0,g=h.value[0],y=n;i.edgeType=y?"multibezier":"bezier",i.ctrlpts=[];for(var p=0;p<v;p++){var b,m=(.5-e.eles.length/2+r)*f*(a?-1:1),E=Zo(m);y&&(d=c?c.pfValue[p]:f,g=h.value[p]);var O=void 0!==(b=n?d:void 0!==d?E*d:void 0)?b:m,L=1-g,I="node-position"===u?s:l,D={x:I.x1*L+I.x2*g,y:I.y1*L+I.y2*g};i.ctrlpts.push(D.x+o.x*O,D.y+o.y*O)}},pr.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",f=e.posPts,c=e.srcW,h=e.srcH,v=e.tgtW,d=e.tgtH,y="node-position"!==t.pstyle("edge-distances").value,p=t.pstyle("taxi-direction").value,m=p,b=t.pstyle("taxi-turn"),E="%"===b.units,O=b.pfValue,L=O<0,w=t.pstyle("taxi-turn-min-distance").pfValue,D=y?(h+d)/2:0,B=f.x2-f.x1,F=f.y2-f.y1,N=function(je,Ct){return je>0?Math.max(je-Ct,0):Math.min(je+Ct,0)},V=N(B,y?(c+v)/2:0),z=N(F,D),oe=!1;"auto"===m?p=Math.abs(V)>Math.abs(z)?a:n:m===l||m===s?(p=n,oe=!0):(m===i||m===o)&&(p=a,oe=!0);var ce,H=p===n,Q=H?z:V,ue=H?F:B,ve=Zo(ue),me=!1;(!oe||!E&&!L)&&(m===s&&ue<0||m===l&&ue>0||m===i&&ue>0||m===o&&ue<0)&&(Q=(ve*=-1)*Math.abs(Q),me=!0);var Oe=function(je){return Math.abs(je)<w||Math.abs(je)>=Math.abs(Q)},Ce=Oe(ce=E?(O<0?1+O:O)*Q:(O<0?Q:0)+O*ve),we=Oe(Math.abs(Q)-Math.abs(ce));if(!Ce&&!we||me)if(H){var A=f.y1+ce+(y?h/2*ve:0);r.segpts=[f.x1,A,f.x2,A]}else{var xe=f.x1+ce+(y?c/2*ve:0);r.segpts=[xe,f.y1,xe,f.y2]}else if(H){var Le=Math.abs(ue)<=h/2,Ie=Math.abs(B)<=v/2;if(Le){var Be=(f.x1+f.x2)/2;r.segpts=[Be,f.y1,Be,f.y2]}else if(Ie){var dt=(f.y1+f.y2)/2;r.segpts=[f.x1,dt,f.x2,dt]}else r.segpts=[f.x1,f.y2]}else{var nt=Math.abs(ue)<=c/2,Qe=Math.abs(F)<=d/2;if(nt){var Ye=(f.y1+f.y2)/2;r.segpts=[f.x1,Ye,f.x2,Ye]}else if(Qe){var pt=(f.x1+f.x2)/2;r.segpts=[pt,f.y1,pt,f.y2]}else r.segpts=[f.x2,f.y1]}},pr.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if("bezier"===r.edgeType){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,c=!x(r.startX)||!x(r.startY),h=!x(r.arrowStartX)||!x(r.arrowStartY),v=!x(r.endX)||!x(r.endY),d=!x(r.arrowEndX)||!x(r.arrowEndY),p=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,m=Dn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),b=m<p,E=Dn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),O=E<p,L=!1;if(c||h||b){L=!0;var w={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},I=Math.sqrt(w.x*w.x+w.y*w.y),D={x:w.x/I,y:w.y/I},B=Math.max(i,o),F={x:r.ctrlpts[0]+2*D.x*B,y:r.ctrlpts[1]+2*D.y*B},N=u.intersectLine(n.x,n.y,i,o,F.x,F.y,0);b?(r.ctrlpts[0]=r.ctrlpts[0]+D.x*(p-m),r.ctrlpts[1]=r.ctrlpts[1]+D.y*(p-m)):(r.ctrlpts[0]=N[0]+D.x*p,r.ctrlpts[1]=N[1]+D.y*p)}if(v||d||O){L=!0;var V={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},z=Math.sqrt(V.x*V.x+V.y*V.y),oe={x:V.x/z,y:V.y/z},H=Math.max(i,o),Q={x:r.ctrlpts[0]+2*oe.x*H,y:r.ctrlpts[1]+2*oe.y*H},ue=f.intersectLine(a.x,a.y,s,l,Q.x,Q.y,0);O?(r.ctrlpts[0]=r.ctrlpts[0]+oe.x*(p-E),r.ctrlpts[1]=r.ctrlpts[1]+oe.y*(p-E)):(r.ctrlpts[0]=ue[0]+oe.x*p,r.ctrlpts[1]=ue[1]+oe.y*p)}L&&this.findEndpoints(t)}},pr.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);var n;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[n=e.allpts.length/2-1],e.midY=e.allpts[n+1]):(e.midX=jt(e.allpts[n=e.allpts.length/2-3],e.allpts[n+2],e.allpts[n+4],.5),e.midY=jt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}},pr.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||x(e.startX)&&x(e.startY)&&x(e.endX)&&x(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Mt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},pr.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var r=this,a=r.cy.hasCompoundNodes(),i={map:new Vr,get:function(w){var I=this.map.get(w[0]);return null!=I?I.get(w[1]):null},set:function(w,I){var D=this.map.get(w[0]);null==D&&(D=new Vr,this.map.set(w[0],D)),D.set(w[1],I)}},o=[],s=[],l=0;l<t.length;l++){var u=t[l],f=u._private,c=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace()){if("haystack"===c){s.push(u);continue}var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"straight-triangle"===c||"taxi"===c,v="unbundled-bezier"===c||"bezier"===c,g=f.target,m=[f.source.poolIndex(),g.poolIndex()].sort(),b=i.get(m);null==b&&(i.set(m,b={eles:[]}),o.push(m)),b.eles.push(u),h&&(b.hasUnbundled=!0),v&&(b.hasBezier=!0)}}for(var E=function(w){var D=i.get(o[w]),B=void 0;if(!D.hasUnbundled){var F=D.eles[0].parallelEdges().filter(function(Re){return Re.isBundledBezier()});Ki(D.eles),F.forEach(function(Re){return D.eles.push(Re)}),D.eles.sort(function(Re,A){return Re.poolIndex()-A.poolIndex()})}var N=D.eles[0],V=N.source(),z=N.target();if(V.poolIndex()>z.poolIndex()){var oe=V;V=z,z=oe}var H=D.srcPos=V.position(),Q=D.tgtPos=z.position(),ue=D.srcW=V.outerWidth(),ve=D.srcH=V.outerHeight(),me=D.tgtW=z.outerWidth(),ce=D.tgtH=z.outerHeight(),ye=D.srcShape=r.nodeShapes[e.getNodeShape(V)],Se=D.tgtShape=r.nodeShapes[e.getNodeShape(z)];D.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Oe=0;Oe<D.eles.length;Oe++){var Ce=D.eles[Oe],we=Ce[0]._private.rscratch,se=Ce.pstyle("curve-style").value,Le="unbundled-bezier"===se||"segments"===se||"taxi"===se,Ie=!V.same(Ce.source());if(!D.calculatedIntersection&&V!==z&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var Be=ye.intersectLine(H.x,H.y,ue,ve,Q.x,Q.y,0),Ue=D.srcIntn=Be,ft=Se.intersectLine(Q.x,Q.y,me,ce,H.x,H.y,0),dt=D.tgtIntn=ft,Ve=D.intersectionPts={x1:Be[0],x2:ft[0],y1:Be[1],y2:ft[1]},$e=D.posPts={x1:H.x,x2:Q.x,y1:H.y,y2:Q.y},nt=ft[1]-Be[1],Qe=ft[0]-Be[0],Ye=Math.sqrt(Qe*Qe+nt*nt),et=D.vector={x:Qe,y:nt},xt=D.vectorNorm={x:et.x/Ye,y:et.y/Ye},pt={x:-xt.y,y:xt.x};D.nodesOverlap=!x(Ye)||Se.checkPoint(Be[0],Be[1],0,me,ce,Q.x,Q.y)||ye.checkPoint(ft[0],ft[1],0,ue,ve,H.x,H.y),D.vectorNormInverse=pt,B={nodesOverlap:D.nodesOverlap,dirCounts:D.dirCounts,calculatedIntersection:!0,hasBezier:D.hasBezier,hasUnbundled:D.hasUnbundled,eles:D.eles,srcPos:Q,tgtPos:H,srcW:me,srcH:ce,tgtW:ue,tgtH:ve,srcIntn:dt,tgtIntn:Ue,srcShape:Se,tgtShape:ye,posPts:{x1:$e.x2,y1:$e.y2,x2:$e.x1,y2:$e.y1},intersectionPts:{x1:Ve.x2,y1:Ve.y2,x2:Ve.x1,y2:Ve.y1},vector:{x:-et.x,y:-et.y},vectorNorm:{x:-xt.x,y:-xt.y},vectorNormInverse:{x:-pt.x,y:-pt.y}}}var ut=Ie?B:D;we.nodesOverlap=ut.nodesOverlap,we.srcIntn=ut.srcIntn,we.tgtIntn=ut.tgtIntn,a&&(V.isParent()||V.isChild()||z.isParent()||z.isChild())&&(V.parents().anySame(z)||z.parents().anySame(V)||V.same(z)&&V.isParent())?e.findCompoundLoopPoints(Ce,ut,Oe,Le):V===z?e.findLoopPoints(Ce,ut,Oe,Le):"segments"===se?e.findSegmentsPoints(Ce,ut):"taxi"===se?e.findTaxiPoints(Ce,ut):"straight"===se||!Le&&D.eles.length%2==1&&Oe===Math.floor(D.eles.length/2)?e.findStraightEdgePoints(Ce):e.findBezierPoints(Ce,ut,Oe,Le,Ie),e.findEndpoints(Ce),e.tryToCorrectInvalidPoints(Ce,ut),e.checkForInvalidEdgeWarning(Ce),e.storeAllpts(Ce),e.storeEdgeProjections(Ce),e.calculateArrowAngles(Ce),e.recalculateEdgeLabelProjections(Ce),e.calculateLabelAngles(Ce)}},O=0;O<o.length;O++)E(O);this.findHaystackPoints(s)}},pr.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),ku(e.segpts)},pr.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return this.recalculateRenderedStyle(t),ku(e.ctrlpts)},pr.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ua={manualEndptToPx:function(t,e){var n=t.position(),a=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*a),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,u[0],u[1],0)},findEndpoints:function(t){var r,B,F,N,V,e=this,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,c=t.pstyle("curve-style").value,h=t._private.rscratch,v=h.edgeType,g="self"===v||"compound"===v,y="bezier"===v||"multibezier"===v||g,p="bezier"!==v,m="straight"===v||"segments"===v,b="segments"===v,E=y||p||m,O=g||"taxi"===c,L=t.pstyle("source-endpoint"),w=O?"outside-to-node":L.value,I=t.pstyle("target-endpoint"),D=O?"outside-to-node":I.value;if(h.srcManEndpt=L,h.tgtManEndpt=I,y){var z=[h.ctrlpts[0],h.ctrlpts[1]];B=p?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:z,F=z}else if(m){var H=b?h.segpts.slice(0,2):[o.x,o.y];B=b?h.segpts.slice(h.segpts.length-2):[i.x,i.y],F=H}if("inside-to-node"===D)r=[o.x,o.y];else if(I.units)r=this.manualEndptToPx(a,I);else if("outside-to-line"===D)r=h.tgtIntn;else if("outside-to-node"===D||"outside-to-node-or-label"===D?N=B:("outside-to-line"===D||"outside-to-line-or-label"===D)&&(N=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),N[0],N[1],0),"outside-to-node-or-label"===D||"outside-to-line-or-label"===D){var ue=a._private.rscratch,ce=ue.labelX,ye=ue.labelY,Se=ue.labelWidth/2,Oe=ue.labelHeight/2,Ce=a.pstyle("text-valign").value;"top"===Ce?ye-=Oe:"bottom"===Ce&&(ye+=Oe);var we=a.pstyle("text-halign").value;"left"===we?ce-=Se:"right"===we&&(ce+=Se);var se=La(N[0],N[1],[ce-Se,ye-Oe,ce+Se,ye-Oe,ce+Se,ye+Oe,ce-Se,ye+Oe],o.x,o.y);if(se.length>0){var Le=i,Ie=Sn(Le,Un(r)),Be=Sn(Le,Un(se)),Ue=Ie;Be<Ie&&(r=se,Ue=Be),se.length>2&&Sn(Le,{x:se[2],y:se[3]})<Ue&&(r=[se[2],se[3]])}}var dt=si(r,B,e.arrowShapes[s].spacing(t)+u),Ve=si(r,B,e.arrowShapes[s].gap(t)+u);if(h.endX=Ve[0],h.endY=Ve[1],h.arrowEndX=dt[0],h.arrowEndY=dt[1],"inside-to-node"===w)r=[i.x,i.y];else if(L.units)r=this.manualEndptToPx(n,L);else if("outside-to-line"===w)r=h.srcIntn;else if("outside-to-node"===w||"outside-to-node-or-label"===w?V=F:("outside-to-line"===w||"outside-to-line-or-label"===w)&&(V=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),V[0],V[1],0),"outside-to-node-or-label"===w||"outside-to-line-or-label"===w){var $e=n._private.rscratch,Ye=$e.labelX,et=$e.labelY,xt=$e.labelWidth/2,pt=$e.labelHeight/2,ut=n.pstyle("text-valign").value;"top"===ut?et-=pt:"bottom"===ut&&(et+=pt);var Re=n.pstyle("text-halign").value;"left"===Re?Ye-=xt:"right"===Re&&(Ye+=xt);var A=La(V[0],V[1],[Ye-xt,et-pt,Ye+xt,et-pt,Ye+xt,et+pt,Ye-xt,et+pt],i.x,i.y);if(A.length>0){var de=o,Ne=Sn(de,Un(r)),xe=Sn(de,Un(A)),Te=Ne;xe<Ne&&(r=[A[0],A[1]],Te=xe),A.length>2&&Sn(de,{x:A[2],y:A[3]})<Te&&(r=[A[2],A[3]])}}var ke=si(r,F,e.arrowShapes[l].spacing(t)+f),je=si(r,F,e.arrowShapes[l].gap(t)+f);h.startX=je[0],h.startY=je[1],h.arrowStartX=ke[0],h.arrowStartY=ke[1],E&&(h.badLine=!(x(h.startX)&&x(h.startY)&&x(h.endX)&&x(h.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},Ao={};function _d(t,e,r){for(var n=function(u,f,c,h){return jt(u,f,c,h)},i=e._private.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}Ao.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)_d(this,t,r.allpts.slice(a,a+6))}else if("segments"===n){var i=e.rstyle.linePts=[];for(a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]})}else if("haystack"===n){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Ao.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Hr={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!at(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,c=a.rscratch,h=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(f){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}c.labelX=r,c.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},Pu=function(e,r){var n=Math.atan(r/e);return 0===e&&n<0&&(n*=-1),n},Bu=function(e,r){return Pu(r.x-e.x,r.y-e.y)};Hr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){var o=function(c,h,v){cn(r.rscratch,c,h,v),cn(r.rstyle,c,h,v)};o("labelX",null,(e={x:n.midX,y:n.midY}).x),o("labelY",null,e.y);var s=Pu(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var c=[],h=0;h+5<n.allpts.length;h+=4)c.push({p0:{x:n.allpts[h],y:n.allpts[h+1]},p1:{x:n.allpts[h+2],y:n.allpts[h+3]},p2:{x:n.allpts[h+4],y:n.allpts[h+5]},startDist:0,length:0,segments:[]});var y=r.rstyle.bezierPts,p=a.bezierProjPcts.length;function m(w,I,D,B,F){var N=Dn(I,D),V=w.segments[w.segments.length-1];w.segments.push({p0:I,p1:D,t0:B,t1:F,startDist:V?V.startDist+V.length:0,length:N}),w.length+=N}for(var b=0;b<c.length;b++){var E=c[b],O=c[b-1];O&&(E.startDist=O.startDist+O.length),m(E,E.p0,y[b*p],0,a.bezierProjPcts[0]);for(var L=0;L<p-1;L++)m(E,y[b*p+L],y[b*p+L+1],a.bezierProjPcts[L],a.bezierProjPcts[L+1]);m(E,y[b*p+p-1],E.p2,a.bezierProjPcts[p-1],1)}return f.cache=c},u=function(c){var h,v="source"===c;if(i[c]){var d=t.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var y,g=l(),p=0,m=0,b=0;b<g.length;b++){for(var E=g[v?b:g.length-1-b],O=0;O<E.segments.length;O++){var L=E.segments[v?O:E.segments.length-1-O];if(p=m,(m+=L.length)>=d||b===g.length-1&&O===E.segments.length-1){y={cp:E,segment:L};break}}if(y)break}var I=y.cp,D=y.segment,B=(d-p)/D.length,F=D.t1-D.t0,N=v?D.t0+F*B:D.t1-F*B;N=Da(0,N,1),e=Vn(I.p0,I.p1,I.p2,N),h=function(e,r,n,a){var i=Da(0,a-.001,1),o=Da(0,a+.001,1),s=Vn(e,r,n,i),l=Vn(e,r,n,o);return Bu(s,l)}(I.p0,I.p1,I.p2,N);break;case"straight":case"segments":case"haystack":for(var z,oe,H,Q,V=0,ue=n.allpts.length,ve=0;ve+3<ue&&(v?(H={x:n.allpts[ve],y:n.allpts[ve+1]},Q={x:n.allpts[ve+2],y:n.allpts[ve+3]}):(H={x:n.allpts[ue-2-ve],y:n.allpts[ue-1-ve]},Q={x:n.allpts[ue-4-ve],y:n.allpts[ue-3-ve]}),oe=V,!((V+=z=Dn(H,Q))>=d));ve+=2);var ce=(d-oe)/z;ce=Da(0,ce,1),e=function(e,r,n,a){var i_x=r.x-e.x,i_y=r.y-e.y,o=Dn(e,r);return n=n??0,{x:e.x+i_x/o*(a=a??n*o),y:e.y+i_y/o*a}}(H,Q,ce),h=Bu(H,Q)}o("labelX",c,e.x),o("labelY",c,e.y),o("labelAutoAngle",c,h)}};u("source"),u("target"),this.applyLabelDimensions(t)}},Hr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Hr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),i=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Nr(r.rscratch,"labelWrapCachedLines",e)||[],l="wrap"!==o?1:Math.max(s.length,1),u=a.height/l,f=u*i,c=a.width,h=a.height+(l-1)*(i-1)*u;cn(r.rstyle,"labelWidth",e,c),cn(r.rscratch,"labelWidth",e,c),cn(r.rstyle,"labelHeight",e,h),cn(r.rscratch,"labelHeight",e,h),cn(r.rscratch,"labelLineHeight",e,f)},Hr.getLabelText=function(t,e){var r=t._private,a=t.pstyle((e?e+"-":"")+"label").strValue,i=t.pstyle("text-transform").value,o=function(me,ce){return ce?(cn(r.rscratch,me,e,ce),ce):Nr(r.rscratch,me,e)};if(!a)return"";"none"==i||("uppercase"==i?a=a.toUpperCase():"lowercase"==i&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var l=o("labelKey");if(null!=l&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var f=a.split("\n"),c=t.pstyle("text-max-width").pfValue,v="anywhere"===t.pstyle("text-overflow-wrap").value,d=[],g=/[\s\u200b]+/,y=v?"":" ",p=0;p<f.length;p++){var m=f[p],E=this.calculateLabelDimensions(t,m).width;if(v){var O=m.split("").join("\u200b");m=O}if(E>c){for(var L=m.split(g),w="",I=0;I<L.length;I++){var D=L[I];this.calculateLabelDimensions(t,0===w.length?D:w+y+D).width<=c?w+=D+y:(w&&d.push(w),w=D+y)}w.match(/^[\s\u200b]+$/)||d.push(w)}else d.push(m)}o("labelWrapCachedLines",d),a=o("labelWrapCachedText",d.join("\n")),o("labelWrapKey",l)}else if("ellipsis"===s){var V=t.pstyle("text-max-width").pfValue,z="",H=!1;if(this.calculateLabelDimensions(t,a).width<V)return a;for(var Q=0;Q<a.length&&!(this.calculateLabelDimensions(t,z+a[Q]+"\u2026").width>V);Q++)z+=a[Q],Q===a.length-1&&(H=!0);return H||(z+="\u2026"),z}return a},Hr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},Hr.calculateLabelDimensions=function(t,e){var n=Cn(e,t._private.labelDimsKey),a=this.labelDimCache||(this.labelDimCache=[]),i=a[n];if(null!=i)return i;var s=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=c.getContext("2d");var v=c.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}h.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var d=0,g=0,y=e.split("\n"),p=0;p<y.length;p++){var b=h.measureText(y[p]),E=Math.ceil(b.width),O=l;d=Math.max(E,d),g+=O}return a[n]={width:d+=0,height:g+=0}},Hr.calculateLabelAngle=function(t,e){var n=t._private.rscratch,a=t.isEdge(),o=t.pstyle((e?e+"-":"")+"text-rotation"),s=o.strValue;return"none"===s?0:a&&"autorotate"===s?n.labelAutoAngle:"autorotate"===s?0:o.pfValue},Hr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),a=t._private.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Fu={},Gu=!1;Fu.getNodeShape=function(t){var r=t.pstyle("shape").value;if("cutrectangle"===r&&(t.width()<28||t.height()<28))return Gu||(Mt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Gu=!0),"rectangle";if(t.isParent())return"rectangle"===r||"roundrectangle"===r||"round-rectangle"===r||"cutrectangle"===r||"cut-rectangle"===r||"barrel"===r?r:"rectangle";if("polygon"===r){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return r};var Fi={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var a=(n=t[r])._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(r=0;r<e.length;r++){var n;t.drag.push(n=e[r])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(uu),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},_u={};[Mn,Pi,pr,Ua,Ao,Hr,Fu,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(o),s)for(var l=0;l<o.length;l++){var c=o[l]._private.rstyle;c.clean=!1,c.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){n(o.target)}).on("style.* background.*",function(o){n(o.target,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var c=0;c<s.length;c++)(0,s[c])(o,e);r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var r=function(E){return E._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,l=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&"none"!==o.pstyle("display").value&&("nodes"===s.group?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],h=f._private.rstyle,v=f.position();this.recalculateNodeLabelProjection(f),h.nodeX=v.x,h.nodeY=v.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var y=n[d]._private,p=y.rstyle,m=y.rscratch;p.srcX=m.arrowStartX,p.srcY=m.arrowStartY,p.tgtX=m.arrowEndX,p.tgtY=m.arrowEndY,p.midX=m.midX,p.midY=m.midY,p.labelAngle=m.labelAngle,p.sourceLabelAngle=m.sourceLabelAngle,p.targetLabelAngle=m.targetLabelAngle}}}},Fi].forEach(function(t){rt(_u,t)});var $u={getCachedImage:function(t,e,r){var a=this.imageCache=this.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var o=(i=a[t]=a[t]||{}).image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:";return t.substring(0,5).toLowerCase()===s||(o.crossOrigin=e),o.src=t,o}},oa={registerBinding:function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(t);return i.on.apply(i,a)},binder:function(t){var e=this,r=t===window||t===document||t===document.body||function(e){return!(typeof HTMLElement>"u")&&e instanceof HTMLElement}(t);if(null==e.supportsPassiveEvents){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var i=function(s,l,u){var f=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(f[2]={capture:u??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:i,addEventListener:i,addListener:i,bind:i}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(A){return A.selected()},r=function(A,de,Ne,xe){null==A&&(A=t.cy);for(var Te=0;Te<de.length;Te++)A.emit({originalEvent:Ne,type:de[Te],position:xe})},n=function(A){return A.shiftKey||A.metaKey||A.ctrlKey},a=function(A,de){var Ne=!0;if(t.cy.hasCompoundNodes()&&A&&A.pannable()){for(var xe=0;de&&xe<de.length;xe++)if((A=de[xe]).isNode()&&A.isParent()&&!A.pannable()){Ne=!1;break}}else Ne=!0;return Ne},s=function(A){A[0]._private.rscratch.inDragLayer=!0},u=function(A){A[0]._private.rscratch.isGrabTarget=!0},c=function(A,de){var Ne=de.addToList;!Ne.has(A)&&A.grabbable()&&!A.locked()&&(Ne.merge(A),function(A){A[0]._private.grabbed=!0}(A))},v=function(A,de){de=de||{};var Ne=A.cy().hasCompoundNodes();de.inDragLayer&&(A.forEach(s),A.neighborhood().stdFilter(function(xe){return!Ne||xe.isEdge()}).forEach(s)),de.addToList&&A.forEach(function(xe){c(xe,de)}),function(A,de){if(A.cy().hasCompoundNodes()&&(null!=de.inDragLayer||null!=de.addToList)){var Ne=A.descendants();de.inDragLayer&&(Ne.forEach(s),Ne.connectedEdges().forEach(s)),de.addToList&&c(Ne,de)}}(A,de),y(A,{inDragLayer:de.inDragLayer}),t.updateCachedGrabbedEles()},d=v,g=function(A){A&&(t.getCachedZSortedEles().forEach(function(de){(function(A){A[0]._private.grabbed=!1})(de),function(A){A[0]._private.rscratch.inDragLayer=!1}(de),function(A){A[0]._private.rscratch.isGrabTarget=!1}(de)}),t.updateCachedGrabbedEles())},y=function(A,de){if((null!=de.inDragLayer||null!=de.addToList)&&A.cy().hasCompoundNodes()){var Ne=A.ancestors().orphans();if(!Ne.same(A)){var xe=Ne.descendants().spawnSelf().merge(Ne).unmerge(A).unmerge(A.descendants()),Te=xe.connectedEdges();de.inDragLayer&&(Te.forEach(s),xe.forEach(s)),de.addToList&&xe.forEach(function(yt){c(yt,de)})}}},p=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},m=typeof MutationObserver<"u",b=typeof ResizeObserver<"u";m?(t.removeObserver=new MutationObserver(function(Re){for(var A=0;A<Re.length;A++){var Ne=Re[A].removedNodes;if(Ne)for(var xe=0;xe<Ne.length;xe++)if(Ne[xe]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Re){t.destroy()});var E=un(function(){t.cy.resize()},100);m&&(t.styleObserver=new MutationObserver(E),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",E),b&&(t.resizeObserver=new ResizeObserver(E),t.resizeObserver.observe(t.container));var L=function(){t.invalidateContainerClientCoordsCache()};(function(A,de){for(;null!=A;)t.registerBinding(Re=A,"transitionend",L),t.registerBinding(Re,"animationend",L),t.registerBinding(Re,"scroll",L),A=A.parentNode;var Re})(t.container),t.registerBinding(t.container,"contextmenu",function(Re){Re.preventDefault()});var D,B,F,I=function(A){for(var de=t.findContainerClientCoords(),Ne=de[0],xe=de[1],Te=de[2],yt=de[3],ke=A.touches?A.touches:[A],je=!1,Ct=0;Ct<ke.length;Ct++){var Bt=ke[Ct];if(Ne<=Bt.clientX&&Bt.clientX<=Ne+Te&&xe<=Bt.clientY&&Bt.clientY<=xe+yt){je=!0;break}}if(!je)return!1;for(var Et=t.container,mt=A.target.parentNode,wt=!1;mt;){if(mt===Et){wt=!0;break}mt=mt.parentNode}return!!wt};t.registerBinding(t.container,"mousedown",function(A){if(I(A)){A.preventDefault(),p(),t.hoverData.capture=!0,t.hoverData.which=A.which;var de=t.cy,Ne=[A.clientX,A.clientY],xe=t.projectIntoViewport(Ne[0],Ne[1]),Te=t.selection,yt=t.findNearestElements(xe[0],xe[1],!0,!1),ke=yt[0],je=t.dragData.possibleDragElements;t.hoverData.mdownPos=xe,t.hoverData.mdownGPos=Ne;if(3==A.which){t.hoverData.cxtStarted=!0;var Bt={originalEvent:A,type:"cxttapstart",position:{x:xe[0],y:xe[1]}};ke?(ke.activate(),ke.emit(Bt),t.hoverData.down=ke):de.emit(Bt),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==A.which){if(ke&&ke.activate(),null!=ke&&t.nodeIsGrabbable(ke)){var Et=function(qt){return{originalEvent:A,type:qt,position:{x:xe[0],y:xe[1]}}};if(u(ke),ke.selected()){je=t.dragData.possibleDragElements=de.collection();var mt=de.$(function(wt){return wt.isNode()&&wt.selected()&&t.nodeIsGrabbable(wt)});v(mt,{addToList:je}),ke.emit(Et("grabon")),mt.forEach(function(qt){qt.emit(Et("grab"))})}else je=t.dragData.possibleDragElements=de.collection(),d(ke,{addToList:je}),ke.emit(Et("grabon")).emit(Et("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ke,t.hoverData.downs=yt,t.hoverData.downTime=(new Date).getTime(),r(ke,["mousedown","tapstart","vmousedown"],A,{x:xe[0],y:xe[1]}),null==ke?(Te[4]=1,t.data.bgActivePosistion={x:xe[0],y:xe[1]},t.redrawHint("select",!0),t.redraw()):ke.pannable()&&(Te[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var qt=t.hoverData.down;qt?qt.emit({originalEvent:A,type:"taphold",position:{x:xe[0],y:xe[1]}}):de.emit({originalEvent:A,type:"taphold",position:{x:xe[0],y:xe[1]}})}},t.tapholdDuration)}Te[0]=Te[2]=xe[0],Te[1]=Te[3]=xe[1]}},!1),t.registerBinding(window,"mousemove",function(A){if(t.hoverData.capture||I(A)){var Ne=!1,xe=t.cy,Te=xe.zoom(),yt=[A.clientX,A.clientY],ke=t.projectIntoViewport(yt[0],yt[1]),je=t.hoverData.mdownPos,Ct=t.hoverData.mdownGPos,Bt=t.selection,Et=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Et=t.findNearestElement(ke[0],ke[1],!0,!1));var ir,Ot=t.hoverData.last,mt=t.hoverData.down,wt=[ke[0]-Bt[2],ke[1]-Bt[3]],qt=t.dragData.possibleDragElements;if(Ct){var Pr=yt[0]-Ct[0],or=yt[1]-Ct[1];t.hoverData.isOverThresholdDrag=ir=Pr*Pr+or*or>=t.desktopTapThreshold2}var nn=n(A);ir&&(t.hoverData.tapholdCancelled=!0);Ne=!0,r(Et,["mousemove","vmousemove","tapdrag"],A,{x:ke[0],y:ke[1]});var ca=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||xe.emit({originalEvent:A,type:"boxstart",position:{x:ke[0],y:ke[1]}}),Bt[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(ir){var Pn={originalEvent:A,type:"cxtdrag",position:{x:ke[0],y:ke[1]}};mt?mt.emit(Pn):xe.emit(Pn),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Et!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:A,type:"cxtdragout",position:{x:ke[0],y:ke[1]}}),t.hoverData.cxtOver=Et,Et&&Et.emit({originalEvent:A,type:"cxtdragover",position:{x:ke[0],y:ke[1]}}))}}else if(t.hoverData.dragging){if(Ne=!0,xe.panningEnabled()&&xe.userPanningEnabled()){var ha;if(t.hoverData.justStartedPan){var $i=t.hoverData.mdownPos;ha={x:(ke[0]-$i[0])*Te,y:(ke[1]-$i[1])*Te},t.hoverData.justStartedPan=!1}else ha={x:wt[0]*Te,y:wt[1]*Te};xe.panBy(ha),xe.emit("dragpan"),t.hoverData.dragged=!0}ke=t.projectIntoViewport(A.clientX,A.clientY)}else if(1!=Bt[4]||null!=mt&&!mt.pannable()){if(mt&&mt.pannable()&&mt.active()&&mt.unactivate(),(!mt||!mt.grabbed())&&Et!=Ot&&(Ot&&r(Ot,["mouseout","tapdragout"],A,{x:ke[0],y:ke[1]}),Et&&r(Et,["mouseover","tapdragover"],A,{x:ke[0],y:ke[1]}),t.hoverData.last=Et),mt)if(ir){if(xe.boxSelectionEnabled()&&nn)mt&&mt.grabbed()&&(g(qt),mt.emit("freeon"),qt.emit("free"),t.dragData.didDrag&&(mt.emit("dragfreeon"),qt.emit("dragfree"))),ca();else if(mt&&mt.grabbed()&&t.nodeIsDraggable(mt)){var wr=!t.dragData.didDrag;wr&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v(qt,{inDragLayer:!0});var hr={x:0,y:0};if(x(wt[0])&&x(wt[1])&&(hr.x+=wt[0],hr.y+=wt[1],wr)){var xr=t.hoverData.dragDelta;xr&&x(xr[0])&&x(xr[1])&&(hr.x+=xr[0],hr.y+=xr[1])}t.hoverData.draggingEles=!0,qt.silentShift(hr).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else 0===(Wr=t.hoverData.dragDelta=t.hoverData.dragDelta||[]).length?(Wr.push(wt[0]),Wr.push(wt[1])):(Wr[0]+=wt[0],Wr[1]+=wt[1]);Ne=!0}else ir&&(t.hoverData.dragging||!xe.boxSelectionEnabled()||!nn&&xe.panningEnabled()&&xe.userPanningEnabled()?!t.hoverData.selecting&&xe.panningEnabled()&&xe.userPanningEnabled()&&a(mt,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Bt[4]=0,t.data.bgActivePosistion=Un(je),t.redrawHint("select",!0),t.redraw()):ca(),mt&&mt.pannable()&&mt.active()&&mt.unactivate());if(Bt[2]=ke[0],Bt[3]=ke[1],Ne)return A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault(),!1}var Wr},!1),t.registerBinding(window,"mouseup",function(A){if(t.hoverData.capture){t.hoverData.capture=!1;var Ne=t.cy,xe=t.projectIntoViewport(A.clientX,A.clientY),Te=t.selection,yt=t.findNearestElement(xe[0],xe[1],!0,!1),ke=t.dragData.possibleDragElements,je=t.hoverData.down,Ct=n(A);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,je&&je.unactivate(),3===t.hoverData.which){var Bt={originalEvent:A,type:"cxttapend",position:{x:xe[0],y:xe[1]}};if(je?je.emit(Bt):Ne.emit(Bt),!t.hoverData.cxtDragged){var Et={originalEvent:A,type:"cxttap",position:{x:xe[0],y:xe[1]}};je?je.emit(Et):Ne.emit(Et)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(r(yt,["mouseup","tapend","vmouseup"],A,{x:xe[0],y:xe[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(je,["click","tap","vclick"],A,{x:xe[0],y:xe[1]}),B=!1,A.timeStamp-F<=Ne.multiClickDebounceTime()?(D&&clearTimeout(D),B=!0,F=null,r(je,["dblclick","dbltap","vdblclick"],A,{x:xe[0],y:xe[1]})):(D=setTimeout(function(){B||r(je,["oneclick","onetap","voneclick"],A,{x:xe[0],y:xe[1]})},Ne.multiClickDebounceTime()),F=A.timeStamp)),null==je&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!n(A)&&(Ne.$(e).unselect(["tapunselect"]),ke.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ke=Ne.collection()),yt==je&&!t.dragData.didDrag&&!t.hoverData.selecting&&null!=yt&&yt._private.selectable&&(t.hoverData.dragging||("additive"===Ne.selectionType()||Ct?yt.selected()?yt.unselect(["tapunselect"]):yt.select(["tapselect"]):Ct||(Ne.$(e).unmerge(yt).unselect(["tapunselect"]),yt.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ot=Ne.collection(t.getAllInBox(Te[0],Te[1],Te[2],Te[3]));t.redrawHint("select",!0),Ot.length>0&&t.redrawHint("eles",!0),Ne.emit({type:"boxend",originalEvent:A,position:{x:xe[0],y:xe[1]}});"additive"===Ne.selectionType()||Ct||Ne.$(e).unmerge(Ot).unselect(),Ot.emit("box").stdFilter(function(ir){return ir.selectable()&&!ir.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Te[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var wt=je&&je.grabbed();g(ke),wt&&(je.emit("freeon"),ke.emit("free"),t.dragData.didDrag&&(je.emit("dragfreeon"),ke.emit("dragfree")))}}Te[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var N=function(A){if(!t.scrollingPage){var de=t.cy,Ne=de.zoom(),xe=de.pan(),Te=t.projectIntoViewport(A.clientX,A.clientY),yt=[Te[0]*Ne+xe.x,Te[1]*Ne+xe.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])return void A.preventDefault();if(de.panningEnabled()&&de.userPanningEnabled()&&de.zoomingEnabled()&&de.userZoomingEnabled()){var ke;A.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),ke=null!=A.deltaY?A.deltaY/-250:null!=A.wheelDeltaY?A.wheelDeltaY/1e3:A.wheelDelta/1e3,ke*=t.wheelSensitivity,1===A.deltaMode&&(ke*=33);var Ct=de.zoom()*Math.pow(10,ke);"gesturechange"===A.type&&(Ct=t.gestureStartZoom*A.scale),de.zoom({level:Ct,renderedPosition:{x:yt[0],y:yt[1]}}),de.emit("gesturechange"===A.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(window,"scroll",function(A){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(A){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||A.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Re){t.hasTouchStarted||N(Re)},!0),t.registerBinding(t.container,"mouseout",function(A){var de=t.projectIntoViewport(A.clientX,A.clientY);t.cy.emit({originalEvent:A,type:"mouseout",position:{x:de[0],y:de[1]}})},!1),t.registerBinding(t.container,"mouseover",function(A){var de=t.projectIntoViewport(A.clientX,A.clientY);t.cy.emit({originalEvent:A,type:"mouseover",position:{x:de[0],y:de[1]}})},!1);var V,z,oe,H,Q,ue,ve,me,ce,ye,Se,Oe,Ce,Le,Ie,Be,Ue,ft,dt,Ve,we=function(A,de,Ne,xe){return Math.sqrt((Ne-A)*(Ne-A)+(xe-de)*(xe-de))},se=function(A,de,Ne,xe){return(Ne-A)*(Ne-A)+(xe-de)*(xe-de)};if(t.registerBinding(t.container,"touchstart",Le=function(A){if(t.hasTouchStarted=!0,I(A)){p(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var de=t.cy,Ne=t.touchData.now,xe=t.touchData.earlier;if(A.touches[0]){var Te=t.projectIntoViewport(A.touches[0].clientX,A.touches[0].clientY);Ne[0]=Te[0],Ne[1]=Te[1]}if(A.touches[1]&&(Te=t.projectIntoViewport(A.touches[1].clientX,A.touches[1].clientY),Ne[2]=Te[0],Ne[3]=Te[1]),A.touches[2]&&(Te=t.projectIntoViewport(A.touches[2].clientX,A.touches[2].clientY),Ne[4]=Te[0],Ne[5]=Te[1]),A.touches[1]){t.touchData.singleTouchMoved=!0,g(t.dragData.touchDragEles);var yt=t.findContainerClientCoords();Se=yt[2],Oe=yt[3],z=A.touches[0].clientY-(ye=yt[1]),oe=A.touches[1].clientX-(ce=yt[0]),H=A.touches[1].clientY-ye,Ce=0<=(V=A.touches[0].clientX-ce)&&V<=Se&&0<=oe&&oe<=Se&&0<=z&&z<=Oe&&0<=H&&H<=Oe;var ke=de.pan(),je=de.zoom();Q=we(V,z,oe,H),ue=se(V,z,oe,H),me=[((ve=[(V+oe)/2,(z+H)/2])[0]-ke.x)/je,(ve[1]-ke.y)/je];if(ue<4e4&&!A.touches[2]){var Et=t.findNearestElement(Ne[0],Ne[1],!0,!0),Ot=t.findNearestElement(Ne[2],Ne[3],!0,!0);return Et&&Et.isNode()?(Et.activate().emit({originalEvent:A,type:"cxttapstart",position:{x:Ne[0],y:Ne[1]}}),t.touchData.start=Et):Ot&&Ot.isNode()?(Ot.activate().emit({originalEvent:A,type:"cxttapstart",position:{x:Ne[0],y:Ne[1]}}),t.touchData.start=Ot):de.emit({originalEvent:A,type:"cxttapstart",position:{x:Ne[0],y:Ne[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(A.touches[2])de.boxSelectionEnabled()&&A.preventDefault();else if(!A.touches[1]&&A.touches[0]){var mt=t.findNearestElements(Ne[0],Ne[1],!0,!0),wt=mt[0];if(null!=wt&&(wt.activate(),t.touchData.start=wt,t.touchData.starts=mt,t.nodeIsGrabbable(wt))){var qt=t.dragData.touchDragEles=de.collection(),ir=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),wt.selected()?(ir=de.$(function(yr){return yr.selected()&&t.nodeIsGrabbable(yr)}),v(ir,{addToList:qt})):d(wt,{addToList:qt}),u(wt);var Pr=function(nn){return{originalEvent:A,type:nn,position:{x:Ne[0],y:Ne[1]}}};wt.emit(Pr("grabon")),ir?ir.forEach(function(yr){yr.emit(Pr("grab"))}):wt.emit(Pr("grab"))}r(wt,["touchstart","tapstart","vmousedown"],A,{x:Ne[0],y:Ne[1]}),null==wt&&(t.data.bgActivePosistion={x:Te[0],y:Te[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1===t.touchData.singleTouchMoved&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],A,{x:Ne[0],y:Ne[1]})},t.tapholdDuration)}if(A.touches.length>=1){for(var Br=t.touchData.startPosition=[],or=0;or<Ne.length;or++)Br[or]=xe[or]=Ne[or];var Or=A.touches[0];t.touchData.startGPosition=[Or.clientX,Or.clientY]}}},!1),t.registerBinding(window,"touchmove",Ie=function(A){var de=t.touchData.capture;if(de||I(A)){var Ne=t.selection,xe=t.cy,Te=t.touchData.now,yt=t.touchData.earlier,ke=xe.zoom();if(A.touches[0]){var je=t.projectIntoViewport(A.touches[0].clientX,A.touches[0].clientY);Te[0]=je[0],Te[1]=je[1]}A.touches[1]&&(je=t.projectIntoViewport(A.touches[1].clientX,A.touches[1].clientY),Te[2]=je[0],Te[3]=je[1]),A.touches[2]&&(je=t.projectIntoViewport(A.touches[2].clientX,A.touches[2].clientY),Te[4]=je[0],Te[5]=je[1]);var Bt,Ct=t.touchData.startGPosition;if(de&&A.touches[0]&&Ct){for(var Et=[],Ot=0;Ot<Te.length;Ot++)Et[Ot]=Te[Ot]-yt[Ot];var mt=A.touches[0].clientX-Ct[0],qt=A.touches[0].clientY-Ct[1];Bt=mt*mt+qt*qt>=t.touchTapThreshold2}if(de&&t.touchData.cxt){A.preventDefault();var nn=se(Br=A.touches[0].clientX-ce,or=A.touches[0].clientY-ye,Or=A.touches[1].clientX-ce,yr=A.touches[1].clientY-ye);if(nn/ue>=2.25||nn>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Bn={originalEvent:A,type:"cxttapend",position:{x:Te[0],y:Te[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Bn),t.touchData.start=null):xe.emit(Bn)}}if(de&&t.touchData.cxt){Bn={originalEvent:A,type:"cxtdrag",position:{x:Te[0],y:Te[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Bn):xe.emit(Bn),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var wr=t.findNearestElement(Te[0],Te[1],!0,!0);(!t.touchData.cxtOver||wr!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:A,type:"cxtdragout",position:{x:Te[0],y:Te[1]}}),t.touchData.cxtOver=wr,wr&&wr.emit({originalEvent:A,type:"cxtdragover",position:{x:Te[0],y:Te[1]}}))}else if(de&&A.touches[2]&&xe.boxSelectionEnabled())A.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||xe.emit({originalEvent:A,type:"boxstart",position:{x:Te[0],y:Te[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,Ne[4]=1,Ne&&0!==Ne.length&&void 0!==Ne[0]?(Ne[2]=(Te[0]+Te[2]+Te[4])/3,Ne[3]=(Te[1]+Te[3]+Te[5])/3):(Ne[0]=(Te[0]+Te[2]+Te[4])/3,Ne[1]=(Te[1]+Te[3]+Te[5])/3,Ne[2]=(Te[0]+Te[2]+Te[4])/3+1,Ne[3]=(Te[1]+Te[3]+Te[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(de&&A.touches[1]&&!t.touchData.didSelect&&xe.zoomingEnabled()&&xe.panningEnabled()&&xe.userZoomingEnabled()&&xe.userPanningEnabled()){if(A.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),hr=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var xr=0;xr<hr.length;xr++){var Ui=hr[xr]._private;Ui.grabbed=!1,Ui.rscratch.inDragLayer=!1}}var Br,or,Or,yr,Wr=t.touchData.start,hl=we(Br=A.touches[0].clientX-ce,or=A.touches[0].clientY-ye,Or=A.touches[1].clientX-ce,yr=A.touches[1].clientY-ye),Bg=hl/Q;if(Ce){var $g=(Br-V+(Or-oe))/2,Ug=(or-z+(yr-H))/2,Wa=xe.zoom(),Bo=Wa*Bg,Vi=xe.pan(),vl=me[0]*Wa+Vi.x,dl=me[1]*Wa+Vi.y,Vg={x:-Bo/Wa*(vl-Vi.x-$g)+vl,y:-Bo/Wa*(dl-Vi.y-Ug)+dl};Wr&&Wr.active()&&(g(hr=t.dragData.touchDragEles),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Wr.unactivate().emit("freeon"),hr.emit("free"),t.dragData.didDrag&&(Wr.emit("dragfreeon"),hr.emit("dragfree"))),xe.viewport({zoom:Bo,pan:Vg,cancelOnFailedZoom:!0}),xe.emit("pinchzoom"),Q=hl,V=Br,z=or,oe=Or,H=yr,t.pinching=!0}A.touches[0]&&(je=t.projectIntoViewport(A.touches[0].clientX,A.touches[0].clientY),Te[0]=je[0],Te[1]=je[1]),A.touches[1]&&(je=t.projectIntoViewport(A.touches[1].clientX,A.touches[1].clientY),Te[2]=je[0],Te[3]=je[1]),A.touches[2]&&(je=t.projectIntoViewport(A.touches[2].clientX,A.touches[2].clientY),Te[4]=je[0],Te[5]=je[1])}else if(A.touches[0]&&!t.touchData.didSelect){var Fr=t.touchData.start,Fo=t.touchData.last;if(!t.hoverData.draggingEles&&!t.swipePanning&&(wr=t.findNearestElement(Te[0],Te[1],!0,!0)),de&&null!=Fr&&A.preventDefault(),de&&null!=Fr&&t.nodeIsDraggable(Fr))if(Bt){var hr=t.dragData.touchDragEles,gl=!t.dragData.didDrag;gl&&v(hr,{inDragLayer:!0}),t.dragData.didDrag=!0;var qa={x:0,y:0};x(Et[0])&&x(Et[1])&&(qa.x+=Et[0],qa.y+=Et[1],gl)&&(t.redrawHint("eles",!0),(zr=t.touchData.dragDelta)&&x(zr[0])&&x(zr[1])&&(qa.x+=zr[0],qa.y+=zr[1])),t.hoverData.draggingEles=!0,hr.silentShift(qa).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==yt[0]&&t.touchData.startPosition[1]==yt[1]&&t.redrawHint("eles",!0),t.redraw()}else{var zr;0===(zr=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(zr.push(Et[0]),zr.push(Et[1])):(zr[0]+=Et[0],zr[1]+=Et[1])}if(r(Fr||wr,["touchmove","tapdrag","vmousemove"],A,{x:Te[0],y:Te[1]}),(!Fr||!Fr.grabbed())&&wr!=Fo&&(Fo&&Fo.emit({originalEvent:A,type:"tapdragout",position:{x:Te[0],y:Te[1]}}),wr&&wr.emit({originalEvent:A,type:"tapdragover",position:{x:Te[0],y:Te[1]}})),t.touchData.last=wr,de)for(xr=0;xr<Te.length;xr++)Te[xr]&&t.touchData.startPosition[xr]&&Bt&&(t.touchData.singleTouchMoved=!0);de&&(null==Fr||Fr.pannable())&&xe.panningEnabled()&&xe.userPanningEnabled()&&(a(Fr,t.touchData.starts)&&(A.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Un(t.touchData.startPosition)),t.swipePanning?(xe.panBy({x:Et[0]*ke,y:Et[1]*ke}),xe.emit("dragpan")):Bt&&(t.swipePanning=!0,xe.panBy({x:mt*ke,y:qt*ke}),xe.emit("dragpan"),Fr&&(Fr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),je=t.projectIntoViewport(A.touches[0].clientX,A.touches[0].clientY),Te[0]=je[0],Te[1]=je[1])}for(Ot=0;Ot<Te.length;Ot++)yt[Ot]=Te[Ot];de&&A.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",Be=function(A){var de=t.touchData.start;t.touchData.capture=!1,de&&de.unactivate()}),t.registerBinding(window,"touchend",Ue=function(A){var de=t.touchData.start;if(t.touchData.capture){0===A.touches.length&&(t.touchData.capture=!1),A.preventDefault();var xe=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Bt,Te=t.cy,yt=Te.zoom(),ke=t.touchData.now,je=t.touchData.earlier;if(A.touches[0]){var Ct=t.projectIntoViewport(A.touches[0].clientX,A.touches[0].clientY);ke[0]=Ct[0],ke[1]=Ct[1]}if(A.touches[1]&&(Ct=t.projectIntoViewport(A.touches[1].clientX,A.touches[1].clientY),ke[2]=Ct[0],ke[3]=Ct[1]),A.touches[2]&&(Ct=t.projectIntoViewport(A.touches[2].clientX,A.touches[2].clientY),ke[4]=Ct[0],ke[5]=Ct[1]),de&&de.unactivate(),t.touchData.cxt){if(Bt={originalEvent:A,type:"cxttapend",position:{x:ke[0],y:ke[1]}},de?de.emit(Bt):Te.emit(Bt),!t.touchData.cxtDragged){var Et={originalEvent:A,type:"cxttap",position:{x:ke[0],y:ke[1]}};de?de.emit(Et):Te.emit(Et)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!A.touches[2]&&Te.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ot=Te.collection(t.getAllInBox(xe[0],xe[1],xe[2],xe[3]));xe[0]=void 0,xe[1]=void 0,xe[2]=void 0,xe[3]=void 0,xe[4]=0,t.redrawHint("select",!0),Te.emit({type:"boxend",originalEvent:A,position:{x:ke[0],y:ke[1]}});Ot.emit("box").stdFilter(function(Pn){return Pn.selectable()&&!Pn.selected()}).select().emit("boxselect"),Ot.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(de?.unactivate(),A.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!A.touches[1]&&!A.touches[0]&&!A.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var wt=t.dragData.touchDragEles;if(null!=de){var qt=de._private.grabbed;g(wt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),qt&&(de.emit("freeon"),wt.emit("free"),t.dragData.didDrag&&(de.emit("dragfreeon"),wt.emit("dragfree"))),r(de,["touchend","tapend","vmouseup","tapdragout"],A,{x:ke[0],y:ke[1]}),de.unactivate(),t.touchData.start=null}else{var ir=t.findNearestElement(ke[0],ke[1],!0,!0);r(ir,["touchend","tapend","vmouseup","tapdragout"],A,{x:ke[0],y:ke[1]})}var Pr=t.touchData.startPosition[0]-ke[0],or=t.touchData.startPosition[1]-ke[1],nn=(Pr*Pr+or*or)*yt*yt;t.touchData.singleTouchMoved||(de||Te.$(":selected").unselect(["tapunselect"]),r(de,["tap","vclick"],A,{x:ke[0],y:ke[1]}),ft=!1,A.timeStamp-Ve<=Te.multiClickDebounceTime()?(dt&&clearTimeout(dt),ft=!0,Ve=null,r(de,["dbltap","vdblclick"],A,{x:ke[0],y:ke[1]})):(dt=setTimeout(function(){ft||r(de,["onetap","voneclick"],A,{x:ke[0],y:ke[1]})},Te.multiClickDebounceTime()),Ve=A.timeStamp)),null!=de&&!t.dragData.didDrag&&de._private.selectable&&nn<t.touchTapThreshold2&&!t.pinching&&("single"===Te.selectionType()?(Te.$(e).unmerge(de).unselect(["tapunselect"]),de.select(["tapselect"])):de.selected()?de.unselect(["tapunselect"]):de.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var wn=0;wn<ke.length;wn++)je[wn]=ke[wn];t.dragData.didDrag=!1,0===A.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),A.touches.length<2&&(1===A.touches.length&&(t.touchData.startGPosition=[A.touches[0].clientX,A.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),typeof TouchEvent>"u"){var $e=[],nt=function(A){return{clientX:A.clientX,clientY:A.clientY,force:1,identifier:A.pointerId,pageX:A.pageX,pageY:A.pageY,radiusX:A.width/2,radiusY:A.height/2,screenX:A.screenX,screenY:A.screenY,target:A.target}},Ye=function(A){$e.push(function(A){return{event:A,touch:nt(A)}}(A))},et=function(A){for(var de=0;de<$e.length;de++)if($e[de].event.pointerId===A.pointerId)return void $e.splice(de,1)},pt=function(A){A.touches=$e.map(function(de){return de.touch})},ut=function(A){return"mouse"===A.pointerType||4===A.pointerType};t.registerBinding(t.container,"pointerdown",function(Re){ut(Re)||(Re.preventDefault(),Ye(Re),pt(Re),Le(Re))}),t.registerBinding(t.container,"pointerup",function(Re){ut(Re)||(et(Re),pt(Re),Ue(Re))}),t.registerBinding(t.container,"pointercancel",function(Re){ut(Re)||(et(Re),pt(Re),Be())}),t.registerBinding(t.container,"pointermove",function(Re){var A,de;ut(Re)||(Re.preventDefault(),A=Re,(de=$e.filter(function(Ne){return Ne.event.pointerId===A.pointerId})[0]).event=A,de.touch=nt(A),pt(Re),Ie(Re))})}}},tn={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u){return La(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u){return jr(n,a,this.points,l,u,o,s,[0,-1],i)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return function(e,r,n,a,i,o){var s=n-e,l=a-r;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var c=f/u;return[(n-e)*c+e,(a-r)*c+r]}(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s){return Ln(e,r,a,i,o,s,n)}}},generateRoundPolygon:function(t,e){for(var r=new Array(2*e.length),n=0;n<e.length/2;n++){var i,a=2*n;i=n<e.length/2-1?2*(n+1):0,r[4*n]=e[a],r[4*n+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],l=Math.sqrt(o*o+s*s);r[4*n+2]=o/l,r[4*n+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(f,c,h,v,d){this.renderer.nodeShapeImpl("round-polygon",f,c,h,v,d,this.points)},intersectLine:function(f,c,h,v,d,g,y){return function(e,r,n,a,i,o,s,l){for(var f,u=[],c=new Array(n.length),h=o/2,v=s/2,d=ro(o,s),g=0;g<n.length/4;g++){var y,p;y=0===g?n.length-2:4*g-2,p=4*g+2;var m=a+h*n[4*g],b=i+v*n[4*g+1],O=d/Math.tan(Math.acos(-n[y]*n[p]-n[y+1]*n[p+1])/2),L=m-O*n[y],w=b-O*n[y+1],I=m+O*n[p],D=b+O*n[p+1];0===g?(c[n.length-2]=L,c[n.length-1]=w):(c[4*g-2]=L,c[4*g-1]=w),c[4*g]=I,c[4*g+1]=D;var B=n[y+1],F=-n[y];B*n[p]+F*n[p+1]<0&&(B*=-1,F*=-1),0!==(f=Sa(e,r,a,i,L+B*d,w+F*d,d)).length&&u.push(f[0],f[1])}for(var oe=0;oe<c.length/4;oe++)0!==(f=hn(e,r,a,i,c[4*oe],c[4*oe+1],c[4*oe+2],c[4*oe+3],!1)).length&&u.push(f[0],f[1]);if(u.length>2){for(var H=[u[0],u[1]],Q=Math.pow(H[0]-e,2)+Math.pow(H[1]-r,2),ue=1;ue<u.length/2;ue++){var ve=Math.pow(u[2*ue]-e,2)+Math.pow(u[2*ue+1]-r,2);ve<=Q&&(H[0]=u[2*ue],H[1]=u[2*ue+1],Q=ve)}return H}return u}(d,g,this.points,f,c,h,v)},checkPoint:function(f,c,h,v,d,g,y){return function(e,r,n,a,i,o,s){for(var l=new Array(n.length),u=o/2,f=s/2,c=ro(o,s),h=c*c,v=0;v<n.length/4;v++){var d,g;d=0===v?n.length-2:4*v-2,g=4*v+2;var y=a+u*n[4*v],p=i+f*n[4*v+1],b=c/Math.tan(Math.acos(-n[d]*n[g]-n[d+1]*n[g+1])/2),E=y-b*n[d],O=p-b*n[d+1],L=y+b*n[g],w=p+b*n[g+1];l[4*v]=E,l[4*v+1]=O,l[4*v+2]=L,l[4*v+3]=w;var I=n[d+1],D=-n[d];I*n[g]+D*n[g+1]<0&&(I*=-1,D*=-1);var N=O+D*c;if(Math.pow(E+I*c-e,2)+Math.pow(N-r,2)<=h)return!0}return Er(e,r,l)}(f,c,this.points,g,y,v,d)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:gr(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return jo(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Aa(a,i),u=2*l;return!!(jr(e,r,this.points,o,s,a,i-u,[0,-1],n)||jr(e,r,this.points,o,s,a-u,i,[0,-1],n)||Ln(e,r,u,u,o-a/2+l,s-i/2+l,n)||Ln(e,r,u,u,o+a/2-l,s-i/2+l,n)||Ln(e,r,u,u,o+a/2-l,s+i/2-l,n)||Ln(e,r,u,u,o-a/2+l,s+i/2-l,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:gr(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},generateCutTrianglePts:function(e,r,n,a){var i=this.cornerLength,o=r/2,s=e/2,l=n-s,u=n+s,f=a-o,c=a+o;return{topLeft:[l,f+i,l+i,f,l+i,f+i],topRight:[u-i,f,u,f+i,u-i,f+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[l+i,c,l,c-i,l+i,c-i]}},intersectLine:function(e,r,n,a,i,o,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,r),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return La(i,o,u,e,r)},checkPoint:function(e,r,n,a,i,o,s){if(jr(e,r,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n)||jr(e,r,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(a,i,o,s);return Er(e,r,l.topLeft)||Er(e,r,l.topRight)||Er(e,r,l.bottomRight)||Er(e,r,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:gr(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var c=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),h=function(g){var y=Vn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},.15),p=Vn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},.5),m=Vn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},.85);return[g[0],g[1],y.x,y.y,p.x,p.y,m.x,m.y,g[4],g[5]]},v=[].concat(h(c.topLeft),h(c.topRight),h(c.bottomRight),h(c.bottomLeft));return La(i,o,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,l=n+o,u=a-i,f=a+i,c=no(e,r),h=c.heightOffset,v=c.widthOffset,d=c.ctrlPtOffsetPct*e,g={topLeft:[s,u+h,s+d,u,s+v,u],topRight:[l-v,u,l-d,u,l,u+h],bottomRight:[l,f-h,l-d,f,l-v,f],bottomLeft:[s+v,f,s+d,f,s,f-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,r,n,a,i,o,s){var l=no(a,i),f=l.widthOffset;if(jr(e,r,this.points,o,s,a,i-2*l.heightOffset,[0,-1],n)||jr(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(a,i,o,s),h=function(w,I,D){var B=D[4],F=D[2],N=D[0],V=D[5],z=D[1],oe=Math.min(B,N),H=Math.max(B,N),Q=Math.min(V,z),ue=Math.max(V,z);if(oe<=w&&w<=H&&Q<=I&&I<=ue){var ve=function(e,r,n){return[e-2*r+n,2*(r-e),e]}(B,F,N),ce=function(e,r,n,a){var i=r*r-4*e*(n-=a);if(i<0)return[];var o=Math.sqrt(i),s=2*e;return[(-r+o)/s,(-r-o)/s]}(ve[0],ve[1],ve[2],w).filter(function(ye){return 0<=ye&&ye<=1});if(ce.length>0)return ce[0]}return null},v=Object.keys(c),d=0;d<v.length;d++){var y=c[v[d]],p=h(e,r,y);if(null!=p){var O=jt(y[5],y[3],y[1],p);if(y.isTop&&O<=r||y.isBottom&&r<=O)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:gr(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var u=r-(a/2+s),h=hn(i,o,e,r,e-(n/2+s),u,e+(n/2+s),u,!1);return h.length>0?h:jo(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Aa(a,i),u=2*l;if(jr(e,r,this.points,o,s,a,i-u,[0,-1],n)||jr(e,r,this.points,o,s,a-u,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n;return!!(Er(e,r,[o-f,s-c,o-f,s,o+f,s,o+f,s-c])||Ln(e,r,u,u,o+a/2-l,s+i/2-l,n)||Ln(e,r,u,u,o-a/2+l,s+i/2-l,n))}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",gr(3,0)),this.generateRoundPolygon("round-triangle",gr(3,0)),this.generatePolygon("rectangle",gr(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",gr(5,0)),this.generateRoundPolygon("round-pentagon",gr(5,0)),this.generatePolygon("hexagon",gr(6,0)),this.generateRoundPolygon("round-hexagon",gr(6,0)),this.generatePolygon("heptagon",gr(7,0)),this.generateRoundPolygon("round-heptagon",gr(7,0)),this.generatePolygon("octagon",gr(8,0)),this.generateRoundPolygon("round-octagon",gr(8,0));var n=new Array(20),a=to(5,0),i=to(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[2*s]*=o,i[2*s+1]*=o;for(s=0;s<5;s++)n[4*s]=a[2*s],n[4*s+1]=a[2*s+1],n[4*s+2]=i[2*s],n[4*s+3]=i[2*s+1];n=rs(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),t.makePolygon=function(u){var h,c="polygon-"+u.join("$");return(h=this[c])?h:e.generatePolygon(c,u)}}},Va={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Wo();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&Xt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}}},Uu=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Va.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;ei(function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Uu(t,!0,a);var i=Jr();t.render(t.renderOptions);var o=t.lastDrawTime=Jr();void 0===t.averageRedrawTime&&(t.averageRedrawTime=o-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else Uu(t,!1,a);t.skipFrame=!1,ei(n)}})}};var Vu=function(e){this.init(e)},sa=Vu.prototype;sa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],sa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if(C){var n=C.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",s=null!=n.getElementById(i);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!s){var l=n.createElement("style");l.id=i,l.innerHTML="."+o+" { position: relative; }",a.insertBefore(l,a.children[0])}"static"===C.getComputedStyle(r).getPropertyValue("position")&&Mt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=x(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},sa.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if("init"===t)return void r.load();if("destroy"===t)return void r.destroy();("add"===t||"remove"===t||"move"===t&&n.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&r.invalidateCachedZSortedEles(),"viewport"===t&&r.redrawHint("select",!0),("load"===t||"resize"===t||"mount"===t)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},sa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],a=r.target;(a.off||a.removeEventListener).apply(a,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}},sa.isHeadless=function(){return!1},[Lo,_u,$u,oa,tn,Va].forEach(function(t){rt(sa,t)});var Oo=1e3/60,Yu_setupDequeueing=function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=un(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold);a.beforeRender(function(u,f){var c=Jr(),h=a.averageRedrawTime,v=a.lastRedrawTime,d=[],g=a.cy.extent(),y=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var p=Jr(),m=p-c,b=p-f;if(v<Oo){if(b>=e.deqFastCost*(Oo-(u?h:0)))break}else if(u){if(m>=e.deqCost*v||m>=e.deqAvgCost*h)break}else if(b>=e.deqNoDrawCost*Oo)break;var O=e.deq(n,y,g);if(!(O.length>0))break;for(var L=0;L<O.length;L++)d.push(O[L])}d.length>0&&(e.onDeqd(n,d),!u&&e.shouldRedraw(n,d,y,g)&&i())},(e.priority||qi)(n))}}},Vd=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ri;He(this,t),this.idsByKey=new Vr,this.keyForId=new Vr,this.cachesByLvl=new Vr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return U(t,[{key:"getIdsFor",value:function(r){null==r&&Xt("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new $n,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){null!=r&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){null!=r&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return null==r?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id();return this.keyForId.get(n)!==this.getKey(r)}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Vr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return null!=i&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id());return this.getCache(a,n)}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||0===this.getNumberOfIdsForKey(a)}}]),t}(),ua={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ag=er({getKey:null,doesEleInvalidateKey:ri,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Vo,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ya=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=ag(r);rt(n,a),n.lookup=new Vd(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Jt=Ya.prototype;Jt.reasons=ua,Jt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},Jt.getRetiredTextureQueue=function(t){var r=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return r[t]=r[t]||[]},Jt.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Ca(function(r,n){return n.reqs-r.reqs})},Jt.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Jt.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(null==n&&(n=Math.ceil(Qi(s*r))),n<-4)n=-4;else if(s>=7.99||n>3)return null;var u=Math.pow(2,n),f=e.h*u,c=e.w*u,h=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,h))return null;var d,v=l.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;if(d=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||c>1024)return null;var g=i.getTextureQueue(d),y=g[g.length-2],p=function(){return i.recycleTexture(d,c)||i.addTexture(d,c)};y||(y=g[g.length-1]),y||(y=p()),y.width-y.usedWidth<c&&(y=p());for(var L,m=function(H){return H&&H.scaledLabelShown===h},b=a&&a===ua.dequeue,E=a&&a===ua.highQuality,O=a&&a===ua.downscale,w=n+1;w<=3;w++){var I=l.get(t,w);if(I){L=I;break}}var D=L&&L.level===n+1?L:null,B=function(){y.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,y.usedWidth,0,c,f)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,c,d),m(D))B();else if(m(L)){if(!E)return i.queueElement(t,L.level-1),L;for(var F=L.level;F>n;F--)D=i.getElement(t,e,r,F,ua.downscale);B()}else{var N;if(!b&&!E&&!O)for(var V=n-1;V>=-4;V--){var z=l.get(t,V);if(z){N=z;break}}if(m(N))return i.queueElement(t,n),N;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,t,e,h,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return v={x:y.usedWidth,texture:y,level:n,scale:u,width:c,height:f,scaledLabelShown:h},y.usedWidth+=Math.ceil(c+8),y.eleCaches.push(v),l.set(t,n,v),i.checkTextureFullness(y),v},Jt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Jt.invalidateElement=function(t){var e=this,r=e.lookup,n=[];if(r.isInvalid(t)){for(var i=-4;i<=3;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}if(r.invalidate(t))for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}},Jt.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Jt.checkTextureFullness=function(t){var r=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?fn(r,t):t.fullnessChecks++},Jt.retireTexture=function(t){var r=t.height,n=this.getTextureQueue(r),a=this.lookup;fn(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Ki(i),this.getRetiredTextureQueue(r).push(t)},Jt.addTexture=function(t,e){var a={};return this.getTextureQueue(t).push(a),a.eleCaches=[],a.height=t,a.width=Math.max(1024,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=this.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a},Jt.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),a=this.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Ki(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),fn(a,o),n.push(o),o}},Jt.queueElement=function(t,e){var n=this.getElementQueue(),a=this.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}},Jt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<1&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],f=i.hasCache(u,s.level);if(n[l]=null,!f){a.push(s);var c=e.getBoundingBox(u);e.getElement(u,c,t,s.level,ua.dequeue)}}return a},Jt.removeFromQueue=function(t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),a=this.getKey(t),i=n[a];null!=i&&(1===i.eles.length?(i.reqs=Wi,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))},Jt.onDequeue=function(t){this.onDequeues.push(t)},Jt.offDequeue=function(t){fn(this.onDequeues,t)},Jt.setupDequeueing=Yu_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++)(0,e.onDequeues[n])(r)},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(ji(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Wu=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Jr()-500,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=un(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},50),n.beforeRender(function(o,s){r.skipping=s-r.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),r.layersQueue=new Ca(function(s,l){return l.reqs-s.reqs}),r.setupDequeueing()},ar=Wu.prototype,qu=0,pg=Math.pow(2,53)-1;ar.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:qu=++qu%pg,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o},ar.getLayers=function(t,e,r){var n=this,o=n.renderer.cy.zoom(),s=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(Qi(o*e)))<-4)r=-4;else if(o>=3.99||r>2)return null;n.validateLayersElesOrdering(r,t);var c,v,l=n.layersByLevel,u=Math.pow(2,r),f=l[r]=l[r]||[];if(n.levelIsComplete(r,t))return f;!function(){var B=function(oe){if(n.validateLayersElesOrdering(oe,t),n.levelIsComplete(oe,t))return v=l[oe],!0},F=function(oe){if(!v)for(var H=r+oe;-4<=H&&H<=2&&!B(H);H+=oe);};F(1),F(-1);for(var N=f.length-1;N>=0;N--){var V=f[N];V.invalid&&fn(f,V)}}();var y=function(B){var F=(B=B||{}).after;if(function(){if(!c){c=br();for(var B=0;B<t.length;B++)Jl(c,t[B].boundingBox())}}(),c.w*u*(c.h*u)>16e6)return null;var V=n.makeLayer(c,r);if(null!=F){var z=f.indexOf(F)+1;f.splice(z,0,V)}else(void 0===B.insert||B.insert)&&f.unshift(V);return V};if(n.skipping&&!s)return null;for(var p=null,m=t.length/1,b=!s,E=0;E<t.length;E++){var O=t[E],L=O._private.rscratch,w=L.imgLayerCaches=L.imgLayerCaches||{},I=w[r];if(I)p=I;else{if((!p||p.eles.length>=m||!Jo(p.bb,O.boundingBox()))&&!(p=y({insert:!0,after:p})))return null;v||b?n.queueLayer(p,O):n.drawEleInLayer(p,O,r,e),p.eles.push(O),w[r]=p}}return v||(b?null:f)},ar.getEleLevelForLayerLevel=function(t,e){return t},ar.drawEleInLayer=function(t,e,r,n){var i=this.renderer,o=t.context,s=e.boundingBox();0===s.w||0===s.h||!e.visible()||(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,true),i.setImgSmoothing(o,!0))},ar.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length},ar.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0)this.invalidateLayer(a);else{var s=i;for(o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}}},ar.updateElementsInLayers=function(t,e){for(var n=ge(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=-4;u<=2;u++){var f=l[u];f&&(i&&this.getEleLevelForLayerLevel(f.level)!==i.level||e(f,o,i))}},ar.haveLayers=function(){for(var e=!1,r=-4;r<=2;r++){var n=this.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e},ar.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=Jr(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))},ar.invalidateLayer=function(t){if(this.lastInvalidationTime=Jr(),!t.invalid){var e=t.level,r=t.eles;fn(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}},ar.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||((o=n.replacement=e.makeLayer(n.bb,n.level)).replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})},ar.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},ar.queueLayer=function(t,e){var n=this.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},ar.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<1&&0!==r.size();){var i=r.peek();if(i.replacement)r.pop();else if(i.replaces&&i!==i.replaces.replacement)r.pop();else if(i.invalid)r.pop();else{var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}}return n},ar.applyLayerReplacement=function(t){var r=this.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}this.requestRedraw()}},ar.requestRedraw=un(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),ar.setupDequeueing=Yu_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,r){return e.dequeue(r)},onDeqd:qi,shouldRedraw:Vo,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Zu,Ku={};function yg(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function mg(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];0===a&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Qu(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++)t.lineTo((i=n[a]).x,i.y);var o=r,s=r[0];for(t.moveTo(s.x,s.y),a=1;a<o.length;a++){var i;t.lineTo((i=o[a]).x,i.y)}t.closePath&&t.closePath()}function bg(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,2*Math.PI,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function Eg(t,e,r,n){t.arc(e,r,n,0,2*Math.PI,!1)}Ku.arrowShapeImpl=function(t){return(Zu||(Zu={polygon:yg,"triangle-backcurve":mg,"triangle-tee":Qu,"circle-triangle":bg,"triangle-cross":Qu,circle:Eg}))[t]};var Xr={drawElement:function(t,e,r,n,a,i){e.isNode()?this.drawNode(t,e,r,n,a,i):this.drawEdge(t,e,r,n,a,i)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){e.isNode()?this.drawNodeUnderlay(t,e):this.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,r,n,a,i,o,s){var l=this,u=r.getBoundingBox(e);if(0!==u.w&&0!==u.h){var f=r.getElement(e,u,n,a,i);if(null!=f){var c=s(l,e);if(0===c)return;var p,m,b,E,O,I,h=o(l,e),v=u.x1,d=u.y1,g=u.w,y=u.h;if(0!==h){var L=r.getRotationPoint(e);t.translate(b=L.x,E=L.y),t.rotate(h),(O=l.getImgSmoothing(t))||l.setImgSmoothing(t,!0);var w=r.getRotationOffset(e);p=w.x,m=w.y}else p=v,m=d;1!==c&&(t.globalAlpha=(I=t.globalAlpha)*c),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,p,m,g,y),1!==c&&(t.globalAlpha=I),0!==h&&(t.rotate(-h),t.translate(-b,-E),O||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}}},wg=function(){return 0},xg=function(e,r){return e.getTextAngle(r,null)},Tg=function(e,r){return e.getTextAngle(r,"source")},Cg=function(e,r){return e.getTextAngle(r,"target")},Dg=function(e,r){return r.effectiveOpacity()},Mo=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Xr.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache,h=e.boundingBox(),v=!0===i?l.reasons.highQuality:null;if(0!==h.w&&0!==h.h&&e.visible()&&(!n||ji(h,n))){var d=e.isEdge(),g=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,r,a,v,wg,Dg),(!d||!g)&&o.drawCachedElementPortion(t,e,u,r,a,v,xg,Mo),d&&!g&&(o.drawCachedElementPortion(t,e,f,r,a,v,Tg,Mo),o.drawCachedElementPortion(t,e,c,r,a,v,Cg,Mo)),o.drawElementOverlay(t,e)}},Xr.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},Xr.drawCachedElements=function(t,e,r,n){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],r,n)},Xr.drawCachedNodes=function(t,e,r,n){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,r,n)}},Xr.drawLayeredElements=function(t,e,r,n){var i=this.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;0===l.w||0===l.h||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else this.drawCachedElements(t,e,r,n)};var rn={drawEdge:function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,s=e._private.rscratch;if((!i||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;r&&t.translate(-(l=r).x1,-l.y1);var u=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,g=u*f,y=u*f,p=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;"straight-triangle"===c?(o.eleStrokeStyle(t,e,N),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=v,t.lineCap=d,o.eleStrokeStyle(t,e,N),o.drawEdgePath(e,t,s.allpts,h),t.lineCap="butt")},E=function(){o.drawArrowheads(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:y)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var w=e.pstyle("ghost-offset-x").pfValue,I=e.pstyle("ghost-offset-y").pfValue,D=e.pstyle("ghost-opacity").value,B=g*D;t.translate(w,I),p(B),E(B),t.translate(-w,-I)}a&&o.drawEdgeUnderlay(t,e),p(),E(),a&&o.drawEdgeOverlay(t,e),o.drawElementText(t,e,null,n),r&&t.translate(l.x1,l.y1)}}},Ju=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(0!==a){var i=this,o=i.usePaths(),s=n._private.rscratch,u=2*n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,r.lineCap="self"!==s.edgeType||o?"round":"butt",i.colorStrokeStyle(r,f[0],f[1],f[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};rn.drawEdgeOverlay=Ju("overlay"),rn.drawEdgeUnderlay=Ju("underlay"),rn.drawEdgePath=function(t,e,r,n){var o,a=t._private.rscratch,i=e,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(l){var c=r.join("$");a.pathCacheKey&&a.pathCacheKey===c?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=f;break;case"solid":i.setLineDash([])}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<r.length;d+=2)e.lineTo(r[d],r[d+1])}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])},rn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}},rn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a="haystack"===n.edgeType;a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},rn.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||null==n||isNaN(a)||null==a||isNaN(i)||null==i)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if("none"!==l){var u="hollow"===e.pstyle(r+"-arrow-fill").value?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;void 0===o&&(o=h);var v=t.globalCompositeOperation;(1!==o||"hollow"===f)&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,c,l,n,a,i),t.globalCompositeOperation=v);var d=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,d[0],d[1],d[2],o),s.colorStrokeStyle(t,d[0],d[1],d[2],o),s.drawArrowShape(e,t,f,c,l,n,a,i)}}},rn.drawArrowShape=function(t,e,r,n,a,i,o,s){var c,l=this,u=this.usePaths()&&"triangle-cross"!==a,f=!1,h=e,v={x:i,y:o},d=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,d),y=l.arrowShapes[a];if(u){var p=l.arrowPathCache=l.arrowPathCache||[],m=Cn(a),b=p[m];null!=b?(c=e=b,f=!0):(c=e=new Path2D,p[m]=c)}f||(e.beginPath&&e.beginPath(),u?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,s,v,n),e.closePath&&e.closePath()),e=h,u&&(e.translate(i,o),e.rotate(s),e.scale(g,g)),("filled"===r||"both"===r)&&(u?e.fill(c):e.fill()),("hollow"===r||"both"===r)&&(e.lineWidth=(y.matchEdgeWidth?n:1)/(u?g:1),e.lineJoin="miter",u?e.stroke(c):e.stroke()),u&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-i,-o))};var No={safeDrawImage:function(t,e,r,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,o,s,l,u)}catch(f){Mt(f)}},drawInscribedImage:function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),f=u.getIndexedStyle.bind(u),c=f(r,"background-fit","value",n),h=f(r,"background-repeat","value",n),v=r.width(),d=r.height(),g=2*r.padding(),y=v+("inner"===f(r,"background-width-relative-to","value",n)?0:g),p=d+("inner"===f(r,"background-height-relative-to","value",n)?0:g),m=r._private.rscratch,E="node"===f(r,"background-clip","value",n),O=f(r,"background-image-opacity","value",n)*a,L=f(r,"background-image-smoothing","value",n),w=e.width||e.cachedW,I=e.height||e.cachedH;(null==w||null==I)&&(document.body.appendChild(e),w=e.cachedW=e.width||e.offsetWidth,I=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var D=w,B=I;if("auto"!==f(r,"background-width","value",n)&&(D="%"===f(r,"background-width","units",n)?f(r,"background-width","pfValue",n)*y:f(r,"background-width","pfValue",n)),"auto"!==f(r,"background-height","value",n)&&(B="%"===f(r,"background-height","units",n)?f(r,"background-height","pfValue",n)*p:f(r,"background-height","pfValue",n)),0!==D&&0!==B){if("contain"===c)D*=F=Math.min(y/D,p/B),B*=F;else if("cover"===c){var F;D*=F=Math.max(y/D,p/B),B*=F}var N=s-y/2,V=f(r,"background-position-x","units",n),z=f(r,"background-position-x","pfValue",n);N+="%"===V?(y-D)*z:z;var oe=f(r,"background-offset-x","units",n),H=f(r,"background-offset-x","pfValue",n);N+="%"===oe?(y-D)*H:H;var Q=l-p/2,ue=f(r,"background-position-y","units",n),ve=f(r,"background-position-y","pfValue",n);Q+="%"===ue?(p-B)*ve:ve;var me=f(r,"background-offset-y","units",n),ce=f(r,"background-offset-y","pfValue",n);Q+="%"===me?(p-B)*ce:ce,m.pathCache&&(N-=s,Q-=l,s=0,l=0);var ye=t.globalAlpha;t.globalAlpha=O;var Se=i.getImgSmoothing(t),Oe=!1;if("no"===L&&Se?(i.setImgSmoothing(t,!1),Oe=!0):"yes"===L&&!Se&&(i.setImgSmoothing(t,!0),Oe=!0),"no-repeat"===h)E&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,y,p),t.clip())),i.safeDrawImage(t,e,0,0,w,I,N,Q,D,B),E&&t.restore();else{var Ce=t.createPattern(e,h);t.fillStyle=Ce,i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,y,p),t.translate(N,Q),t.fill(),t.translate(-N,-Q)}t.globalAlpha=ye,Oe&&i.setImgSmoothing(t,Se)}}},Nn={};Nn.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Qi(r*n));e=Math.pow(2,a)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Nn.drawElementText=function(t,e,r,n,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==n){if(i&&!o.eleTextBiggerThanMin(e))return}else if(!1===n)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),h=e.pstyle("target-label");if(u||(!f||!f.value)&&(!c||!c.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var d,v=!r;r&&t.translate(-(d=r).x1,-d.y1),null==a?(o.drawText(t,e,null,v,i),e.isEdge()&&(o.drawText(t,e,"source",v,i),o.drawText(t,e,"target",v,i))):o.drawText(t,e,a,v,i),r&&t.translate(d.x1,d.y1)},Nn.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((e=this.fontCaches[r]).context===t)return e;return this.fontCaches.push(e={context:t}),e},Nn.setupTextStyle=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,f[0],f[1],f[2],l)},Nn.getTextAngle=function(t,e){var a=t._private.rscratch,o=t.pstyle((e?e+"-":"")+"text-rotation"),s=Nr(a,"labelAngle",e);return"autorotate"===o.strValue?t.isEdge()?s:0:"none"===o.strValue?0:o.pfValue},Nn.drawText=function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,s=a?e.effectiveOpacity():1;if(!a||0!==s&&0!==e.pstyle("text-opacity").value){"main"===r&&(r=null);var f,c,l=Nr(o,"labelX",r),u=Nr(o,"labelY",r),h=this.getLabelText(e,r);if(null!=h&&""!==h&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var O,v=r?r+"-":"",d=Nr(o,"labelWidth",r),g=Nr(o,"labelHeight",r),y=e.pstyle(v+"text-margin-x").pfValue,p=e.pstyle(v+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;switch(m&&(b="center",E="center"),l+=y,u+=p,0!==(O=n?this.getTextAngle(e,r):0)&&(t.translate(f=l,c=u),t.rotate(O),l=0,u=0),E){case"top":break;case"center":u+=g/2;break;case"bottom":u+=g}var L=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,I=e.pstyle("text-border-width").pfValue,D=e.pstyle("text-background-padding").pfValue;if(L>0||I>0&&w>0){var B=l-D;switch(b){case"left":B-=d;break;case"center":B-=d/2}var F=u-g-D,N=d+2*D,V=g+2*D;if(L>0){var z=t.fillStyle,oe=e.pstyle("text-background-color").value;t.fillStyle="rgba("+oe[0]+","+oe[1]+","+oe[2]+","+L*s+")",0===e.pstyle("text-background-shape").strValue.indexOf("round")?function Sg(t,e,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),t.fill()}(t,B,F,N,V,2):t.fillRect(B,F,N,V),t.fillStyle=z}if(I>0&&w>0){var Q=t.strokeStyle,ue=t.lineWidth,ve=e.pstyle("text-border-color").value,me=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+ve[0]+","+ve[1]+","+ve[2]+","+w*s+")",t.lineWidth=I,t.setLineDash)switch(me){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=I/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(B,F,N,V),"double"===me){var ce=I/2;t.strokeRect(B+ce,F+ce,N-2*ce,V-2*ce)}t.setLineDash&&t.setLineDash([]),t.lineWidth=ue,t.strokeStyle=Q}}var ye=2*e.pstyle("text-outline-width").pfValue;if(ye>0&&(t.lineWidth=ye),"wrap"===e.pstyle("text-wrap").value){var Se=Nr(o,"labelWrapCachedLines",r),Oe=Nr(o,"labelLineHeight",r),Ce=d/2,we=this.getLabelJustification(e);switch("auto"===we||("left"===b?"left"===we?l+=-d:"center"===we&&(l+=-Ce):"center"===b?"left"===we?l+=-Ce:"right"===we&&(l+=Ce):"right"===b&&("center"===we?l+=Ce:"right"===we&&(l+=d))),E){case"top":case"center":case"bottom":u-=(Se.length-1)*Oe}for(var se=0;se<Se.length;se++)ye>0&&t.strokeText(Se[se],l,u),t.fillText(Se[se],l,u),u+=Oe}else ye>0&&t.strokeText(h,l,u),t.fillText(h,l,u);0!==O&&(t.rotate(-O),t.translate(-f,-c))}}};var la={drawNode:function(t,e,r){var s,l,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,u=e._private,f=u.rscratch,c=e.position();if(x(c.x)&&x(c.y)&&(!i||e.visible())){var d,p,h=i?e.effectiveOpacity():1,v=o.usePaths(),g=!1,y=e.padding();s=e.width()+2*y,l=e.height()+2*y,r&&t.translate(-(p=r).x1,-p.y1);for(var b=e.pstyle("background-image").value,E=new Array(b.length),O=new Array(b.length),L=0,w=0;w<b.length;w++){var I=b[w];if(E[w]=null!=I&&"none"!==I){var B=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);L++,O[w]=o.getCachedImage(I,B,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var F=e.pstyle("background-blacken").value,N=e.pstyle("border-width").pfValue,V=e.pstyle("background-opacity").value*h,z=e.pstyle("border-color").value,oe=e.pstyle("border-style").value,H=e.pstyle("border-opacity").value*h;t.lineJoin="miter";var Q=function(){o.eleFillStyle(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:V)},ue=function(){o.colorStrokeStyle(t,z[0],z[1],z[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:H)},ve=e.pstyle("shape").strValue,me=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(c.x,c.y);var ce=o.nodePathCache=o.nodePathCache||[],ye=$o("polygon"===ve?ve+","+me.join(","):ve,""+l,""+s),Se=ce[ye];null!=Se?(g=!0,f.pathCache=d=Se):(d=new Path2D,ce[ye]=f.pathCache=d)}var Oe=function(){if(!g){var Ye=c;v&&(Ye={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(d||t,Ye.x,Ye.y,s,l)}v?t.fill(d):t.fill()},Ce=function(){for(var Ye=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,et=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],xt=u.backgrounding,pt=0,ut=0;ut<O.length;ut++){var Re=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ut);et&&"over"===Re||!et&&"inside"===Re?pt++:E[ut]&&O[ut].complete&&!O[ut].error&&(pt++,o.drawInscribedImage(t,O[ut],e,ut,Ye))}u.backgrounding=pt!==L,xt!==u.backgrounding&&e.updateStyle(!1)},we=function(){var Ye=arguments.length>0&&void 0!==arguments[0]&&arguments[0],et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;o.hasPie(e)&&(o.drawPie(t,e,et),Ye&&(v||o.nodeShapes[o.getNodeShape(e)].draw(t,c.x,c.y,s,l)))},se=function(){var xt=F>0?0:255;0!==F&&(o.colorFillStyle(t,xt,xt,xt,(F>0?F:-F)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:h)),v?t.fill(d):t.fill())},Le=function(){if(N>0){if(t.lineWidth=N,t.lineCap="butt",t.setLineDash)switch(oe){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(v?t.stroke(d):t.stroke(),"double"===oe){t.lineWidth=N/3;var Ye=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(d):t.stroke(),t.globalCompositeOperation=Ye}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var dt=e.pstyle("ghost-offset-x").pfValue,Ve=e.pstyle("ghost-offset-y").pfValue,$e=e.pstyle("ghost-opacity").value,nt=$e*h;t.translate(dt,Ve),Q($e*V),Oe(),Ce(nt,!0),ue($e*H),Le(),we(0!==F||0!==N),Ce(nt,!1),se(nt),t.translate(-dt,-Ve)}v&&t.translate(-c.x,-c.y),a&&o.drawNodeUnderlay(t,e,c,s,l),v&&t.translate(c.x,c.y),Q(),Oe(),Ce(h,!0),ue(),Le(),we(0!==F||0!==N),Ce(h,!1),se(),v&&t.translate(-c.x,-c.y),o.drawElementText(t,e,null,n),a&&o.drawNodeOverlay(t,e,c,s,l),r&&t.translate(p.x1,p.y1)}}},ju=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value;if(u>0){if(a=a||n.position(),null==i||null==o){var h=n.padding();i=n.width()+2*h,o=n.height()+2*h}this.colorFillStyle(r,f[0],f[1],f[2],u),this.nodeShapes[c].draw(r,a.x,a.y,i+2*l,o+2*l),r.fill()}}}};la.drawNodeOverlay=ju("overlay"),la.drawNodeUnderlay=ju("underlay"),la.hasPie=function(t){return(t=t[0])._private.hasPie},la.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,c=0;this.usePaths()&&(o=0,s=0),"%"===i.units?f*=i.pfValue:void 0!==i.pfValue&&(f=i.pfValue/2);for(var v=1;v<=a.pieBackgroundN;v++){var d=e.pstyle("pie-"+v+"-background-size").value,g=e.pstyle("pie-"+v+"-background-color").value,y=e.pstyle("pie-"+v+"-background-opacity").value*r,p=d/100;p+c>1&&(p=1-c);var m=1.5*Math.PI+2*Math.PI*c,E=m+2*Math.PI*p;0===d||c>=1||c+p>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,f,m,E),t.closePath(),this.colorFillStyle(t,g[0],g[1],g[2],y),t.fill(),c+=p)}};var Dr={};Dr.getPixelRatio=function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},Dr.paintCache=function(t){for(var n,e=this.paintCaches=this.paintCaches||[],r=!0,a=0;a<e.length;a++)if((n=e[a]).context===t){r=!1;break}return r&&e.push(n={context:t}),n},Dr.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint(),h=Dn(u,c),v=Dn(f,c);i=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(h,v))}else{var d=o?{x:0,y:0}:r.position(),g=r.paddedWidth(),y=r.paddedHeight();i=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(g,y))}else if(r.isEdge()){var p=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(p.x,p.y,m.x,m.y)}else{var b=o?{x:0,y:0}:r.position(),L=r.paddedWidth()/2,w=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":i=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":i=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":i=t.createLinearGradient(b.x+L,b.y,b.x-L,b.y);break;case"to-right":i=t.createLinearGradient(b.x-L,b.y,b.x+L,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-L,b.y-w,b.x+L,b.y+w);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-L,b.y+w,b.x+L,b.y-w);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+L,b.y-w,b.x-L,b.y+w);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+L,b.y+w,b.x-L,b.y-w)}}if(!i)return null;for(var D=l.length===s.length,B=s.length,F=0;F<B;F++)i.addColorStop(D?l[F]:F/(B-1),"rgba("+s[F][0]+","+s[F][1]+","+s[F][2]+","+a+")");return i},Dr.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a},Dr.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"},Dr.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}},Dr.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a},Dr.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"},Dr.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}},Dr.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio();(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=e.motionBlurPxRatio);var f,l=a*o,u=i*o;if(l!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)(f=r.canvases[h]).width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";for(h=0;h<e.BUFFER_COUNT;h++)(f=r.bufferCanvases[h]).width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,o<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}},Dr.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},Dr.render=function(t){var e=(t=t||Wo()).forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,i=t.forcedPan,o=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=o.cy,u=o.data,f=u.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),h=void 0!==t.motionBlur?t.motionBlur:o.motionBlur,v=o.motionBlurPxRatio,d=l.hasCompoundNodes(),g=o.hoverData.draggingEles,p=h=h&&!e&&o.motionBlurEnabled&&!(o.hoverData.selecting||o.touchData.selecting);e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),h&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(p=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var m=l.style(),b=l.zoom(),E=void 0!==a?a:b,O=l.pan(),L={x:O.x,y:O.y},w={zoom:b,pan:{x:O.x,y:O.y}},I=o.prevViewport;!(void 0===I||w.zoom!==I.zoom||w.pan.x!==I.pan.x||w.pan.y!==I.pan.y)&&!(g&&!d)&&(o.motionBlurPxRatio=1),i&&(L=i),E*=s,L.x*=s,L.y*=s;var B=o.getCachedZSortedEles();function F(Ve,$e,nt,Qe,Ye){var et=Ve.globalCompositeOperation;Ve.globalCompositeOperation="destination-out",o.colorFillStyle(Ve,255,255,255,o.motionBlurTransparency),Ve.fillRect($e,nt,Qe,Ye),Ve.globalCompositeOperation=et}function N(Ve,$e){var nt,Qe,Ye,et;o.clearingMotionBlur||Ve!==u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&Ve!==u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(nt=L,Qe=E,Ye=o.canvasWidth,et=o.canvasHeight):(nt={x:O.x*v,y:O.y*v},Qe=b*v,Ye=o.canvasWidth*v,et=o.canvasHeight*v),Ve.setTransform(1,0,0,1,0,0),"motionBlur"===$e?F(Ve,0,0,Ye,et):!e&&(void 0===$e||$e)&&Ve.clearRect(0,0,Ye,et),r||(Ve.translate(nt.x,nt.y),Ve.scale(Qe,Qe)),i&&Ve.translate(i.x,i.y),a&&Ve.scale(a,a)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var V=o.data.bufferContexts[o.TEXTURE_BUFFER];V.setTransform(1,0,0,1,0,0),V.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:V,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult}),(w=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var oe=o.textureCache.texture;w=o.textureCache.viewport,(z=u.contexts[o.NODE]).setTransform(1,0,0,1,0,0),h?F(z,0,0,w.width,w.height):z.clearRect(0,0,w.width,w.height);var H=m.core("outside-texture-bg-color").value,Q=m.core("outside-texture-bg-opacity").value;o.colorFillStyle(z,H[0],H[1],H[2],Q),z.fillRect(0,0,w.width,w.height),b=l.zoom(),N(z,!1),z.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s),z.drawImage(oe,w.mpan.x,w.mpan.y,w.width/w.zoom/s,w.height/w.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var ue=l.extent(),ve=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),me=o.hideEdgesOnViewport&&ve,ce=[];if(ce[o.NODE]=!f[o.NODE]&&h&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,ce[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),ce[o.DRAG]=!f[o.DRAG]&&h&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,ce[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||r||n||ce[o.NODE]){var ye=h&&!ce[o.NODE]&&1!==v;N(z=e||(ye?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),h&&!ye?"motionBlur":void 0),me?o.drawCachedNodes(z,B.nondrag,s,ue):o.drawLayeredElements(z,B.nondrag,s,ue),o.debug&&o.drawDebugPoints(z,B.nondrag),!r&&!h&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||r||ce[o.DRAG])&&(ye=h&&!ce[o.DRAG]&&1!==v,N(z=e||(ye?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]),h&&!ye?"motionBlur":void 0),me?o.drawCachedNodes(z,B.drag,s,ue):o.drawCachedElements(z,B.drag,s,ue),o.debug&&o.drawDebugPoints(z,B.drag),!r&&!h&&(f[o.DRAG]=!1)),o.showFps||!n&&f[o.SELECT_BOX]&&!r){var z;if(N(z=e||u.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var Oe=m.core("selection-box-border-width").value/b;z.lineWidth=Oe,z.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",z.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),Oe>0&&(z.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",z.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var Ce=u.bgActivePosistion;z.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",z.beginPath(),z.arc(Ce.x,Ce.y,m.core("active-bg-size").pfValue/b,0,2*Math.PI),z.fill()}var we=o.lastRedrawTime;if(o.showFps&&we){we=Math.round(we);var se=Math.round(1e3/we);z.setTransform(1,0,0,1,0,0),z.fillStyle="rgba(255, 0, 0, 0.75)",z.strokeStyle="rgba(255, 0, 0, 0.75)",z.lineWidth=1,z.fillText("1 frame = "+we+" ms = "+se+" fps",0,20);z.strokeRect(0,30,250,20),z.fillRect(0,30,250*Math.min(se/60,1),20)}r||(f[o.SELECT_BOX]=!1)}if(h&&1!==v){var Ue=u.contexts[o.DRAG],ft=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],dt=function($e,nt,Qe){$e.setTransform(1,0,0,1,0,0),Qe||!p?$e.clearRect(0,0,o.canvasWidth,o.canvasHeight):F($e,0,0,o.canvasWidth,o.canvasHeight),$e.drawImage(nt,0,0,o.canvasWidth*v,o.canvasHeight*v,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||ce[o.NODE])&&(dt(u.contexts[o.NODE],o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],ce[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||ce[o.DRAG])&&(dt(Ue,ft,ce[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=w,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),h&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},100)),e||l.emit("render")};for(var En={drawPolygonPath:function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+o*i[2*l],r+s*i[2*l+1]);t.closePath()},drawRoundPolygonPath:function(t,e,r,n,a,i){var o=n/2,s=a/2,l=ro(n,a);t.beginPath&&t.beginPath();for(var u=0;u<i.length/4;u++){var f,c;f=0===u?i.length-2:4*u-2,c=4*u+2;var h=e+o*i[4*u],v=r+s*i[4*u+1],g=l/Math.tan(Math.acos(-i[f]*i[c]-i[f+1]*i[c+1])/2),y=h-g*i[f],p=v-g*i[f+1],m=h+g*i[c],b=v+g*i[c+1];0===u?t.moveTo(y,p):t.lineTo(y,p),t.arcTo(h,v,m,b,l)}t.closePath()},drawRoundRectanglePath:function(t,e,r,n,a){var i=n/2,o=a/2,s=Aa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+i,r-o,e+i,r,s),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.arcTo(e-i,r-o,e,r-o,s),t.lineTo(e,r-o),t.closePath()},drawBottomRoundRectanglePath:function(t,e,r,n,a){var i=n/2,o=a/2,s=Aa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+i,r-o),t.lineTo(e+i,r),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.lineTo(e-i,r-o),t.lineTo(e,r-o),t.closePath()},drawCutRectanglePath:function(t,e,r,n,a){var i=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e-i+8,r-o),t.lineTo(e+i-8,r-o),t.lineTo(e+i,r-o+8),t.lineTo(e+i,r+o-8),t.lineTo(e+i-8,r+o),t.lineTo(e-i+8,r+o),t.lineTo(e-i,r+o-8),t.lineTo(e-i,r-o+8),t.closePath()},drawBarrelPath:function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=r-o,f=r+o,c=no(n,a),h=c.widthOffset,v=c.heightOffset,d=c.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(s,u+v),t.lineTo(s,f-v),t.quadraticCurveTo(s+d,f,s+h,f),t.lineTo(l-h,f),t.quadraticCurveTo(l-d,f,l,f-v),t.lineTo(l,u+v),t.quadraticCurveTo(l-d,u,l-h,u),t.lineTo(s+h,u),t.quadraticCurveTo(s+d,u,s,u+v),t.closePath()}},el=Math.sin(0),tl=Math.cos(0),Ro={},ko={},rl=Math.PI/40,fa=0*Math.PI;fa<2*Math.PI;fa+=rl)Ro[fa]=Math.sin(fa),ko[fa]=Math.cos(fa);En.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=rl)i=e-s*Ro[u]*el+s*ko[u]*tl,o=r+l*ko[u]*el+l*Ro[u]*tl,0===u?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var Xa={};function nl(t){var e=t.indexOf(",");return t.substr(e+1)}function al(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new qn(function(a,i){try{e.toBlob(function(o){null!=o?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return function Ag(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}(nl(n()),r);case"base64":return nl(n());default:return n()}}Xa.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]},Xa.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=x(t.maxWidth)||x(t.maxHeight),l=this.getPixelRatio(),u=1;if(void 0!==t.scale)i*=t.scale,o*=t.scale,u=t.scale;else if(s){var f=1/0,c=1/0;x(t.maxWidth)&&(f=u*t.maxWidth/i),x(t.maxHeight)&&(c=u*t.maxHeight/o),i*=u=Math.min(f,c),o*=u}s||(i*=l,o*=l,u*=l);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var v=h.getContext("2d");if(i>0&&o>0){v.clearRect(0,0,i,o),v.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*u,-n.y1*u),v.scale(u,u),this.drawElements(v,d),v.scale(1/u,1/u),v.translate(n.x1*u,n.y1*u);else{var g=e.pan(),y={x:g.x*u,y:g.y*u};u*=e.zoom(),v.translate(y.x,y.y),v.scale(u,u),this.drawElements(v,d),v.scale(1/u,1/u),v.translate(-y.x,-y.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,o),v.fill())}return h},Xa.png=function(t){return al(t,this.bufferCanvasImage(t),"image/png")},Xa.jpg=function(t){return al(t,this.bufferCanvasImage(t),"image/jpeg")};var Og=ol,At=ol.prototype;function ol(t){var e=this;e.data={canvases:new Array(At.CANVAS_LAYERS),contexts:new Array(At.CANVAS_LAYERS),canvasNeedsRedraw:new Array(At.CANVAS_LAYERS),bufferCanvases:new Array(At.BUFFER_COUNT),bufferContexts:new Array(At.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),i.style[r]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};k&&k.userAgent.match(/msie|trident|edge/i)&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<At.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(we){l.style[we]=o[we]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(At.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[At.NODE].setAttribute("data-id","layer"+At.NODE+"-node"),e.data.canvases[At.SELECT_BOX].setAttribute("data-id","layer"+At.SELECT_BOX+"-selectbox"),e.data.canvases[At.DRAG].setAttribute("data-id","layer"+At.DRAG+"-drag"),s=0;s<At.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=br(),c=function(se){return{x:-se.w/2,y:-se.h/2}},O=function(se){return se.boundingBox(),se[0]._private.bodyBounds},L=function(se){return se.boundingBox(),se[0]._private.labelBounds.main||u},w=function(se){return se.boundingBox(),se[0]._private.labelBounds.source||u},I=function(se){return se.boundingBox(),se[0]._private.labelBounds.target||u},D=function(se,Le){return Le},F=function(se,Le,Ie){var Be=se?se+"-":"";return{x:Le.x+Ie.pstyle(Be+"text-margin-x").pfValue,y:Le.y+Ie.pstyle(Be+"text-margin-y").pfValue}},N=function(se,Le,Ie){var Be=se[0]._private.rscratch;return{x:Be[Le],y:Be[Ie]}},me=e.data.eleTxrCache=new Ya(e,{getKey:function(se){return se[0]._private.nodeKey},doesEleInvalidateKey:function(se){var Le=se[0]._private;return!(Le.oldBackgroundTimestamp===Le.backgroundTimestamp)},drawElement:function(se,Le,Ie,Be,Ue){return e.drawElement(se,Le,Ie,!1,!1,Ue)},getBoundingBox:O,getRotationPoint:function(se){return function(se){return{x:(se.x1+se.x2)/2,y:(se.y1+se.y2)/2}}(O(se))},getRotationOffset:function(se){return c(O(se))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ce=e.data.lblTxrCache=new Ya(e,{getKey:function(se){return se[0]._private.labelStyleKey},drawElement:function(se,Le,Ie,Be,Ue){return e.drawElementText(se,Le,Ie,Be,"main",Ue)},getBoundingBox:L,getRotationPoint:function(se){return F("",N(se,"labelX","labelY"),se)},getRotationOffset:function(se){var Le=L(se),Ie=c(L(se));if(se.isNode()){switch(se.pstyle("text-halign").value){case"left":Ie.x=-Le.w;break;case"right":Ie.x=0}switch(se.pstyle("text-valign").value){case"top":Ie.y=-Le.h;break;case"bottom":Ie.y=0}}return Ie},isVisible:D}),ye=e.data.slbTxrCache=new Ya(e,{getKey:function(se){return se[0]._private.sourceLabelStyleKey},drawElement:function(se,Le,Ie,Be,Ue){return e.drawElementText(se,Le,Ie,Be,"source",Ue)},getBoundingBox:w,getRotationPoint:function(se){return F("source",N(se,"sourceLabelX","sourceLabelY"),se)},getRotationOffset:function(se){return c(w(se))},isVisible:D}),Se=e.data.tlbTxrCache=new Ya(e,{getKey:function(se){return se[0]._private.targetLabelStyleKey},drawElement:function(se,Le,Ie,Be,Ue){return e.drawElementText(se,Le,Ie,Be,"target",Ue)},getBoundingBox:I,getRotationPoint:function(se){return F("target",N(se,"targetLabelX","targetLabelY"),se)},getRotationOffset:function(se){return c(I(se))},isVisible:D}),Oe=e.data.lyrTxrCache=new Wu(e);e.onUpdateEleCalcs(function(se,Le){me.invalidateElements(Le),ce.invalidateElements(Le),ye.invalidateElements(Le),Se.invalidateElements(Le),Oe.invalidateElements(Le);for(var Ie=0;Ie<Le.length;Ie++){var Be=Le[Ie]._private;Be.oldBackgroundTimestamp=Be.backgroundTimestamp}});var Ce=function(se){for(var Le=0;Le<se.length;Le++)Oe.enqueueElementRefinement(se[Le].ele)};me.onDequeue(Ce),ce.onDequeue(Ce),ye.onDequeue(Ce),Se.onDequeue(Ce)}At.CANVAS_LAYERS=3,At.SELECT_BOX=0,At.DRAG=1,At.NODE=2,At.BUFFER_COUNT=3,At.TEXTURE_BUFFER=0,At.MOTIONBLUR_BUFFER_NODE=1,At.MOTIONBLUR_BUFFER_DRAG=2,At.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[At.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[At.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[At.SELECT_BOX]=e}};var Ig=typeof Path2D<"u";At.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},At.usePaths=function(){return Ig&&this.pathsEnabled},At.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},At.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},At.makeOffscreenCanvas=function(t,e){var r;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":ze(OffscreenCanvas))?r=new OffscreenCanvas(t,e):((r=document.createElement("canvas")).width=t,r.height=e),r},[Ku,Xr,rn,No,Nn,la,Dr,En,Xa,{nodeShapeImpl:function(t,e,r,n,a,i,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}}}].forEach(function(t){rt(At,t)});var Ng=[{type:"layout",extensions:Gd},{type:"renderer",extensions:[{name:"null",impl:Mu},{name:"base",impl:Vu},{name:"canvas",impl:Og}]}],sl={},ul={};function ll(t,e,r){var n=r,a=function(I){Mt("Can not register `"+e+"` for `"+t+"` since `"+I+"` already exists in the prototype and can not be overridden")};if("core"===t){if($a.prototype[e])return a(e);$a.prototype[e]=r}else if("collection"===t){if(rr.prototype[e])return a(e);rr.prototype[e]=r}else if("layout"===t){for(var i=function(I){this.options=I,r.call(this,I),fe(this._private)||(this._private={}),this._private.cy=I.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=r.prototype.stop;o.stop=function(){var w=this.options;if(w&&w.animate){var I=this.animations;if(I)for(var D=0;D<I.length;D++)I[D].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(I){return I._private.cy},h={addEventFields:function(I,D){D.layout=I,D.cy=c(I),D.target=I},bubble:function(){return!0},parent:function(I){return c(I)}};rt(o,{createEmitter:function(){return this._private.emitter=new Ei(h,this),this},emitter:function(){return this._private.emitter},on:function(I,D){return this.emitter().on(I,D),this},one:function(I,D){return this.emitter().one(I,D),this},once:function(I,D){return this.emitter().one(I,D),this},removeListener:function(I,D){return this.emitter().removeListener(I,D),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(I,D){return this.emitter().emit(I,D),this}}),Nt.eventAliasesOn(o),n=i}else if("renderer"===t&&"null"!==e&&"base"!==e){var v=fl("renderer","base"),d=v.prototype,g=r,y=r.prototype,p=function(){v.apply(this,arguments),g.apply(this,arguments)},m=p.prototype;for(var b in d){var E=d[b];if(null!=y[b])return a(b);m[b]=E}for(var L in y)m[L]=y[L];d.clientFunctions.forEach(function(w){m[w]=m[w]||function(){Xt("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=p}else if("__proto__"===t||"constructor"===t||"prototype"===t)return Xt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return K({map:sl,keys:[t,e],value:n})}function fl(t,e){return ie({map:sl,keys:[t,e]})}function Rg(t,e,r,n,a){return K({map:ul,keys:[t,e,r,n],value:a})}function kg(t,e,r,n){return ie({map:ul,keys:[t,e,r,n]})}var Po=function(){return 2===arguments.length?fl.apply(null,arguments):3===arguments.length?ll.apply(null,arguments):4===arguments.length?kg.apply(null,arguments):5===arguments.length?Rg.apply(null,arguments):void Xt("Invalid extension access syntax")};$a.prototype.extension=Po,Ng.forEach(function(t){t.extensions.forEach(function(e){ll(t.type,e.name,e.impl)})});var cl=function t(){if(!(this instanceof t))return new t;this.length=0},Rn=cl.prototype;Rn.instanceString=function(){return"stylesheet"},Rn.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Rn.css=function(t,e){var r=this.length-1;if(Y(t))this[r].properties.push({name:t,value:e});else if(fe(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(null!=s){var l=fr.properties[o]||fr.properties[Kt(o)];null!=l&&this[r].properties.push({name:l.name,value:s})}}return this},Rn.style=Rn.css,Rn.generateStyle=function(t){var e=new fr(t);return this.appendToStyle(e)},Rn.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],a=r.properties;t.selector(r.selector);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var kn=function(e){return void 0===e&&(e={}),fe(e)?new $a(e):Y(e)?Po.apply(Po,arguments):void 0};return kn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(kn),t.apply(null,e),this},kn.warnings=function(t){return Ho(t)},kn.version="3.23.0",kn.stylesheet=kn.Stylesheet=cl,kn}()},4465:function(Ir){Ir.exports=function(ze){var He={};function Ee(U){if(He[U])return He[U].exports;var P=He[U]={i:U,l:!1,exports:{}};return ze[U].call(P.exports,P,P.exports,Ee),P.l=!0,P.exports}return Ee.m=ze,Ee.c=He,Ee.i=function(U){return U},Ee.d=function(U,P,T){Ee.o(U,P)||Object.defineProperty(U,P,{configurable:!1,enumerable:!0,get:T})},Ee.n=function(U){var P=U&&U.__esModule?function(){return U.default}:function(){return U};return Ee.d(P,"a",P),P},Ee.o=function(U,P){return Object.prototype.hasOwnProperty.call(U,P)},Ee.p="",Ee(Ee.s=26)}([function(ze,He,Ee){"use strict";function U(){}U.QUALITY=1,U.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,U.DEFAULT_INCREMENTAL=!1,U.DEFAULT_ANIMATION_ON_LAYOUT=!0,U.DEFAULT_ANIMATION_DURING_LAYOUT=!1,U.DEFAULT_ANIMATION_PERIOD=50,U.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,U.DEFAULT_GRAPH_MARGIN=15,U.NODE_DIMENSIONS_INCLUDE_LABELS=!1,U.SIMPLE_NODE_HALF_SIZE=(U.SIMPLE_NODE_SIZE=40)/2,U.EMPTY_COMPOUND_NODE_SIZE=40,U.MIN_EDGE_LENGTH=1,U.INITIAL_WORLD_BOUNDARY=(U.WORLD_BOUNDARY=1e6)/1e3,U.WORLD_CENTER_X=1200,U.WORLD_CENTER_Y=900,ze.exports=U},function(ze,He,Ee){"use strict";var U=Ee(2),P=Ee(8),T=Ee(9);function S($,R,Z){U.call(this,Z),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=Z,this.bendpoints=[],this.source=$,this.target=R}for(var M in S.prototype=Object.create(U.prototype),U)S[M]=U[M];S.prototype.getSource=function(){return this.source},S.prototype.getTarget=function(){return this.target},S.prototype.isInterGraph=function(){return this.isInterGraph},S.prototype.getLength=function(){return this.length},S.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},S.prototype.getBendpoints=function(){return this.bendpoints},S.prototype.getLca=function(){return this.lca},S.prototype.getSourceInLca=function(){return this.sourceInLca},S.prototype.getTargetInLca=function(){return this.targetInLca},S.prototype.getOtherEnd=function($){if(this.source===$)return this.target;if(this.target===$)return this.source;throw"Node is not incident with this edge"},S.prototype.getOtherEndInGraph=function($,R){for(var Z=this.getOtherEnd($),C=R.getGraphManager().getRoot();;){if(Z.getOwner()==R)return Z;if(Z.getOwner()==C)break;Z=Z.getOwner().getParent()}return null},S.prototype.updateLength=function(){var $=new Array(4);this.isOverlapingSourceAndTarget=P.getIntersection(this.target.getRect(),this.source.getRect(),$),this.isOverlapingSourceAndTarget||(this.lengthX=$[0]-$[2],this.lengthY=$[1]-$[3],Math.abs(this.lengthX)<1&&(this.lengthX=T.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=T.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},S.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=T.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=T.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},ze.exports=S},function(ze,He,Ee){"use strict";ze.exports=function U(P){this.vGraphObject=P}},function(ze,He,Ee){"use strict";var U=Ee(2),P=Ee(10),T=Ee(13),S=Ee(0),M=Ee(16),$=Ee(4);function R(C,k,G,j){null==G&&null==j&&(j=k),U.call(this,j),null!=C.graphManager&&(C=C.graphManager),this.estimatedSize=P.MIN_VALUE,this.inclusionTreeDepth=P.MAX_VALUE,this.vGraphObject=j,this.edges=[],this.graphManager=C,this.rect=null!=G&&null!=k?new T(k.x,k.y,G.width,G.height):new T}for(var Z in R.prototype=Object.create(U.prototype),U)R[Z]=U[Z];R.prototype.getEdges=function(){return this.edges},R.prototype.getChild=function(){return this.child},R.prototype.getOwner=function(){return this.owner},R.prototype.getWidth=function(){return this.rect.width},R.prototype.setWidth=function(C){this.rect.width=C},R.prototype.getHeight=function(){return this.rect.height},R.prototype.setHeight=function(C){this.rect.height=C},R.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},R.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},R.prototype.getCenter=function(){return new $(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},R.prototype.getLocation=function(){return new $(this.rect.x,this.rect.y)},R.prototype.getRect=function(){return this.rect},R.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},R.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},R.prototype.setRect=function(C,k){this.rect.x=C.x,this.rect.y=C.y,this.rect.width=k.width,this.rect.height=k.height},R.prototype.setCenter=function(C,k){this.rect.x=C-this.rect.width/2,this.rect.y=k-this.rect.height/2},R.prototype.setLocation=function(C,k){this.rect.x=C,this.rect.y=k},R.prototype.moveBy=function(C,k){this.rect.x+=C,this.rect.y+=k},R.prototype.getEdgeListToNode=function(C){var k=[],j=this;return j.edges.forEach(function(W){if(W.target==C){if(W.source!=j)throw"Incorrect edge source!";k.push(W)}}),k},R.prototype.getEdgesBetween=function(C){var k=[],j=this;return j.edges.forEach(function(W){if(W.source!=j&&W.target!=j)throw"Incorrect edge source and/or target";(W.target==C||W.source==C)&&k.push(W)}),k},R.prototype.getNeighborsList=function(){var C=new Set,k=this;return k.edges.forEach(function(G){if(G.source==k)C.add(G.target);else{if(G.target!=k)throw"Incorrect incidency!";C.add(G.source)}}),C},R.prototype.withChildren=function(){var C=new Set;if(C.add(this),null!=this.child)for(var j=this.child.getNodes(),W=0;W<j.length;W++)j[W].withChildren().forEach(function(le){C.add(le)});return C},R.prototype.getNoOfChildren=function(){var C=0;if(null==this.child)C=1;else for(var G=this.child.getNodes(),j=0;j<G.length;j++)C+=G[j].getNoOfChildren();return 0==C&&(C=1),C},R.prototype.getEstimatedSize=function(){if(this.estimatedSize==P.MIN_VALUE)throw"assert failed";return this.estimatedSize},R.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},R.prototype.scatter=function(){var C,k,G=-S.INITIAL_WORLD_BOUNDARY,j=S.INITIAL_WORLD_BOUNDARY;C=S.WORLD_CENTER_X+M.nextDouble()*(j-G)+G;var W=-S.INITIAL_WORLD_BOUNDARY,le=S.INITIAL_WORLD_BOUNDARY;k=S.WORLD_CENTER_Y+M.nextDouble()*(le-W)+W,this.rect.x=C,this.rect.y=k},R.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var C=this.getChild();if(C.updateBounds(!0),this.rect.x=C.getLeft(),this.rect.y=C.getTop(),this.setWidth(C.getRight()-C.getLeft()),this.setHeight(C.getBottom()-C.getTop()),S.NODE_DIMENSIONS_INCLUDE_LABELS){var k=C.getRight()-C.getLeft(),G=C.getBottom()-C.getTop();this.labelWidth>k&&(this.rect.x-=(this.labelWidth-k)/2,this.setWidth(this.labelWidth)),this.labelHeight>G&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-G)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-G),this.setHeight(this.labelHeight))}}},R.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==P.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},R.prototype.transform=function(C){var k=this.rect.x;k>S.WORLD_BOUNDARY?k=S.WORLD_BOUNDARY:k<-S.WORLD_BOUNDARY&&(k=-S.WORLD_BOUNDARY);var G=this.rect.y;G>S.WORLD_BOUNDARY?G=S.WORLD_BOUNDARY:G<-S.WORLD_BOUNDARY&&(G=-S.WORLD_BOUNDARY);var j=new $(k,G),W=C.inverseTransformPoint(j);this.setLocation(W.x,W.y)},R.prototype.getLeft=function(){return this.rect.x},R.prototype.getRight=function(){return this.rect.x+this.rect.width},R.prototype.getTop=function(){return this.rect.y},R.prototype.getBottom=function(){return this.rect.y+this.rect.height},R.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},ze.exports=R},function(ze,He,Ee){"use strict";function U(P,T){null==P&&null==T?(this.x=0,this.y=0):(this.x=P,this.y=T)}U.prototype.getX=function(){return this.x},U.prototype.getY=function(){return this.y},U.prototype.setX=function(P){this.x=P},U.prototype.setY=function(P){this.y=P},U.prototype.getDifference=function(P){return new DimensionD(this.x-P.x,this.y-P.y)},U.prototype.getCopy=function(){return new U(this.x,this.y)},U.prototype.translate=function(P){return this.x+=P.width,this.y+=P.height,this},ze.exports=U},function(ze,He,Ee){"use strict";var U=Ee(2),P=Ee(10),T=Ee(0),S=Ee(6),M=Ee(3),$=Ee(1),R=Ee(13),Z=Ee(12),C=Ee(11);function k(j,W,le){U.call(this,le),this.estimatedSize=P.MIN_VALUE,this.margin=T.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=j,null!=W&&W instanceof S?this.graphManager=W:null!=W&&W instanceof Layout&&(this.graphManager=W.graphManager)}for(var G in k.prototype=Object.create(U.prototype),U)k[G]=U[G];k.prototype.getNodes=function(){return this.nodes},k.prototype.getEdges=function(){return this.edges},k.prototype.getGraphManager=function(){return this.graphManager},k.prototype.getParent=function(){return this.parent},k.prototype.getLeft=function(){return this.left},k.prototype.getRight=function(){return this.right},k.prototype.getTop=function(){return this.top},k.prototype.getBottom=function(){return this.bottom},k.prototype.isConnected=function(){return this.isConnected},k.prototype.add=function(j,W,le){if(null==W&&null==le){var ae=j;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(ae)>-1)throw"Node already in graph!";return ae.owner=this,this.getNodes().push(ae),ae}var Y=j;if(!(this.getNodes().indexOf(W)>-1&&this.getNodes().indexOf(le)>-1))throw"Source or target not in graph!";if(W.owner!=le.owner||W.owner!=this)throw"Both owners must be this graph!";return W.owner!=le.owner?null:(Y.source=W,Y.target=le,Y.isInterGraph=!1,this.getEdges().push(Y),W.edges.push(Y),le!=W&&le.edges.push(Y),Y)},k.prototype.remove=function(j){var W=j;if(j instanceof M){if(null==W)throw"Node is null!";if(null==W.owner||W.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var le=W.edges.slice(),Y=le.length,te=0;te<Y;te++)(ae=le[te]).isInterGraph?this.graphManager.remove(ae):ae.source.owner.remove(ae);if(-1==(pe=this.nodes.indexOf(W)))throw"Node not in owner node list!";this.nodes.splice(pe,1)}else if(j instanceof $){var ae;if(null==(ae=j))throw"Edge is null!";if(null==ae.source||null==ae.target)throw"Source and/or target is null!";if(null==ae.source.owner||null==ae.target.owner||ae.source.owner!=this||ae.target.owner!=this)throw"Source and/or target owner is invalid!";var pe,fe=ae.source.edges.indexOf(ae),Pe=ae.target.edges.indexOf(ae);if(!(fe>-1&&Pe>-1))throw"Source and/or target doesn't know this edge!";if(ae.source.edges.splice(fe,1),ae.target!=ae.source&&ae.target.edges.splice(Pe,1),-1==(pe=ae.source.owner.getEdges().indexOf(ae)))throw"Not in owner's edge list!";ae.source.owner.getEdges().splice(pe,1)}},k.prototype.updateLeftTop=function(){for(var le,ae,Y,j=P.MAX_VALUE,W=P.MAX_VALUE,te=this.getNodes(),pe=te.length,fe=0;fe<pe;fe++){var Pe=te[fe];j>(le=Pe.getTop())&&(j=le),W>(ae=Pe.getLeft())&&(W=ae)}return j==P.MAX_VALUE?null:(Y=null!=te[0].getParent().paddingLeft?te[0].getParent().paddingLeft:this.margin,this.left=W-Y,this.top=j-Y,new Z(this.left,this.top))},k.prototype.updateBounds=function(j){for(var te,pe,fe,Pe,x,W=P.MAX_VALUE,le=-P.MAX_VALUE,ae=P.MAX_VALUE,Y=-P.MAX_VALUE,q=this.nodes,X=q.length,J=0;J<X;J++){var ge=q[J];j&&null!=ge.child&&ge.updateBounds(),W>(te=ge.getLeft())&&(W=te),le<(pe=ge.getRight())&&(le=pe),ae>(fe=ge.getTop())&&(ae=fe),Y<(Pe=ge.getBottom())&&(Y=Pe)}var Me=new R(W,ae,le-W,Y-ae);W==P.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),x=null!=q[0].getParent().paddingLeft?q[0].getParent().paddingLeft:this.margin,this.left=Me.x-x,this.right=Me.x+Me.width+x,this.top=Me.y-x,this.bottom=Me.y+Me.height+x},k.calculateBounds=function(j){for(var te,pe,fe,Pe,W=P.MAX_VALUE,le=-P.MAX_VALUE,ae=P.MAX_VALUE,Y=-P.MAX_VALUE,x=j.length,q=0;q<x;q++){var X=j[q];W>(te=X.getLeft())&&(W=te),le<(pe=X.getRight())&&(le=pe),ae>(fe=X.getTop())&&(ae=fe),Y<(Pe=X.getBottom())&&(Y=Pe)}return new R(W,ae,le-W,Y-ae)},k.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},k.prototype.getEstimatedSize=function(){if(this.estimatedSize==P.MIN_VALUE)throw"assert failed";return this.estimatedSize},k.prototype.calcEstimatedSize=function(){for(var j=0,W=this.nodes,le=W.length,ae=0;ae<le;ae++)j+=W[ae].calcEstimatedSize();return this.estimatedSize=0==j?T.EMPTY_COMPOUND_NODE_SIZE:j/Math.sqrt(this.nodes.length),this.estimatedSize},k.prototype.updateConnected=function(){var j=this;if(0!=this.nodes.length){var Y,te,W=new C,le=new Set,ae=this.nodes[0];for(ae.withChildren().forEach(function(J){W.push(J),le.add(J)});0!==W.length;)for(var fe=(Y=(ae=W.shift()).getEdges()).length,Pe=0;Pe<fe;Pe++)null==(te=Y[Pe].getOtherEndInGraph(ae,this))||le.has(te)||te.withChildren().forEach(function(J){W.push(J),le.add(J)});if(this.isConnected=!1,le.size>=this.nodes.length){var X=0;le.forEach(function(J){J.owner==j&&X++}),X==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},ze.exports=k},function(ze,He,Ee){"use strict";var U,P=Ee(1);function T(S){U=Ee(5),this.layout=S,this.graphs=[],this.edges=[]}T.prototype.addRoot=function(){var S=this.layout.newGraph(),M=this.layout.newNode(null),$=this.add(S,M);return this.setRootGraph($),this.rootGraph},T.prototype.add=function(S,M,$,R,Z){if(null==$&&null==R&&null==Z){if(null==S)throw"Graph is null!";if(null==M)throw"Parent node is null!";if(this.graphs.indexOf(S)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(S),null!=S.parent)throw"Already has a parent!";if(null!=M.child)throw"Already has a child!";return S.parent=M,M.child=S,S}Z=$,$=S;var C=(R=M).getOwner(),k=Z.getOwner();if(null==C||C.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==k||k.getGraphManager()!=this)throw"Target not in this graph mgr!";if(C==k)return $.isInterGraph=!1,C.add($,R,Z);if($.isInterGraph=!0,$.source=R,$.target=Z,this.edges.indexOf($)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push($),null==$.source||null==$.target)throw"Edge source and/or target is null!";if(-1!=$.source.edges.indexOf($)||-1!=$.target.edges.indexOf($))throw"Edge already in source and/or target incidency list!";return $.source.edges.push($),$.target.edges.push($),$},T.prototype.remove=function(S){if(S instanceof U){var M=S;if(M.getGraphManager()!=this)throw"Graph not in this graph mgr";if(M!=this.rootGraph&&(null==M.parent||M.parent.graphManager!=this))throw"Invalid parent node!";for(var R,$=[],Z=($=$.concat(M.getEdges())).length,C=0;C<Z;C++)M.remove(R=$[C]);var k=[];for(Z=(k=k.concat(M.getNodes())).length,C=0;C<Z;C++)M.remove(k[C]);M==this.rootGraph&&this.setRootGraph(null);var j=this.graphs.indexOf(M);this.graphs.splice(j,1),M.parent=null}else if(S instanceof P){if(null==(R=S))throw"Edge is null!";if(!R.isInterGraph)throw"Not an inter-graph edge!";if(null==R.source||null==R.target)throw"Source and/or target is null!";if(-1==R.source.edges.indexOf(R)||-1==R.target.edges.indexOf(R))throw"Source and/or target doesn't know this edge!";if(j=R.source.edges.indexOf(R),R.source.edges.splice(j,1),j=R.target.edges.indexOf(R),R.target.edges.splice(j,1),null==R.source.owner||null==R.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==R.source.owner.getGraphManager().edges.indexOf(R))throw"Not in owner graph manager's edge list!";j=R.source.owner.getGraphManager().edges.indexOf(R),R.source.owner.getGraphManager().edges.splice(j,1)}},T.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},T.prototype.getGraphs=function(){return this.graphs},T.prototype.getAllNodes=function(){if(null==this.allNodes){for(var S=[],M=this.getGraphs(),$=M.length,R=0;R<$;R++)S=S.concat(M[R].getNodes());this.allNodes=S}return this.allNodes},T.prototype.resetAllNodes=function(){this.allNodes=null},T.prototype.resetAllEdges=function(){this.allEdges=null},T.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},T.prototype.getAllEdges=function(){if(null==this.allEdges){for(var S=[],M=this.getGraphs(),R=0;R<M.length;R++)S=S.concat(M[R].getEdges());S=S.concat(this.edges),this.allEdges=S}return this.allEdges},T.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},T.prototype.setAllNodesToApplyGravitation=function(S){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=S},T.prototype.getRoot=function(){return this.rootGraph},T.prototype.setRootGraph=function(S){if(S.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=S,null==S.parent&&(S.parent=this.layout.newNode("Root node"))},T.prototype.getLayout=function(){return this.layout},T.prototype.isOneAncestorOfOther=function(S,M){if(null==S||null==M)throw"assert failed";if(S==M)return!0;for(var R,$=S.getOwner();null!=(R=$.getParent());){if(R==M)return!0;if(null==($=R.getOwner()))break}for($=M.getOwner();null!=(R=$.getParent());){if(R==S)return!0;if(null==($=R.getOwner()))break}return!1},T.prototype.calcLowestCommonAncestors=function(){for(var S,M,$,R,Z,C=this.getAllEdges(),k=C.length,G=0;G<k;G++)if(M=(S=C[G]).source,$=S.target,S.lca=null,S.sourceInLca=M,S.targetInLca=$,M!=$){for(R=M.getOwner();null==S.lca;){for(S.targetInLca=$,Z=$.getOwner();null==S.lca;){if(Z==R){S.lca=Z;break}if(Z==this.rootGraph)break;if(null!=S.lca)throw"assert failed";S.targetInLca=Z.getParent(),Z=S.targetInLca.getOwner()}if(R==this.rootGraph)break;null==S.lca&&(S.sourceInLca=R.getParent(),R=S.sourceInLca.getOwner())}if(null==S.lca)throw"assert failed"}else S.lca=M.getOwner()},T.prototype.calcLowestCommonAncestor=function(S,M){if(S==M)return S.getOwner();for(var $=S.getOwner();null!=$;){for(var R=M.getOwner();null!=R;){if(R==$)return R;R=R.getParent().getOwner()}$=$.getParent().getOwner()}return $},T.prototype.calcInclusionTreeDepths=function(S,M){null==S&&null==M&&(S=this.rootGraph,M=1);for(var $,R=S.getNodes(),Z=R.length,C=0;C<Z;C++)($=R[C]).inclusionTreeDepth=M,null!=$.child&&this.calcInclusionTreeDepths($.child,M+1)},T.prototype.includesInvalidEdge=function(){for(var S,M=this.edges.length,$=0;$<M;$++)if(this.isOneAncestorOfOther((S=this.edges[$]).source,S.target))return!0;return!1},ze.exports=T},function(ze,He,Ee){"use strict";var U=Ee(0);function P(){}for(var T in U)P[T]=U[T];P.MAX_ITERATIONS=2500,P.DEFAULT_EDGE_LENGTH=50,P.DEFAULT_SPRING_STRENGTH=.45,P.DEFAULT_REPULSION_STRENGTH=4500,P.DEFAULT_GRAVITY_STRENGTH=.4,P.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,P.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,P.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,P.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,P.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,P.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,P.COOLING_ADAPTATION_FACTOR=.33,P.ADAPTATION_LOWER_NODE_LIMIT=1e3,P.ADAPTATION_UPPER_NODE_LIMIT=5e3,P.MAX_NODE_DISPLACEMENT=3*(P.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),P.MIN_REPULSION_DIST=P.DEFAULT_EDGE_LENGTH/10,P.CONVERGENCE_CHECK_PERIOD=100,P.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,P.MIN_EDGE_LENGTH=1,P.GRID_CALCULATION_CHECK_PERIOD=10,ze.exports=P},function(ze,He,Ee){"use strict";var U=Ee(12);function P(){}P.calcSeparationAmount=function(T,S,M,$){if(!T.intersects(S))throw"assert failed";var R=new Array(2);this.decideDirectionsForOverlappingNodes(T,S,R),M[0]=Math.min(T.getRight(),S.getRight())-Math.max(T.x,S.x),M[1]=Math.min(T.getBottom(),S.getBottom())-Math.max(T.y,S.y),T.getX()<=S.getX()&&T.getRight()>=S.getRight()?M[0]+=Math.min(S.getX()-T.getX(),T.getRight()-S.getRight()):S.getX()<=T.getX()&&S.getRight()>=T.getRight()&&(M[0]+=Math.min(T.getX()-S.getX(),S.getRight()-T.getRight())),T.getY()<=S.getY()&&T.getBottom()>=S.getBottom()?M[1]+=Math.min(S.getY()-T.getY(),T.getBottom()-S.getBottom()):S.getY()<=T.getY()&&S.getBottom()>=T.getBottom()&&(M[1]+=Math.min(T.getY()-S.getY(),S.getBottom()-T.getBottom()));var Z=Math.abs((S.getCenterY()-T.getCenterY())/(S.getCenterX()-T.getCenterX()));S.getCenterY()===T.getCenterY()&&S.getCenterX()===T.getCenterX()&&(Z=1);var C=Z*M[0],k=M[1]/Z;M[0]<k?k=M[0]:C=M[1],M[0]=-1*R[0]*(k/2+$),M[1]=-1*R[1]*(C/2+$)},P.decideDirectionsForOverlappingNodes=function(T,S,M){M[0]=T.getCenterX()<S.getCenterX()?-1:1,M[1]=T.getCenterY()<S.getCenterY()?-1:1},P.getIntersection2=function(T,S,M){var $=T.getCenterX(),R=T.getCenterY(),Z=S.getCenterX(),C=S.getCenterY();if(T.intersects(S))return M[0]=$,M[1]=R,M[2]=Z,M[3]=C,!0;var k=T.getX(),G=T.getY(),j=T.getRight(),W=T.getX(),le=T.getBottom(),ae=T.getRight(),Y=T.getWidthHalf(),te=T.getHeightHalf(),pe=S.getX(),fe=S.getY(),Pe=S.getRight(),x=S.getX(),q=S.getBottom(),X=S.getRight(),J=S.getWidthHalf(),ge=S.getHeightHalf(),Me=!1,Fe=!1;if($===Z){if(R>C)return M[0]=$,M[1]=G,M[2]=Z,M[3]=q,!1;if(R<C)return M[0]=$,M[1]=le,M[2]=Z,M[3]=fe,!1}else if(R===C){if($>Z)return M[0]=k,M[1]=R,M[2]=Pe,M[3]=C,!1;if($<Z)return M[0]=j,M[1]=R,M[2]=pe,M[3]=C,!1}else{var _e=T.height/T.width,st=S.height/S.width,at=(C-R)/(Z-$),Rt=void 0,zt=void 0,lt=void 0,Tt=void 0;if(-_e===at?$>Z?(M[0]=W,M[1]=le,Me=!0):(M[0]=j,M[1]=G,Me=!0):_e===at&&($>Z?(M[0]=k,M[1]=G,Me=!0):(M[0]=ae,M[1]=le,Me=!0)),-st===at?Z>$?(M[2]=x,M[3]=q,Fe=!0):(M[2]=Pe,M[3]=fe,Fe=!0):st===at&&(Z>$?(M[2]=pe,M[3]=fe,Fe=!0):(M[2]=X,M[3]=q,Fe=!0)),Me&&Fe)return!1;if($>Z?R>C?(Rt=this.getCardinalDirection(_e,at,4),zt=this.getCardinalDirection(st,at,2)):(Rt=this.getCardinalDirection(-_e,at,3),zt=this.getCardinalDirection(-st,at,1)):R>C?(Rt=this.getCardinalDirection(-_e,at,1),zt=this.getCardinalDirection(-st,at,3)):(Rt=this.getCardinalDirection(_e,at,2),zt=this.getCardinalDirection(st,at,4)),!Me)switch(Rt){case 1:lt=G,M[0]=$+-te/at,M[1]=lt;break;case 2:lt=R+Y*at,M[0]=ae,M[1]=lt;break;case 3:lt=le,M[0]=$+te/at,M[1]=lt;break;case 4:lt=R+-Y*at,M[0]=W,M[1]=lt}if(!Fe)switch(zt){case 1:Tt=fe,M[2]=Z+-ge/at,M[3]=Tt;break;case 2:Tt=C+J*at,M[2]=X,M[3]=Tt;break;case 3:Tt=q,M[2]=Z+ge/at,M[3]=Tt;break;case 4:Tt=C+-J*at,M[2]=x,M[3]=Tt}}return!1},P.getCardinalDirection=function(T,S,M){return T>S?M:1+M%4},P.getIntersection=function(T,S,M,$){if(null==$)return this.getIntersection2(T,S,M);var te,pe,fe,Pe,x,q,X,R=T.x,Z=T.y,C=S.x,k=S.y,G=M.x,j=M.y,W=$.x,le=$.y;return x=C*Z-R*k,q=W*j-G*le,0==(X=(te=k-Z)*(Pe=G-W)-(pe=le-j)*(fe=R-C))?null:new U((fe*q-Pe*x)/X,(pe*x-te*q)/X)},P.angleOfVector=function(T,S,M,$){var R=void 0;return T!==M?(R=Math.atan(($-S)/(M-T)),M<T?R+=Math.PI:$<S&&(R+=this.TWO_PI)):R=$<S?this.ONE_AND_HALF_PI:this.HALF_PI,R},P.doIntersect=function(T,S,M,$){var R=T.x,Z=T.y,C=S.x,k=S.y,G=M.x,j=M.y,W=$.x,le=$.y,ae=(C-R)*(le-j)-(W-G)*(k-Z);if(0===ae)return!1;var Y=((le-j)*(W-R)+(G-W)*(le-Z))/ae,te=((Z-k)*(W-R)+(C-R)*(le-Z))/ae;return 0<Y&&Y<1&&0<te&&te<1},P.HALF_PI=.5*Math.PI,P.ONE_AND_HALF_PI=1.5*Math.PI,P.TWO_PI=2*Math.PI,P.THREE_PI=3*Math.PI,ze.exports=P},function(ze,He,Ee){"use strict";function U(){}U.sign=function(P){return P>0?1:P<0?-1:0},U.floor=function(P){return P<0?Math.ceil(P):Math.floor(P)},U.ceil=function(P){return P<0?Math.floor(P):Math.ceil(P)},ze.exports=U},function(ze,He,Ee){"use strict";function U(){}U.MAX_VALUE=2147483647,U.MIN_VALUE=-2147483648,ze.exports=U},function(ze,He,Ee){"use strict";var U=function(){function R(Z,C){for(var k=0;k<C.length;k++){var G=C[k];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Z,G.key,G)}}return function(Z,C,k){return C&&R(Z.prototype,C),k&&R(Z,k),Z}}();var T=function(Z){return{value:Z,next:null,prev:null}},S=function(Z,C,k,G){return null!==Z?Z.next=C:G.head=C,null!==k?k.prev=C:G.tail=C,C.prev=Z,C.next=k,G.length++,C},M=function(Z,C){var k=Z.prev,G=Z.next;return null!==k?k.next=G:C.head=G,null!==G?G.prev=k:C.tail=k,Z.prev=Z.next=null,C.length--,Z},$=function(){function R(Z){var C=this;(function P(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,R),this.length=0,this.head=null,this.tail=null,Z?.forEach(function(k){return C.push(k)})}return U(R,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(C,k){return S(k.prev,T(C),k,this)}},{key:"insertAfter",value:function(C,k){return S(k,T(C),k.next,this)}},{key:"insertNodeBefore",value:function(C,k){return S(k.prev,C,k,this)}},{key:"insertNodeAfter",value:function(C,k){return S(k,C,k.next,this)}},{key:"push",value:function(C){return S(this.tail,T(C),null,this)}},{key:"unshift",value:function(C){return S(null,T(C),this.head,this)}},{key:"remove",value:function(C){return M(C,this)}},{key:"pop",value:function(){return M(this.tail,this).value}},{key:"popNode",value:function(){return M(this.tail,this)}},{key:"shift",value:function(){return M(this.head,this).value}},{key:"shiftNode",value:function(){return M(this.head,this)}},{key:"get_object_at",value:function(C){if(C<=this.length()){for(var k=1,G=this.head;k<C;)G=G.next,k++;return G.value}}},{key:"set_object_at",value:function(C,k){if(C<=this.length()){for(var G=1,j=this.head;G<C;)j=j.next,G++;j.value=k}}}]),R}();ze.exports=$},function(ze,He,Ee){"use strict";function U(P,T,S){this.x=null,this.y=null,null==P&&null==T&&null==S?(this.x=0,this.y=0):"number"==typeof P&&"number"==typeof T&&null==S?(this.x=P,this.y=T):"Point"==P.constructor.name&&null==T&&null==S&&(this.x=(S=P).x,this.y=S.y)}U.prototype.getX=function(){return this.x},U.prototype.getY=function(){return this.y},U.prototype.getLocation=function(){return new U(this.x,this.y)},U.prototype.setLocation=function(P,T,S){"Point"==P.constructor.name&&null==T&&null==S?this.setLocation((S=P).x,S.y):"number"==typeof P&&"number"==typeof T&&null==S&&(parseInt(P)==P&&parseInt(T)==T?this.move(P,T):(this.x=Math.floor(P+.5),this.y=Math.floor(T+.5)))},U.prototype.move=function(P,T){this.x=P,this.y=T},U.prototype.translate=function(P,T){this.x+=P,this.y+=T},U.prototype.equals=function(P){return"Point"==P.constructor.name?this.x==P.x&&this.y==P.y:this==P},U.prototype.toString=function(){return(new U).constructor.name+"[x="+this.x+",y="+this.y+"]"},ze.exports=U},function(ze,He,Ee){"use strict";function U(P,T,S,M){this.x=0,this.y=0,this.width=0,this.height=0,null!=P&&null!=T&&null!=S&&null!=M&&(this.x=P,this.y=T,this.width=S,this.height=M)}U.prototype.getX=function(){return this.x},U.prototype.setX=function(P){this.x=P},U.prototype.getY=function(){return this.y},U.prototype.setY=function(P){this.y=P},U.prototype.getWidth=function(){return this.width},U.prototype.setWidth=function(P){this.width=P},U.prototype.getHeight=function(){return this.height},U.prototype.setHeight=function(P){this.height=P},U.prototype.getRight=function(){return this.x+this.width},U.prototype.getBottom=function(){return this.y+this.height},U.prototype.intersects=function(P){return!(this.getRight()<P.x||this.getBottom()<P.y||P.getRight()<this.x||P.getBottom()<this.y)},U.prototype.getCenterX=function(){return this.x+this.width/2},U.prototype.getMinX=function(){return this.getX()},U.prototype.getMaxX=function(){return this.getX()+this.width},U.prototype.getCenterY=function(){return this.y+this.height/2},U.prototype.getMinY=function(){return this.getY()},U.prototype.getMaxY=function(){return this.getY()+this.height},U.prototype.getWidthHalf=function(){return this.width/2},U.prototype.getHeightHalf=function(){return this.height/2},ze.exports=U},function(ze,He,Ee){"use strict";var U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function P(){}P.lastID=0,P.createID=function(T){return P.isPrimitive(T)?T:(null!=T.uniqueID||(T.uniqueID=P.getString(),P.lastID++),T.uniqueID)},P.getString=function(T){return null==T&&(T=P.lastID),"Object#"+T},P.isPrimitive=function(T){var S=typeof T>"u"?"undefined":U(T);return null==T||"object"!=S&&"function"!=S},ze.exports=P},function(ze,He,Ee){"use strict";function U(G){if(Array.isArray(G)){for(var j=0,W=Array(G.length);j<G.length;j++)W[j]=G[j];return W}return Array.from(G)}var P=Ee(0),T=Ee(6),S=Ee(3),M=Ee(1),$=Ee(5),R=Ee(4),Z=Ee(17),C=Ee(27);function k(G){C.call(this),this.layoutQuality=P.QUALITY,this.createBendsAsNeeded=P.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=P.DEFAULT_INCREMENTAL,this.animationOnLayout=P.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=P.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=P.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=P.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new T(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=G&&(this.isRemoteUse=G)}k.RANDOM_SEED=1,(k.prototype=Object.create(C.prototype)).getGraphManager=function(){return this.graphManager},k.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},k.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},k.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},k.prototype.newGraphManager=function(){var G=new T(this);return this.graphManager=G,G},k.prototype.newGraph=function(G){return new $(null,this.graphManager,G)},k.prototype.newNode=function(G){return new S(this.graphManager,G)},k.prototype.newEdge=function(G){return new M(null,null,G)},k.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},k.prototype.runLayout=function(){var G;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),G=!this.checkLayoutSuccess()&&this.layout(),"during"!==P.ANIMATE&&(G&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,G)},k.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},k.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var j=this.graphManager.getAllEdges(),W=0;W<j.length;W++);var ae=this.graphManager.getRoot().getNodes();for(W=0;W<ae.length;W++);this.update(this.graphManager.getRoot())}},k.prototype.update=function(G){if(null==G)this.update2();else if(G instanceof S){var j=G;if(null!=j.getChild())for(var W=j.getChild().getNodes(),le=0;le<W.length;le++)update(W[le]);null!=j.vGraphObject&&j.vGraphObject.update(j)}else G instanceof M?null!=G.vGraphObject&&G.vGraphObject.update(G):G instanceof $&&null!=G.vGraphObject&&G.vGraphObject.update(G)},k.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=P.QUALITY,this.animationDuringLayout=P.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=P.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=P.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=P.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=P.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=P.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},k.prototype.transform=function(G){if(null==G)this.transform(new R(0,0));else{var j=new Z,W=this.graphManager.getRoot().updateLeftTop();if(null!=W){j.setWorldOrgX(G.x),j.setWorldOrgY(G.y),j.setDeviceOrgX(W.x),j.setDeviceOrgY(W.y);for(var le=this.getAllNodes(),Y=0;Y<le.length;Y++)le[Y].transform(j)}}},k.prototype.positionNodesRandomly=function(G){if(null==G)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var j,W,le=G.getNodes(),ae=0;ae<le.length;ae++)null==(W=(j=le[ae]).getChild())||0==W.getNodes().length?j.scatter():(this.positionNodesRandomly(W),j.updateBounds())},k.prototype.getFlatForest=function(){for(var G=[],j=!0,W=this.graphManager.getRoot().getNodes(),le=!0,ae=0;ae<W.length;ae++)null!=W[ae].getChild()&&(le=!1);if(!le)return G;var Y=new Set,te=[],pe=new Map,fe=[];for(fe=fe.concat(W);fe.length>0&&j;){for(te.push(fe[0]);te.length>0&&j;){var Pe=te[0];te.splice(0,1),Y.add(Pe);var x=Pe.getEdges();for(ae=0;ae<x.length;ae++){var q=x[ae].getOtherEnd(Pe);if(pe.get(Pe)!=q){if(Y.has(q)){j=!1;break}te.push(q),pe.set(q,Pe)}}}if(j){var X=[].concat(U(Y));for(G.push(X),ae=0;ae<X.length;ae++){var ge=fe.indexOf(X[ae]);ge>-1&&fe.splice(ge,1)}Y=new Set,pe=new Map}else G=[]}return G},k.prototype.createDummyNodesForBendpoints=function(G){for(var j=[],W=G.source,le=this.graphManager.calcLowestCommonAncestor(G.source,G.target),ae=0;ae<G.bendpoints.length;ae++){var Y=this.newNode(null);Y.setRect(new Point(0,0),new Dimension(1,1)),le.add(Y);var te=this.newEdge(null);this.graphManager.add(te,W,Y),j.add(Y),W=Y}return te=this.newEdge(null),this.graphManager.add(te,W,G.target),this.edgeToDummyNodes.set(G,j),G.isInterGraph()?this.graphManager.remove(G):le.remove(G),j},k.prototype.createBendpointsFromDummyNodes=function(){var G=[];G=G.concat(this.graphManager.getAllEdges()),G=[].concat(U(this.edgeToDummyNodes.keys())).concat(G);for(var j=0;j<G.length;j++){var W=G[j];if(W.bendpoints.length>0){for(var le=this.edgeToDummyNodes.get(W),ae=0;ae<le.length;ae++){var Y=le[ae],te=new R(Y.getCenterX(),Y.getCenterY()),pe=W.bendpoints.get(ae);pe.x=te.x,pe.y=te.y,Y.getOwner().remove(Y)}this.graphManager.add(W,W.source,W.target)}}},k.transform=function(G,j,W,le){if(null!=W&&null!=le){var ae=j;return G<=50?ae-=(j-j/W)/50*(50-G):ae+=(j*le-j)/50*(G-50),ae}var pe,fe;return G<=50?(pe=9*j/500,fe=j/10):(pe=9*j/50,fe=-8*j),pe*G+fe},k.findCenterOfTree=function(G){var j=[];j=j.concat(G);var W=[],le=new Map,ae=!1,Y=null;(1==j.length||2==j.length)&&(ae=!0,Y=j[0]);for(var te=0;te<j.length;te++){var fe=(pe=j[te]).getNeighborsList().size;le.set(pe,pe.getNeighborsList().size),1==fe&&W.push(pe)}var Pe=[];for(Pe=Pe.concat(W);!ae;){var x=[];for(x=x.concat(Pe),Pe=[],te=0;te<j.length;te++){var pe,q=j.indexOf(pe=j[te]);q>=0&&j.splice(q,1),pe.getNeighborsList().forEach(function(Me){if(W.indexOf(Me)<0){var _e=le.get(Me)-1;1==_e&&Pe.push(Me),le.set(Me,_e)}})}W=W.concat(Pe),(1==j.length||2==j.length)&&(ae=!0,Y=j[0])}return Y},k.prototype.setGraphManager=function(G){this.graphManager=G},ze.exports=k},function(ze,He,Ee){"use strict";function U(){}U.seed=1,U.x=0,U.nextDouble=function(){return(U.x=1e4*Math.sin(U.seed++))-Math.floor(U.x)},ze.exports=U},function(ze,He,Ee){"use strict";var U=Ee(4);function P(T,S){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}P.prototype.getWorldOrgX=function(){return this.lworldOrgX},P.prototype.setWorldOrgX=function(T){this.lworldOrgX=T},P.prototype.getWorldOrgY=function(){return this.lworldOrgY},P.prototype.setWorldOrgY=function(T){this.lworldOrgY=T},P.prototype.getWorldExtX=function(){return this.lworldExtX},P.prototype.setWorldExtX=function(T){this.lworldExtX=T},P.prototype.getWorldExtY=function(){return this.lworldExtY},P.prototype.setWorldExtY=function(T){this.lworldExtY=T},P.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},P.prototype.setDeviceOrgX=function(T){this.ldeviceOrgX=T},P.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},P.prototype.setDeviceOrgY=function(T){this.ldeviceOrgY=T},P.prototype.getDeviceExtX=function(){return this.ldeviceExtX},P.prototype.setDeviceExtX=function(T){this.ldeviceExtX=T},P.prototype.getDeviceExtY=function(){return this.ldeviceExtY},P.prototype.setDeviceExtY=function(T){this.ldeviceExtY=T},P.prototype.transformX=function(T){var S=0,M=this.lworldExtX;return 0!=M&&(S=this.ldeviceOrgX+(T-this.lworldOrgX)*this.ldeviceExtX/M),S},P.prototype.transformY=function(T){var S=0,M=this.lworldExtY;return 0!=M&&(S=this.ldeviceOrgY+(T-this.lworldOrgY)*this.ldeviceExtY/M),S},P.prototype.inverseTransformX=function(T){var S=0,M=this.ldeviceExtX;return 0!=M&&(S=this.lworldOrgX+(T-this.ldeviceOrgX)*this.lworldExtX/M),S},P.prototype.inverseTransformY=function(T){var S=0,M=this.ldeviceExtY;return 0!=M&&(S=this.lworldOrgY+(T-this.ldeviceOrgY)*this.lworldExtY/M),S},P.prototype.inverseTransformPoint=function(T){return new U(this.inverseTransformX(T.x),this.inverseTransformY(T.y))},ze.exports=P},function(ze,He,Ee){"use strict";var P=Ee(15),T=Ee(7),S=Ee(0),M=Ee(8),$=Ee(9);function R(){P.call(this),this.useSmartIdealEdgeLengthCalculation=T.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=T.DEFAULT_EDGE_LENGTH,this.springConstant=T.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=T.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=T.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=T.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*T.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=T.MAX_ITERATIONS}for(var Z in R.prototype=Object.create(P.prototype),P)R[Z]=P[Z];R.prototype.initParameters=function(){P.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=T.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},R.prototype.calcIdealEdgeLengths=function(){for(var C,k,G,j,W,le,ae=this.getGraphManager().getAllEdges(),Y=0;Y<ae.length;Y++)(C=ae[Y]).idealLength=this.idealEdgeLength,C.isInterGraph&&(G=C.getSource(),j=C.getTarget(),W=C.getSourceInLca().getEstimatedSize(),le=C.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(C.idealLength+=W+le-2*S.SIMPLE_NODE_SIZE),k=C.getLca().getInclusionTreeDepth(),C.idealLength+=T.DEFAULT_EDGE_LENGTH*T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(G.getInclusionTreeDepth()+j.getInclusionTreeDepth()-2*k))},R.prototype.initSpringEmbedder=function(){var C=this.getAllNodes().length;this.incremental?(C>T.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*T.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(C-T.ADAPTATION_LOWER_NODE_LIMIT)/(T.ADAPTATION_UPPER_NODE_LIMIT-T.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-T.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=T.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=C>T.ADAPTATION_LOWER_NODE_LIMIT?Math.max(T.COOLING_ADAPTATION_FACTOR,1-(C-T.ADAPTATION_LOWER_NODE_LIMIT)/(T.ADAPTATION_UPPER_NODE_LIMIT-T.ADAPTATION_LOWER_NODE_LIMIT)*(1-T.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=T.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},R.prototype.calcSpringForces=function(){for(var k,C=this.getAllEdges(),G=0;G<C.length;G++)this.calcSpringForce(k=C[G],k.idealLength)},R.prototype.calcRepulsionForces=function(){var G,j,W,le,Y,C=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ae=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%T.GRID_CALCULATION_CHECK_PERIOD==1&&C&&this.updateGrid(),Y=new Set,G=0;G<ae.length;G++)this.calculateRepulsionForceOfANode(W=ae[G],Y,C,k),Y.add(W);else for(G=0;G<ae.length;G++)for(W=ae[G],j=G+1;j<ae.length;j++)le=ae[j],W.getOwner()==le.getOwner()&&this.calcRepulsionForce(W,le)},R.prototype.calcGravitationalForces=function(){for(var k=this.getAllNodesToApplyGravitation(),G=0;G<k.length;G++)this.calcGravitationalForce(k[G])},R.prototype.moveNodes=function(){for(var C=this.getAllNodes(),G=0;G<C.length;G++)C[G].move()},R.prototype.calcSpringForce=function(C,k){var W,le,ae,Y,G=C.getSource(),j=C.getTarget();if(this.uniformLeafNodeSizes&&null==G.getChild()&&null==j.getChild())C.updateLengthSimple();else if(C.updateLength(),C.isOverlapingSourceAndTarget)return;0!=(W=C.getLength())&&(Y=(le=this.springConstant*(W-k))*(C.lengthY/W),G.springForceX+=ae=le*(C.lengthX/W),G.springForceY+=Y,j.springForceX-=ae,j.springForceY-=Y)},R.prototype.calcRepulsionForce=function(C,k){var ae,Y,te,pe,fe,Pe,x,G=C.getRect(),j=k.getRect(),W=new Array(2),le=new Array(4);if(G.intersects(j)){M.calcSeparationAmount(G,j,W,T.DEFAULT_EDGE_LENGTH/2),x=2*W[1];var q=C.noOfChildren*k.noOfChildren/(C.noOfChildren+k.noOfChildren);C.repulsionForceX-=q*(Pe=2*W[0]),C.repulsionForceY-=q*x,k.repulsionForceX+=q*Pe,k.repulsionForceY+=q*x}else this.uniformLeafNodeSizes&&null==C.getChild()&&null==k.getChild()?(ae=j.getCenterX()-G.getCenterX(),Y=j.getCenterY()-G.getCenterY()):(M.getIntersection(G,j,le),ae=le[2]-le[0],Y=le[3]-le[1]),Math.abs(ae)<T.MIN_REPULSION_DIST&&(ae=$.sign(ae)*T.MIN_REPULSION_DIST),Math.abs(Y)<T.MIN_REPULSION_DIST&&(Y=$.sign(Y)*T.MIN_REPULSION_DIST),te=ae*ae+Y*Y,pe=Math.sqrt(te),x=(fe=this.repulsionConstant*C.noOfChildren*k.noOfChildren/te)*Y/pe,C.repulsionForceX-=Pe=fe*ae/pe,C.repulsionForceY-=x,k.repulsionForceX+=Pe,k.repulsionForceY+=x},R.prototype.calcGravitationalForce=function(C){var k,G,j,W,le,ae,Y,te;G=((k=C.getOwner()).getRight()+k.getLeft())/2,j=(k.getTop()+k.getBottom())/2,W=C.getCenterX()-G,le=C.getCenterY()-j,ae=Math.abs(W)+C.getWidth()/2,Y=Math.abs(le)+C.getHeight()/2,C.getOwner()==this.graphManager.getRoot()?(ae>(te=k.getEstimatedSize()*this.gravityRangeFactor)||Y>te)&&(C.gravitationForceX=-this.gravityConstant*W,C.gravitationForceY=-this.gravityConstant*le):(ae>(te=k.getEstimatedSize()*this.compoundGravityRangeFactor)||Y>te)&&(C.gravitationForceX=-this.gravityConstant*W*this.compoundGravityConstant,C.gravitationForceY=-this.gravityConstant*le*this.compoundGravityConstant)},R.prototype.isConverged=function(){var C,k=!1;return this.totalIterations>this.maxIterations/3&&(k=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),C=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,C||k},R.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},R.prototype.calcNoOfChildrenForAllNodes=function(){for(var C,k=this.graphManager.getAllNodes(),G=0;G<k.length;G++)(C=k[G]).noOfChildren=C.getNoOfChildren()},R.prototype.calcGrid=function(C){var k,G;k=parseInt(Math.ceil((C.getRight()-C.getLeft())/this.repulsionRange)),G=parseInt(Math.ceil((C.getBottom()-C.getTop())/this.repulsionRange));for(var j=new Array(k),W=0;W<k;W++)j[W]=new Array(G);for(W=0;W<k;W++)for(var le=0;le<G;le++)j[W][le]=new Array;return j},R.prototype.addNodeToGrid=function(C,k,G){var j,W,le,ae;j=parseInt(Math.floor((C.getRect().x-k)/this.repulsionRange)),W=parseInt(Math.floor((C.getRect().width+C.getRect().x-k)/this.repulsionRange)),le=parseInt(Math.floor((C.getRect().y-G)/this.repulsionRange)),ae=parseInt(Math.floor((C.getRect().height+C.getRect().y-G)/this.repulsionRange));for(var Y=j;Y<=W;Y++)for(var te=le;te<=ae;te++)this.grid[Y][te].push(C),C.setGridCoordinates(j,W,le,ae)},R.prototype.updateGrid=function(){var C,G=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),C=0;C<G.length;C++)this.addNodeToGrid(G[C],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},R.prototype.calculateRepulsionForceOfANode=function(C,k,G,j){if(this.totalIterations%T.GRID_CALCULATION_CHECK_PERIOD==1&&G||j){var W=new Set;C.surrounding=new Array;for(var le,ae=this.grid,Y=C.startX-1;Y<C.finishX+2;Y++)for(var te=C.startY-1;te<C.finishY+2;te++)if(!(Y<0||te<0||Y>=ae.length||te>=ae[0].length))for(var pe=0;pe<ae[Y][te].length;pe++)if(le=ae[Y][te][pe],C.getOwner()==le.getOwner()&&C!=le&&!k.has(le)&&!W.has(le)){var fe=Math.abs(C.getCenterX()-le.getCenterX())-(C.getWidth()/2+le.getWidth()/2),Pe=Math.abs(C.getCenterY()-le.getCenterY())-(C.getHeight()/2+le.getHeight()/2);fe<=this.repulsionRange&&Pe<=this.repulsionRange&&W.add(le)}C.surrounding=[].concat(function U(C){if(Array.isArray(C)){for(var k=0,G=Array(C.length);k<C.length;k++)G[k]=C[k];return G}return Array.from(C)}(W))}for(Y=0;Y<C.surrounding.length;Y++)this.calcRepulsionForce(C,C.surrounding[Y])},R.prototype.calcRepulsionRange=function(){return 0},ze.exports=R},function(ze,He,Ee){"use strict";var U=Ee(1),P=Ee(7);function T(M,$,R){U.call(this,M,$,R),this.idealLength=P.DEFAULT_EDGE_LENGTH}for(var S in T.prototype=Object.create(U.prototype),U)T[S]=U[S];ze.exports=T},function(ze,He,Ee){"use strict";var U=Ee(3);function P(S,M,$,R){U.call(this,S,M,$,R),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var T in P.prototype=Object.create(U.prototype),U)P[T]=U[T];P.prototype.setGridCoordinates=function(S,M,$,R){this.startX=S,this.finishX=M,this.startY=$,this.finishY=R},ze.exports=P},function(ze,He,Ee){"use strict";function U(P,T){this.width=0,this.height=0,null!==P&&null!==T&&(this.height=T,this.width=P)}U.prototype.getWidth=function(){return this.width},U.prototype.setWidth=function(P){this.width=P},U.prototype.getHeight=function(){return this.height},U.prototype.setHeight=function(P){this.height=P},ze.exports=U},function(ze,He,Ee){"use strict";var U=Ee(14);function P(){this.map={},this.keys=[]}P.prototype.put=function(T,S){var M=U.createID(T);this.contains(M)||(this.map[M]=S,this.keys.push(T))},P.prototype.contains=function(T){return U.createID(T),null!=this.map[T]},P.prototype.get=function(T){var S=U.createID(T);return this.map[S]},P.prototype.keySet=function(){return this.keys},ze.exports=P},function(ze,He,Ee){"use strict";var U=Ee(14);function P(){this.set={}}P.prototype.add=function(T){var S=U.createID(T);this.contains(S)||(this.set[S]=T)},P.prototype.remove=function(T){delete this.set[U.createID(T)]},P.prototype.clear=function(){this.set={}},P.prototype.contains=function(T){return this.set[U.createID(T)]==T},P.prototype.isEmpty=function(){return 0===this.size()},P.prototype.size=function(){return Object.keys(this.set).length},P.prototype.addAllTo=function(T){for(var S=Object.keys(this.set),M=S.length,$=0;$<M;$++)T.push(this.set[S[$]])},P.prototype.size=function(){return Object.keys(this.set).length},P.prototype.addAll=function(T){for(var S=T.length,M=0;M<S;M++)this.add(T[M])},ze.exports=P},function(ze,He,Ee){"use strict";var U=function(){function M($,R){for(var Z=0;Z<R.length;Z++){var C=R[Z];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty($,C.key,C)}}return function($,R,Z){return R&&M($.prototype,R),Z&&M($,Z),$}}();var T=Ee(11),S=function(){function M($,R){(function P(M,$){if(!(M instanceof $))throw new TypeError("Cannot call a class as a function")})(this,M),(null!==R||void 0!==R)&&(this.compareFunction=this._defaultCompareFunction);var Z;Z=$ instanceof T?$.size():$.length,this._quicksort($,0,Z-1)}return U(M,[{key:"_quicksort",value:function(R,Z,C){if(Z<C){var k=this._partition(R,Z,C);this._quicksort(R,Z,k),this._quicksort(R,k+1,C)}}},{key:"_partition",value:function(R,Z,C){for(var k=this._get(R,Z),G=Z,j=C;;){for(;this.compareFunction(k,this._get(R,j));)j--;for(;this.compareFunction(this._get(R,G),k);)G++;if(!(G<j))return j;this._swap(R,G,j),G++,j--}}},{key:"_get",value:function(R,Z){return R instanceof T?R.get_object_at(Z):R[Z]}},{key:"_set",value:function(R,Z,C){R instanceof T?R.set_object_at(Z,C):R[Z]=C}},{key:"_swap",value:function(R,Z,C){var k=this._get(R,Z);this._set(R,Z,this._get(R,C)),this._set(R,C,k)}},{key:"_defaultCompareFunction",value:function(R,Z){return Z>R}}]),M}();ze.exports=S},function(ze,He,Ee){"use strict";var U=function(){function S(M,$){for(var R=0;R<$.length;R++){var Z=$[R];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(M,Z.key,Z)}}return function(M,$,R){return $&&S(M.prototype,$),R&&S(M,R),M}}();var T=function(){function S(M,$){var R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;(function P(S,M){if(!(S instanceof M))throw new TypeError("Cannot call a class as a function")})(this,S),this.sequence1=M,this.sequence2=$,this.match_score=R,this.mismatch_penalty=Z,this.gap_penalty=C,this.iMax=M.length+1,this.jMax=$.length+1,this.grid=new Array(this.iMax);for(var k=0;k<this.iMax;k++){this.grid[k]=new Array(this.jMax);for(var G=0;G<this.jMax;G++)this.grid[k][G]=0}this.tracebackGrid=new Array(this.iMax);for(var j=0;j<this.iMax;j++){this.tracebackGrid[j]=new Array(this.jMax);for(var W=0;W<this.jMax;W++)this.tracebackGrid[j][W]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return U(S,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var $=1;$<this.jMax;$++)this.grid[0][$]=this.grid[0][$-1]+this.gap_penalty,this.tracebackGrid[0][$]=[!1,!1,!0];for(var R=1;R<this.iMax;R++)this.grid[R][0]=this.grid[R-1][0]+this.gap_penalty,this.tracebackGrid[R][0]=[!1,!0,!1];for(var Z=1;Z<this.iMax;Z++)for(var C=1;C<this.jMax;C++){var W=[this.sequence1[Z-1]===this.sequence2[C-1]?this.grid[Z-1][C-1]+this.match_score:this.grid[Z-1][C-1]+this.mismatch_penalty,this.grid[Z-1][C]+this.gap_penalty,this.grid[Z][C-1]+this.gap_penalty],le=this.arrayAllMaxIndexes(W);this.grid[Z][C]=W[le[0]],this.tracebackGrid[Z][C]=[le.includes(0),le.includes(1),le.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var $=[];for($.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});$[0];){var R=$[0],Z=this.tracebackGrid[R.pos[0]][R.pos[1]];Z[0]&&$.push({pos:[R.pos[0]-1,R.pos[1]-1],seq1:this.sequence1[R.pos[0]-1]+R.seq1,seq2:this.sequence2[R.pos[1]-1]+R.seq2}),Z[1]&&$.push({pos:[R.pos[0]-1,R.pos[1]],seq1:this.sequence1[R.pos[0]-1]+R.seq1,seq2:"-"+R.seq2}),Z[2]&&$.push({pos:[R.pos[0],R.pos[1]-1],seq1:"-"+R.seq1,seq2:this.sequence2[R.pos[1]-1]+R.seq2}),0===R.pos[0]&&0===R.pos[1]&&this.alignments.push({sequence1:R.seq1,sequence2:R.seq2}),$.shift()}return this.alignments}},{key:"getAllIndexes",value:function($,R){for(var Z=[],C=-1;-1!==(C=$.indexOf(R,C+1));)Z.push(C);return Z}},{key:"arrayAllMaxIndexes",value:function($){return this.getAllIndexes($,Math.max.apply(null,$))}}]),S}();ze.exports=T},function(ze,He,Ee){"use strict";var U=function(){};U.FDLayout=Ee(18),U.FDLayoutConstants=Ee(7),U.FDLayoutEdge=Ee(19),U.FDLayoutNode=Ee(20),U.DimensionD=Ee(21),U.HashMap=Ee(22),U.HashSet=Ee(23),U.IGeometry=Ee(8),U.IMath=Ee(9),U.Integer=Ee(10),U.Point=Ee(12),U.PointD=Ee(4),U.RandomSeed=Ee(16),U.RectangleD=Ee(13),U.Transform=Ee(17),U.UniqueIDGeneretor=Ee(14),U.Quicksort=Ee(24),U.LinkedList=Ee(11),U.LGraphObject=Ee(2),U.LGraph=Ee(5),U.LEdge=Ee(1),U.LGraphManager=Ee(6),U.LNode=Ee(3),U.Layout=Ee(15),U.LayoutConstants=Ee(0),U.NeedlemanWunsch=Ee(25),ze.exports=U},function(ze,He,Ee){"use strict";function U(){this.listeners=[]}var P=U.prototype;P.addListener=function(T,S){this.listeners.push({event:T,callback:S})},P.removeListener=function(T,S){for(var M=this.listeners.length;M>=0;M--){var $=this.listeners[M];$.event===T&&$.callback===S&&this.listeners.splice(M,1)}},P.emit=function(T,S){for(var M=0;M<this.listeners.length;M++){var $=this.listeners[M];T===$.event&&$.callback(S)}},ze.exports=U}])},1569:(Ir,ze,He)=>{He.d(ze,{Z:()=>Za});var ne,_,K,ie,Ae,ee,he,be,Ee=/\r\n?/g,U=/\t/g,P=/\f/g,T=function(_){return _.replace(Ee,"\n").replace(P,"").replace(U,"    ")},S=function(_,K){var ie=_||{};if(null!=K)for(var Ae in K)Object.prototype.hasOwnProperty.call(K,Ae)&&(ie[Ae]=K[Ae]);return ie},M=function(_,K){var ie=Object.keys(_).filter(function(he){var De=_[he];if(null==De||null==De.match)return!1;var be=De.order;return("number"!=typeof be||!isFinite(be))&&typeof console<"u"&&console.warn("simple-markdown: Invalid order for rule `"+he+"`: "+String(be)),!0});ie.sort(function(he,De){var be=_[he],Ge=_[De],qe=be.order,Ke=Ge.order;if(qe!==Ke)return qe-Ke;var ot=be.quality?0:1,ct=Ge.quality?0:1;return ot!==ct?ot-ct:he<De?-1:he>De?1:0});var Ae,ee=function he(De,be){var Ge=[];for(Ae=be=be||Ae;De;){var qe=null,Ke=null,ot=null,ct=NaN,Pt=0,Dt=ie[0],vt=_[Dt];do{var Gt=vt.order,Ht=null==be.prevCapture?"":be.prevCapture[0],Tr=vt.match(De,be,Ht);if(Tr){var Sr=vt.quality?vt.quality(Tr,be,Ht):0;Sr<=ct||(qe=Dt,Ke=vt,ot=Tr,ct=Sr)}Pt++,vt=_[Dt=ie[Pt]]}while(vt&&(!ot||vt.order===Gt&&vt.quality));if(null==Ke||null==ot)throw new Error("Could not find a matching rule for the below content. The rule with highest `order` should always match content provided to it. Check the definition of `match` for '"+ie[ie.length-1]+"'. It seems to not match the following source:\n"+De);if(ot.index)throw new Error("`match` must return a capture starting at index 0 (the current parse index). Did you forget a ^ at the start of the RegExp?");var Qt=Ke.parse(ot,he,be);if(Array.isArray(Qt))Array.prototype.push.apply(Ge,Qt);else{if(null==Qt||"object"!=typeof Qt)throw new Error("parse() function returned invalid parse result: '".concat(Qt,"'"));null==Qt.type&&(Qt.type=qe),Ge.push(Qt)}be.prevCapture=ot,De=De.substring(be.prevCapture[0].length)}return Ge};return function(De,be){return!(Ae=S(be,K)).inline&&!Ae.disableAutoBlockNewlines&&(De+="\n\n"),Ae.prevCapture=null,ee(T(De),Ae)}},$=function(_){var K=function(Ae,ee,re){return ee.inline?_.exec(Ae):null};return K.regex=_,K},R=function(_){var K=function(Ae,ee){return ee.inline?null:_.exec(Ae)};return K.regex=_,K},Z=function(_){var K=function(Ae,ee){return _.exec(Ae)};return K.regex=_,K},C="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,k=function(_,K,ie){return{$$typeof:C,type:_,key:K??void 0,ref:null,props:ie,_owner:null}},G=function(_,K,ie,Ae){ie=ie||{},Ae=!(typeof Ae<"u")||Ae;var ee="";for(var re in ie){var he=ie[re];Object.prototype.hasOwnProperty.call(ie,re)&&he&&(ee+=" "+Y(re)+'="'+Y(he)+'"')}var De="<"+_+ee+">";return Ae?De+K+"</"+_+">":De},j={},W=function(_){if(null==_)return null;try{var K=new URL(_,"https://localhost").protocol;if(0===K.indexOf("javascript:")||0===K.indexOf("vbscript:")||0===K.indexOf("data:"))return null}catch{return null}return _},le=/[<>&"']/g,ae={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#96;"},Y=function(_){return String(_).replace(le,function(K){return ae[K]})},te=/\\([^0-9A-Za-z\s])/g,pe=function(_){return _.replace(te,"$1")},fe=function(_,K,ie){var Ae=ie.inline||!1;ie.inline=!0;var ee=_(K,ie);return ie.inline=Ae,ee},x=function(_,K,ie){return{content:fe(K,_[1],ie)}},q=function(){return{}},X="(?:[*+-]|\\d+\\.)",J="( *)("+X+") +",ge=new RegExp("^"+J),Me=new RegExp(J+"[^\\n]*(?:\\n(?!\\1"+X+" )[^\\n]*)*(\n|$)","gm"),Fe=/\n{2,}$/,_e=/^ (?= *`)|(` *) $/g,st=Fe,at=/ *\n+$/,Rt=new RegExp("^( *)("+X+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+X+" )\\n*|\\s*\n*$)"),zt=/(?:^|\n)( *)$/,We=(ne=/^ *\| *| *\| *$/g,_=/ *$/,K=/^ *-+: *$/,ie=/^ *:-+: *$/,Ae=/^ *:-+ *$/,ee=function(qe){return K.test(qe)?"right":ie.test(qe)?"center":Ae.test(qe)?"left":null},he=function(qe,Ke,ot,ct){var Pt=ot.inTable;ot.inTable=!0;var Dt=Ke(qe.trim(),ot);ot.inTable=Pt;var vt=[[]];return Dt.forEach(function(Gt,Ht){"tableSeparator"===Gt.type?(!ct||0!==Ht&&Ht!==Dt.length-1)&&vt.push([]):("text"===Gt.type&&(null==Dt[Ht+1]||"tableSeparator"===Dt[Ht+1].type)&&(Gt.content=Gt.content.replace(_,"")),vt[vt.length-1].push(Gt))}),vt},{parseTable:(be=function(qe){return function(Ke,ot,ct){ct.inline=!0;var Pt=he(Ke[1],ot,ct,qe),Dt=function(qe,Ke,ot,ct){return ct&&(qe=qe.replace(ne,"")),qe.trim().split("|").map(ee)}(Ke[2],0,0,qe),vt=function(qe,Ke,ot,ct){return qe.trim().split("\n").map(function(Dt){return he(Dt,Ke,ot,ct)})}(Ke[3],ot,ct,qe);return ct.inline=!1,{type:"table",header:Pt,align:Dt,cells:vt}}})(!0),parseNpTable:be(!1),TABLE_REGEX:/^ *(\|.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/}),lt="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",bt="\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",Tt=/mailto:/i,Kt=function(_,K,ie){var Ae=(_[2]||_[1]).replace(/\s+/g," ").toLowerCase();if(K._defs&&K._defs[Ae]){var ee=K._defs[Ae];ie.target=ee.target,ie.title=ee.title}return K._refs=K._refs||{},K._refs[Ae]=K._refs[Ae]||[],K._refs[Ae].push(ie),ie},it=0,Yt={Array:{react:function(_,K,ie){for(var Ae=ie.key,ee=[],re=0,he=0;re<_.length;re++,he++){ie.key=""+re;var De=_[re];if("text"===De.type)for(De={type:"text",content:De.content};re+1<_.length&&"text"===_[re+1].type;re++)De.content+=_[re+1].content;ee.push(K(De,ie))}return ie.key=Ae,ee},html:function(_,K,ie){for(var Ae="",ee=0;ee<_.length;ee++){var re=_[ee];if("text"===re.type)for(re={type:"text",content:re.content};ee+1<_.length&&"text"===_[ee+1].type;ee++)re.content+=_[ee+1].content;Ae+=K(re,ie)}return Ae}},heading:{order:it++,match:R(/^ *(#{1,6})([^\n]+?)#* *(?:\n *)+\n/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{level:ne[1].length,content:fe(_,ne[2].trim(),K)}}),react:function(_,K,ie){return k("h"+_.level,ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("h"+_.level,K(_.content,ie))}},nptable:{order:it++,match:R(We.NPTABLE_REGEX),parse:We.parseNpTable,react:null,html:null},lheading:{order:it++,match:R(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{type:"heading",level:"="===ne[2]?1:2,content:fe(_,ne[1],K)}}),react:null,html:null},hr:{order:it++,match:R(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:q,react:function(_,K,ie){return k("hr",ie.key,j)},html:function(_,K,ie){return"<hr>"}},codeBlock:{order:it++,match:R(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{lang:void 0,content:ne[0].replace(/^    /gm,"").replace(/\n+$/,"")}}),react:function(_,K,ie){return k("pre",ie.key,{children:k("code",null,{className:_.lang?"markdown-code-"+_.lang:void 0,children:_.content})})},html:function(_,K,ie){var Ae=_.lang?"markdown-code-"+_.lang:void 0,ee=G("code",Y(_.content),{class:Ae});return G("pre",ee)}},fence:{order:it++,match:R(/^ *(`{3,}|~{3,}) *(?:(\S+) *)?\n([\s\S]+?)\n?\1 *(?:\n *)+\n/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{type:"codeBlock",lang:ne[2]||void 0,content:ne[3]}}),react:null,html:null},blockQuote:{order:it++,match:R(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{content:_(ne[0].replace(/^ *> ?/gm,""),K)}}),react:function(_,K,ie){return k("blockquote",ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("blockquote",K(_.content,ie))}},list:{order:it++,match:function(_,K){var Ae=zt.exec(null==K.prevCapture?"":K.prevCapture[0]);return!Ae||!K._list&&K.inline?null:Rt.exec(_=Ae[1]+_)},parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){var ie=ne[2],Ae=ie.length>1,ee=Ae?+ie:void 0,re=ne[0].replace(st,"\n").match(Me),he=!1,De=re.map(function(be,Ge){var qe=ge.exec(be),ot=new RegExp("^ {1,"+(qe?qe[0].length:0)+"}","gm"),ct=be.replace(ot,"").replace(ge,""),Pt=Ge===re.length-1,vt=-1!==ct.indexOf("\n\n")||Pt&&he;he=vt;var Tr,Gt=K.inline,Ht=K._list;K._list=!0,vt?(K.inline=!1,Tr=ct.replace(at,"\n\n")):(K.inline=!0,Tr=ct.replace(at,""));var Sr=_(Tr,K);return K.inline=Gt,K._list=Ht,Sr});return{ordered:Ae,start:ee,items:De}}),react:function(_,K,ie){return k(_.ordered?"ol":"ul",ie.key,{start:_.start,children:_.items.map(function(ee,re){return k("li",""+re,{children:K(ee,ie)})})})},html:function(_,K,ie){var Ae=_.items.map(function(he){return G("li",K(he,ie))}).join("");return G(_.ordered?"ol":"ul",Ae,{start:_.start})}},def:{order:it++,match:R(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)*/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){var ie=ne[1].replace(/\s+/g," ").toLowerCase(),Ae=ne[2],ee=ne[3];return K._refs&&K._refs[ie]&&K._refs[ie].forEach(function(re){re.target=Ae,re.title=ee}),K._defs=K._defs||{},K._defs[ie]={target:Ae,title:ee},{def:ie,target:Ae,title:ee}}),react:function(){return null},html:function(){return""}},table:{order:it++,match:R(We.TABLE_REGEX),parse:We.parseTable,react:function(_,K,ie){var Ae=function(De){return null==_.align[De]?{}:{textAlign:_.align[De]}},ee=_.header.map(function(he,De){return k("th",""+De,{style:Ae(De),scope:"col",children:K(he,ie)})}),re=_.cells.map(function(he,De){return k("tr",""+De,{children:he.map(function(be,Ge){return k("td",""+Ge,{style:Ae(Ge),children:K(be,ie)})})})});return k("table",ie.key,{children:[k("thead","thead",{children:k("tr",null,{children:ee})}),k("tbody","tbody",{children:re})]})},html:function(_,K,ie){var Ae=function(Ge){return null==_.align[Ge]?"":"text-align:"+_.align[Ge]+";"},ee=_.header.map(function(be,Ge){return G("th",K(be,ie),{style:Ae(Ge),scope:"col"})}).join(""),re=_.cells.map(function(be){var Ge=be.map(function(qe,Ke){return G("td",K(qe,ie),{style:Ae(Ke)})}).join("");return G("tr",Ge)}).join(""),he=G("thead",G("tr",ee)),De=G("tbody",re);return G("table",he+De)}},newline:{order:it++,match:R(/^(?:\n *)*\n/),parse:q,react:function(_,K,ie){return"\n"},html:function(_,K,ie){return"\n"}},paragraph:{order:it++,match:R(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:x,react:function(_,K,ie){return k("div",ie.key,{className:"paragraph",children:K(_.content,ie)})},html:function(_,K,ie){return G("div",K(_.content,ie),{class:"paragraph"})}},escape:{order:it++,match:$(/^\\([^0-9A-Za-z\s])/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{type:"text",content:ne[1]}}),react:null,html:null},tableSeparator:{order:it++,match:function(_,K){return K.inTable?/^ *\| */.exec(_):null},parse:function(){return{type:"tableSeparator"}},react:function(){return" | "},html:function(){return" &vert; "}},autolink:{order:it++,match:$(/^<([^: >]+:\/[^ >]+)>/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{type:"link",content:[{type:"text",content:ne[1]}],target:ne[1]}}),react:null,html:null},mailto:{order:it++,match:$(/^<([^ >]+@[^ >]+)>/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){var ie=ne[1],Ae=ne[1];return Tt.test(Ae)||(Ae="mailto:"+Ae),{type:"link",content:[{type:"text",content:ie}],target:Ae}}),react:null,html:null},url:{order:it++,match:$(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{type:"link",content:[{type:"text",content:ne[1]}],target:ne[1],title:void 0}}),react:null,html:null},link:{order:it++,match:$(new RegExp("^\\[("+lt+")\\]\\("+bt+"\\)")),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{content:_(ne[1],K),target:pe(ne[2]),title:ne[3]}}),react:function(_,K,ie){return k("a",ie.key,{href:W(_.target),title:_.title,children:K(_.content,ie)})},html:function(_,K,ie){var Ae={href:W(_.target),title:_.title};return G("a",K(_.content,ie),Ae)}},image:{order:it++,match:$(new RegExp("^!\\[("+lt+")\\]\\("+bt+"\\)")),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{alt:ne[1],target:pe(ne[2]),title:ne[3]}}),react:function(_,K,ie){return k("img",ie.key,{src:W(_.target),alt:_.alt,title:_.title})},html:function(_,K,ie){var Ae={src:W(_.target),alt:_.alt,title:_.title};return G("img","",Ae,!1)}},reflink:{order:it++,match:$(new RegExp("^\\[("+lt+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return Kt(ne,K,{type:"link",content:_(ne[1],K)})}),react:null,html:null},refimage:{order:it++,match:$(new RegExp("^!\\[("+lt+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return Kt(ne,K,{type:"image",alt:ne[1]})}),react:null,html:null},em:{order:it,match:$(new RegExp("^\\b_((?:__|\\\\[\\s\\S]|[^\\\\_])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\\\[\\s\\S]|\\s+(?:\\\\[\\s\\S]|[^\\s\\*\\\\]|\\*\\*)|[^\\s\\*\\\\])+?)\\*(?!\\*)")),quality:function(_){return _[0].length+.2},parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{content:_(ne[2]||ne[1],K)}}),react:function(_,K,ie){return k("em",ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("em",K(_.content,ie))}},strong:{order:it,match:$(/^\*\*((?:\\[\s\S]|[^\\])+?)\*\*(?!\*)/),quality:function(_){return _[0].length+.1},parse:x,react:function(_,K,ie){return k("strong",ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("strong",K(_.content,ie))}},u:{order:it++,match:$(/^__((?:\\[\s\S]|[^\\])+?)__(?!_)/),quality:function(_){return _[0].length},parse:x,react:function(_,K,ie){return k("u",ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("u",K(_.content,ie))}},del:{order:it++,match:$(/^~~(?=\S)((?:\\[\s\S]|~(?!~)|[^\s~\\]|\s(?!~~))+?)~~/),parse:x,react:function(_,K,ie){return k("del",ie.key,{children:K(_.content,ie)})},html:function(_,K,ie){return G("del",K(_.content,ie))}},inlineCode:{order:it++,match:$(/^(`+)([\s\S]*?[^`])\1(?!`)/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{content:ne[2].replace(_e,"$1")}}),react:function(_,K,ie){return k("code",ie.key,{children:_.content})},html:function(_,K,ie){return G("code",Y(_.content))}},br:{order:it++,match:Z(/^ {2,}\n/),parse:q,react:function(_,K,ie){return k("br",ie.key,j)},html:function(_,K,ie){return"<br>"}},text:{order:it++,match:Z(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(ne){function _(K,ie,Ae){return ne.apply(this,arguments)}return _.toString=function(){return ne.toString()},_}(function(ne,_,K){return{content:ne[0]}}),react:function(_,K,ie){return _.content},html:function(_,K,ie){return Y(_.content)}}},Gr=function(_,K){var ie=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!K)throw new Error("simple-markdown: outputFor: `property` must be defined. if you just upgraded, you probably need to replace `outputFor` with `reactFor`");var Ae,re=(_.Array||Yt.Array)[K];if(!re)throw new Error("simple-markdown: outputFor: to join nodes of type `"+K+"` you must provide an `Array:` joiner rule with that type, Please see the docs for details on specifying an Array rule.");var he=re,De=function Ge(qe,Ke){return Ae=Ke=Ke||Ae,Array.isArray(qe)?he(qe,Ge,Ke):_[qe.type][K](qe,Ge,Ke)};return function(qe,Ke){return Ae=S(Ke,ie),De(qe,Ae)}},_r=M(Yt),an=function(_,K){return(K=K||{}).inline=!1,_r(_,K)},on=function(_,K){var ie=Fe.test(_);return(K=K||{}).inline=!ie,_r(_,K)},sn=Gr(Yt,"react"),rt=Gr(Yt,"html"),xn=function(_,K){return sn(an(_,K),K)},Za={defaultRules:Yt,parserFor:M,outputFor:Gr,inlineRegex:$,blockRegex:R,anyScopeRegex:Z,parseInline:fe,parseBlock:function(_,K,ie){var Ae=ie.inline||!1;ie.inline=!1;var ee=_(K+"\n\n",ie);return ie.inline=Ae,ee},markdownToReact:xn,markdownToHtml:function(_,K){return rt(an(_,K),K)},ReactMarkdown:function(_){var K={};for(var ie in _)"source"!==ie&&Object.prototype.hasOwnProperty.call(_,ie)&&(K[ie]=_[ie]);return K.children=xn(_.source),k("div",null,K)},defaultBlockParse:an,defaultInlineParse:function(_,K){return(K=K||{}).inline=!0,_r(_,K)},defaultImplicitParse:on,defaultReactOutput:sn,defaultHtmlOutput:rt,preprocess:T,sanitizeText:Y,sanitizeUrl:W,unescapeUrl:pe,htmlTag:G,reactElement:k,defaultRawParse:_r,ruleOutput:function(_,K){return!K&&typeof console<"u"&&console.warn("simple-markdown ruleOutput should take 'react' or 'html' as the second argument."),function(ee,re,he){return _[ee.type][K](ee,re,he)}},reactFor:function(_){return function ie(Ae,ee){if(ee=ee||{},Array.isArray(Ae)){for(var re=ee.key,he=[],De=null,be=0;be<Ae.length;be++){ee.key=""+be;var Ge=ie(Ae[be],ee);"string"==typeof Ge&&"string"==typeof De?he[he.length-1]=De+=Ge:(he.push(Ge),De=Ge)}return ee.key=re,he}return _(Ae,ie,ee)}},htmlFor:function(_){return function ie(Ae,ee){return ee=ee||{},Array.isArray(Ae)?Ae.map(function(re){return ie(re,ee)}).join(""):_(Ae,ie,ee)}},defaultParse:function(){return typeof console<"u"&&console.warn("defaultParse is deprecated, please use `defaultImplicitParse`"),on.apply(null,arguments)},defaultOutput:function(){return typeof console<"u"&&console.warn("defaultOutput is deprecated, please use `defaultReactOutput`"),sn.apply(null,arguments)}}},8587:(Ir,ze,He)=>{He.d(ze,{Z:()=>R});var Ee=He(8504),U=He(4341);const R=Z=>!(Z=>(Z=>{const{r:C,g:k,b:G}=U.Z.parse(Z),j=.2126*Ee.Z.channel.toLinear(C)+.7152*Ee.Z.channel.toLinear(k)+.0722*Ee.Z.channel.toLinear(G);return Ee.Z.lang.round(j)})(Z)>=.5)(Z)},9462:(Ir,ze,He)=>{He.d(ze,{c:()=>j}),He(7528);var U=He(1599),P=He(8096),T=He(1569);function M(W){const le=function S(W){return W.replace(/\n{2,}/g,"\n").replace(/^\s+/gm,"")}(W),Y=(0,T.Z.defaultBlockParse)(le);let te=[[]],pe=0;function fe(Pe,x){"text"===Pe.type?Pe.content.split("\n").forEach((X,J)=>{0!==J&&(pe++,te.push([])),X.split(" ").forEach(ge=>{ge&&te[pe].push({content:ge,type:x||"normal"})})}):("strong"===Pe.type||"em"===Pe.type)&&Pe.content.forEach(q=>{fe(q,Pe.type)})}return Y.forEach(Pe=>{"paragraph"===Pe.type&&Pe.content.forEach(x=>{fe(x)})}),te}function C(W,le,ae){return W.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",le*ae-.1+"em").attr("dy",ae+"em")}function G(W,le){W.text(""),le.forEach((ae,Y)=>{W.append("tspan").attr("font-style","em"===ae.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===ae.type?"bold":"normal").text(0===Y?ae.content:" "+ae.content)})}const j=(W,le="",{style:ae="",isTitle:Y=!1,classes:te="",useHtmlLabels:pe=!0,isNode:fe=!0,width:Pe,addSvgBackground:x=!1}={})=>{if(U.l.info("createText",le,ae,Y,te,pe,fe,x),pe){const q=function $(W){return(0,T.Z.defaultBlockParse)(W).map(function Y(te){return"text"===te.type?te.content.replace(/\n/g,"<br/>"):"strong"===te.type?`<strong>${te.content.map(Y).join("")}</strong>`:"em"===te.type?`<em>${te.content.map(Y).join("")}</em>`:"paragraph"===te.type?`<p>${te.content.map(Y).join("")}</p>`:""}).join("")}(le);return function Z(W,le,ae,Y){const te=W.append("foreignObject"),pe=te.append("xhtml:div");pe.html(`<span class="${le.isNode?"nodeLabel":"edgeLabel"} ${Y}" `+(le.labelStyle?'style="'+le.labelStyle+'"':"")+">"+le.label+"</span>"),function R(W,le){le&&W.attr("style",le)}(pe,le.labelStyle),pe.style("display","table-cell"),pe.style("white-space","nowrap"),pe.style("max-width",ae+"px"),pe.attr("xmlns","http://www.w3.org/1999/xhtml");let x=pe.node().getBoundingClientRect();return x.width===ae&&(pe.style("display","table"),pe.style("white-space","break-spaces"),pe.style("width",ae+"px"),x=pe.node().getBoundingClientRect()),te.style("width",x.width),te.style("height",x.height),te.node()}(W,{isNode:fe,label:(0,P.d)(q).replace(/fa[blrs]?:fa-[\w-]+/g,ge=>`<i class='${ge.replace(":"," ")}'></i>`),labelStyle:ae.replace("fill:","color:")},Pe,te)}{const q=M(le),X=['"',"'",".",",",":",";","!","?","(",")","[","]","{","}"];let J;return q.forEach(Me=>{Me.forEach(Fe=>{X.includes(Fe.content)&&J&&(J.content+=Fe.content,Fe.content=""),J=Fe})}),function k(W,le,ae,Y=!1){const pe=le.append("g");let fe=pe.insert("rect").attr("class","background");const Pe=pe.append("text").attr("y","-10.1");let x=-1;if(ae.forEach(q=>{x++;let ge,X=C(Pe,x,1.1),J=[...q].reverse(),Me=[];for(;J.length;)ge=J.pop(),Me.push(ge),G(X,Me),X.node().getComputedTextLength()>W&&(Me.pop(),J.push(ge),G(X,Me),Me=[],x++,X=C(Pe,x,1.1))}),Y){const q=Pe.node().getBBox(),X=2;return fe.attr("x",-X).attr("y",-X).attr("width",q.width+2*X).attr("height",q.height+2*X),pe.node()}return Pe.node()}(Pe,W,q,x)}}},8715:(Ir,ze,He)=>{He.r(ze),He.d(ze,{diagram:()=>Ae});var Ee=He(5861),U=He(1599),P=He(7528),T=He(2083),S=He(9462),M=He(7846),$=He(1004),R=He(8587),Z=He(5411),C=He(9078),le=(He(896),He(3304),He(398),He(1569),function(){var ee=function($r,Je,Xe,ht){for(Xe=Xe||{},ht=$r.length;ht--;Xe[$r[ht]]=Je);return Xe},re=[1,4],he=[1,13],De=[1,12],be=[1,15],Ge=[1,16],qe=[1,20],Ke=[1,19],ot=[6,7,8],ct=[1,26],Pt=[1,24],Dt=[1,25],vt=[6,7,11],Gt=[1,6,13,15,16,19,22],Ht=[1,33],Tr=[1,34],Sr=[1,6,7,11,13,15,16,19,22],Qt={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(Je,Xe,ht,gt,Ut,tt,Tn){var It=tt.length-1;switch(Ut){case 6:case 7:return gt;case 8:gt.getLogger().trace("Stop NL ");break;case 9:gt.getLogger().trace("Stop EOF ");break;case 11:gt.getLogger().trace("Stop NL2 ");break;case 12:gt.getLogger().trace("Stop EOF2 ");break;case 15:gt.getLogger().info("Node: ",tt[It].id),gt.addNode(tt[It-1].length,tt[It].id,tt[It].descr,tt[It].type);break;case 16:gt.getLogger().trace("Icon: ",tt[It]),gt.decorateNode({icon:tt[It]});break;case 17:case 21:gt.decorateNode({class:tt[It]});break;case 18:gt.getLogger().trace("SPACELIST");break;case 19:gt.getLogger().trace("Node: ",tt[It].id),gt.addNode(0,tt[It].id,tt[It].descr,tt[It].type);break;case 20:gt.decorateNode({icon:tt[It]});break;case 25:gt.getLogger().trace("node found ..",tt[It-2]),this.$={id:tt[It-1],descr:tt[It-1],type:gt.getType(tt[It-2],tt[It])};break;case 26:this.$={id:tt[It],descr:tt[It],type:gt.nodeType.DEFAULT};break;case 27:gt.getLogger().trace("node found ..",tt[It-3]),this.$={id:tt[It-3],descr:tt[It-1],type:gt.getType(tt[It-2],tt[It])}}},table:[{3:1,4:2,5:3,6:[1,5],8:re},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:re},{6:he,7:[1,10],9:9,12:11,13:De,14:14,15:be,16:Ge,17:17,18:18,19:qe,22:Ke},ee(ot,[2,3]),{1:[2,2]},ee(ot,[2,4]),ee(ot,[2,5]),{1:[2,6],6:he,12:21,13:De,14:14,15:be,16:Ge,17:17,18:18,19:qe,22:Ke},{6:he,9:22,12:11,13:De,14:14,15:be,16:Ge,17:17,18:18,19:qe,22:Ke},{6:ct,7:Pt,10:23,11:Dt},ee(vt,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:qe,22:Ke}),ee(vt,[2,18]),ee(vt,[2,19]),ee(vt,[2,20]),ee(vt,[2,21]),ee(vt,[2,23]),ee(vt,[2,24]),ee(vt,[2,26],{19:[1,30]}),{20:[1,31]},{6:ct,7:Pt,10:32,11:Dt},{1:[2,7],6:he,12:21,13:De,14:14,15:be,16:Ge,17:17,18:18,19:qe,22:Ke},ee(Gt,[2,14],{7:Ht,11:Tr}),ee(Sr,[2,8]),ee(Sr,[2,9]),ee(Sr,[2,10]),ee(vt,[2,15]),ee(vt,[2,16]),ee(vt,[2,17]),{20:[1,35]},{21:[1,36]},ee(Gt,[2,13],{7:Ht,11:Tr}),ee(Sr,[2,11]),ee(Sr,[2,12]),{21:[1,37]},ee(vt,[2,25]),ee(vt,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(Je,Xe){if(!Xe.recoverable){var ht=new Error(Je);throw ht.hash=Xe,ht}this.trace(Je)},parse:function(Je){var ht=[0],gt=[],Ut=[null],tt=[],Tn=this.table,It="",Fn=0,pa=0,Hi=tt.slice.call(arguments,1),Zt=Object.create(this.lexer),qr={yy:{}};for(var ma in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ma)&&(qr.yy[ma]=this.yy[ma]);Zt.setInput(Je,qr.yy),qr.yy.lexer=Zt,qr.yy.parser=this,typeof Zt.yylloc>"u"&&(Zt.yylloc={});var Kr=Zt.yylloc;tt.push(Kr);var Cr,Ja=Zt.options&&Zt.options.ranges;this.parseError="function"==typeof qr.yy.parseError?qr.yy.parseError:Object.getPrototypeOf(this).parseError;for(var sr,Zr,mr,ba,zn,Mr,Gn,Qr={};;){if(this.defaultActions[Zr=ht[ht.length-1]]?mr=this.defaultActions[Zr]:((null===sr||typeof sr>"u")&&(Cr=void 0,"number"!=typeof(Cr=gt.pop()||Zt.lex()||1)&&(Cr instanceof Array&&(Cr=(gt=Cr).pop()),Cr=this.symbols_[Cr]||Cr),sr=Cr),mr=Tn[Zr]&&Tn[Zr][sr]),typeof mr>"u"||!mr.length||!mr[0]){var un;for(zn in Gn=[],Tn[Zr])this.terminals_[zn]&&zn>2&&Gn.push("'"+this.terminals_[zn]+"'");un=Zt.showPosition?"Parse error on line "+(Fn+1)+":\n"+Zt.showPosition()+"\nExpecting "+Gn.join(", ")+", got '"+(this.terminals_[sr]||sr)+"'":"Parse error on line "+(Fn+1)+": Unexpected "+(1==sr?"end of input":"'"+(this.terminals_[sr]||sr)+"'"),this.parseError(un,{text:Zt.match,token:this.terminals_[sr]||sr,line:Zt.yylineno,loc:Kr,expected:Gn})}if(mr[0]instanceof Array&&mr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Zr+", token: "+sr);switch(mr[0]){case 1:ht.push(sr),Ut.push(Zt.yytext),tt.push(Zt.yylloc),ht.push(mr[1]),sr=null,pa=Zt.yyleng,It=Zt.yytext,Fn=Zt.yylineno,Kr=Zt.yylloc;break;case 2:if(Qr.$=Ut[Ut.length-(Mr=this.productions_[mr[1]][1])],Qr._$={first_line:tt[tt.length-(Mr||1)].first_line,last_line:tt[tt.length-1].last_line,first_column:tt[tt.length-(Mr||1)].first_column,last_column:tt[tt.length-1].last_column},Ja&&(Qr._$.range=[tt[tt.length-(Mr||1)].range[0],tt[tt.length-1].range[1]]),typeof(ba=this.performAction.apply(Qr,[It,pa,Fn,qr.yy,mr[1],Ut,tt].concat(Hi)))<"u")return ba;Mr&&(ht=ht.slice(0,-1*Mr*2),Ut=Ut.slice(0,-1*Mr),tt=tt.slice(0,-1*Mr)),ht.push(this.productions_[mr[1]][0]),Ut.push(Qr.$),tt.push(Qr._$),ht.push(Tn[ht[ht.length-2]][ht[ht.length-1]]);break;case 3:return!0}}return!0}};function ga(){this.yy={}}return Qt.lexer={EOF:1,parseError:function(Xe,ht){if(!this.yy.parser)throw new Error(Xe);this.yy.parser.parseError(Xe,ht)},setInput:function(Je,Xe){return this.yy=Xe||this.yy||{},this._input=Je,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Je=this._input[0];return this.yytext+=Je,this.yyleng++,this.offset++,this.match+=Je,this.matched+=Je,Je.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Je},unput:function(Je){var Xe=Je.length,ht=Je.split(/(?:\r\n?|\n)/g);this._input=Je+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Xe),this.offset-=Xe;var gt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ht.length-1&&(this.yylineno-=ht.length-1);var Ut=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ht?(ht.length===gt.length?this.yylloc.first_column:0)+gt[gt.length-ht.length].length-ht[0].length:this.yylloc.first_column-Xe},this.options.ranges&&(this.yylloc.range=[Ut[0],Ut[0]+this.yyleng-Xe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Je){this.unput(this.match.slice(Je))},pastInput:function(){var Je=this.matched.substr(0,this.matched.length-this.match.length);return(Je.length>20?"...":"")+Je.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Je=this.match;return Je.length<20&&(Je+=this._input.substr(0,20-Je.length)),(Je.substr(0,20)+(Je.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Je=this.pastInput(),Xe=new Array(Je.length+1).join("-");return Je+this.upcomingInput()+"\n"+Xe+"^"},test_match:function(Je,Xe){var ht,gt,Ut;if(this.options.backtrack_lexer&&(Ut={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ut.yylloc.range=this.yylloc.range.slice(0))),(gt=Je[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=gt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:gt?gt[gt.length-1].length-gt[gt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Je[0].length},this.yytext+=Je[0],this.match+=Je[0],this.matches=Je,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Je[0].length),this.matched+=Je[0],ht=this.performAction.call(this,this.yy,this,Xe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ht)return ht;if(this._backtrack){for(var tt in Ut)this[tt]=Ut[tt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Je,Xe,ht,gt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ut=this._currentRules(),tt=0;tt<Ut.length;tt++)if((ht=this._input.match(this.rules[Ut[tt]]))&&(!Xe||ht[0].length>Xe[0].length)){if(Xe=ht,gt=tt,this.options.backtrack_lexer){if(!1!==(Je=this.test_match(ht,Ut[tt])))return Je;if(this._backtrack){Xe=!1;continue}return!1}if(!this.options.flex)break}return Xe?!1!==(Je=this.test_match(Xe,Ut[gt]))&&Je:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Xe){this.conditionStack.push(Xe)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Xe){return(Xe=this.conditionStack.length-1-Math.abs(Xe||0))>=0?this.conditionStack[Xe]:"INITIAL"},pushState:function(Xe){this.begin(Xe)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Xe,ht,gt,Ut){switch(gt){case 0:return Xe.getLogger().trace("Found comment",ht.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:Xe.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return Xe.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:Xe.getLogger().trace("end icon"),this.popState();break;case 10:return Xe.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return Xe.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return Xe.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return Xe.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:Xe.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return Xe.getLogger().trace("description:",ht.yytext),"NODE_DESCR";case 27:return this.popState(),Xe.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),Xe.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),Xe.getLogger().trace("node end ...",ht.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),Xe.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),Xe.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return Xe.getLogger().trace("Long description:",ht.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\-\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}},ga.prototype=Qt,Qt.Parser=ga,new ga}());le.parser=le;const ae=le,Y=ee=>(0,U.b)(ee,(0,U.g)());let te=[],pe=0,fe={};const J={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},Me=(ee,re)=>{fe[ee]=re},_e=ee=>{switch(ee){case J.DEFAULT:return"no-border";case J.RECT:return"rect";case J.ROUNDED_RECT:return"rounded-rect";case J.CIRCLE:return"circle";case J.CLOUD:return"cloud";case J.BANG:return"bang";case J.HEXAGON:return"hexgon";default:return"no-border"}};let st;const We=ee=>fe[ee],lt=Object.freeze(Object.defineProperty({__proto__:null,addNode:(ee,re,he,De)=>{U.l.info("addNode",ee,re,he,De);const be=(0,U.g)(),Ge={id:pe++,nodeId:Y(re),level:ee,descr:Y(he),type:De,children:[],width:(0,U.g)().mindmap.maxNodeWidth};switch(Ge.type){case J.ROUNDED_RECT:case J.RECT:case J.HEXAGON:Ge.padding=2*be.mindmap.padding;break;default:Ge.padding=be.mindmap.padding}const qe=function(ee){for(let re=te.length-1;re>=0;re--)if(te[re].level<ee)return te[re];return null}(ee);if(qe)qe.children.push(Ge),te.push(Ge);else{if(0!==te.length){let Ke=new Error('There can be only one root. No parent could be found for ("'+Ge.descr+'")');throw Ke.hash={text:"branch "+name,token:"branch "+name,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+name+'"']},Ke}te.push(Ge)}},clear:()=>{te=[],pe=0,fe={}},decorateNode:ee=>{const re=te[te.length-1];ee&&ee.icon&&(re.icon=Y(ee.icon)),ee&&ee.class&&(re.class=Y(ee.class))},getElementById:We,getLogger:()=>U.l,getMindmap:()=>te.length>0?te[0]:null,getNodeById:ee=>te[ee],getType:(ee,re)=>{switch(U.l.debug("In get type",ee,re),ee){case"[":return J.RECT;case"(":return")"===re?J.ROUNDED_RECT:J.CLOUD;case"((":return J.CIRCLE;case")":return J.CLOUD;case"))":return J.BANG;case"{{":return J.HEXAGON;default:return J.DEFAULT}},nodeType:J,get parseError(){return st},sanitizeText:Y,setElementForId:Me,setErrorHandler:ee=>{st=ee},type2Str:_e},Symbol.toStringTag,{value:"Module"}));function sn(ee,re,he,De){(function(ee,re,he,De){const be=De.htmlLabels,Ge=he%11,qe=ee.append("g");re.section=Ge;let Ke="section-"+Ge;Ge<0&&(Ke+=" section-root"),qe.attr("class",(re.class?re.class+" ":"")+"mindmap-node "+Ke);const ot=qe.append("g"),ct=qe.append("g"),Pt=re.descr.replace(/(<br\/*>)/g,"\n");(0,S.c)(ct,Pt,{useHtmlLabels:be,width:re.width,classes:"mindmap-node-label"}),be||ct.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const Dt=ct.node().getBBox(),vt=De.fontSize.replace?De.fontSize.replace("px",""):De.fontSize;if(re.height=Dt.height+1.1*vt*.5+re.padding,re.width=Dt.width+2*re.padding,re.icon)if(re.type===J.CIRCLE)re.height+=50,re.width+=50,qe.append("foreignObject").attr("height","50px").attr("width",re.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+Ge+" "+re.icon),ct.attr("transform","translate("+re.width/2+", "+(re.height/2-1.5*re.padding)+")");else{re.width+=50;const Gt=re.height;re.height=Math.max(Gt,60);const Ht=Math.abs(re.height-Gt);qe.append("foreignObject").attr("width","60px").attr("height",re.height).attr("style","text-align: center;margin-top:"+Ht/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+Ge+" "+re.icon),ct.attr("transform","translate("+(25+re.width/2)+", "+(Ht/2+re.padding/2)+")")}else ct.attr("transform",be?"translate("+(re.width-Dt.width)/2+", "+(re.height-Dt.height)/2+")":"translate("+re.width/2+", "+re.padding/2+")");switch(re.type){case J.DEFAULT:!function(ee,re,he){ee.append("path").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("d",`M0 ${re.height-5} v${10-re.height} q0,-5 5,-5 h${re.width-10} q5,0 5,5 v${re.height-5} H0 Z`),ee.append("line").attr("class","node-line-"+he).attr("x1",0).attr("y1",re.height).attr("x2",re.width).attr("y2",re.height)}(ot,re,Ge);break;case J.ROUNDED_RECT:!function(ee,re){ee.append("rect").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("height",re.height).attr("rx",re.padding).attr("ry",re.padding).attr("width",re.width)}(ot,re);break;case J.RECT:!function(ee,re){ee.append("rect").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("height",re.height).attr("width",re.width)}(ot,re);break;case J.CIRCLE:ot.attr("transform","translate("+re.width/2+", "+ +re.height/2+")"),function(ee,re){ee.append("circle").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("r",re.width/2)}(ot,re);break;case J.CLOUD:!function(ee,re){const he=re.width,De=re.height,be=.15*he,Ge=.25*he,qe=.35*he,Ke=.2*he;ee.append("path").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("d",`M0 0 a${be},${be} 0 0,1 ${.25*he},${-1*he*.1}\n      a${qe},${qe} 1 0,1 ${.4*he},${-1*he*.1}\n      a${Ge},${Ge} 1 0,1 ${.35*he},${1*he*.2}\n\n      a${be},${be} 1 0,1 ${.15*he},${1*De*.35}\n      a${Ke},${Ke} 1 0,1 ${-1*he*.15},${1*De*.65}\n\n      a${Ge},${be} 1 0,1 ${-1*he*.25},${.15*he}\n      a${qe},${qe} 1 0,1 ${-1*he*.5},0\n      a${be},${be} 1 0,1 ${-1*he*.25},${-1*he*.15}\n\n      a${be},${be} 1 0,1 ${-1*he*.1},${-1*De*.35}\n      a${Ke},${Ke} 1 0,1 ${.1*he},${-1*De*.65}\n\n    H0 V0 Z`)}(ot,re);break;case J.BANG:!function(ee,re){const he=re.width,De=re.height,be=.15*he;ee.append("path").attr("id","node-"+re.id).attr("class","node-bkg node-"+_e(re.type)).attr("d",`M0 0 a${be},${be} 1 0,0 ${.25*he},${-1*De*.1}\n      a${be},${be} 1 0,0 ${.25*he},0\n      a${be},${be} 1 0,0 ${.25*he},0\n      a${be},${be} 1 0,0 ${.25*he},${1*De*.1}\n\n      a${be},${be} 1 0,0 ${.15*he},${1*De*.33}\n      a${.8*be},${.8*be} 1 0,0 0,${1*De*.34}\n      a${be},${be} 1 0,0 ${-1*he*.15},${1*De*.33}\n\n      a${be},${be} 1 0,0 ${-1*he*.25},${.15*De}\n      a${be},${be} 1 0,0 ${-1*he*.25},0\n      a${be},${be} 1 0,0 ${-1*he*.25},0\n      a${be},${be} 1 0,0 ${-1*he*.25},${-1*De*.15}\n\n      a${be},${be} 1 0,0 ${-1*he*.1},${-1*De*.33}\n      a${.8*be},${.8*be} 1 0,0 0,${-1*De*.34}\n      a${be},${be} 1 0,0 ${.1*he},${-1*De*.33}\n\n    H0 V0 Z`)}(ot,re);break;case J.HEXAGON:!function(ee,re){const he=re.height,be=he/4,Ge=re.width-re.padding+2*be;!function vr(ee,re,he,De,be){ee.insert("polygon",":first-child").attr("points",De.map(function(Ge){return Ge.x+","+Ge.y}).join(" ")).attr("transform","translate("+(be.width-re)/2+", "+he+")")}(ee,Ge,he,[{x:be,y:0},{x:Ge-be,y:0},{x:Ge,y:-he/2},{x:Ge-be,y:-he},{x:be,y:-he},{x:0,y:-he/2}],re)}(ot,re)}Me(re.id,qe)})(ee,re,he,De),re.children&&re.children.forEach((be,Ge)=>{sn(ee,be,he<0?Ge:he,De)})}function xn(ee,re,he,De){re.add({group:"nodes",data:{id:ee.id,labelText:ee.descr,height:ee.height,width:ee.width,level:De,nodeId:ee.id,padding:ee.padding,type:ee.type},position:{x:ee.x,y:ee.y}}),ee.children&&ee.children.forEach(be=>{xn(be,re,he,De+1),re.add({group:"edges",data:{id:`${ee.id}_${be.id}`,source:ee.id,target:be.id,depth:De,section:be.section}})})}function va(ee,re){return new Promise(he=>{const De=(0,P.Ys)("body").append("div").attr("id","cy").attr("style","display:none"),be=M({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});De.remove(),xn(ee,be,re,0),be.nodes().forEach(function(Ge){Ge.layoutDimensions=()=>{const qe=Ge.data();return{w:qe.width,h:qe.height}}}),be.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),be.ready(Ge=>{U.l.info("Ready",Ge),he(be)})})}M.use($);const Ae={db:lt,renderer:{draw:function(){var ee=(0,Ee.Z)(function*(re,he,De,be){const Ge=(0,U.g)();Ge.htmlLabels=!1,be.db.clear(),be.parser.parse(re),U.l.debug("Rendering mindmap diagram\n"+re,be.parser);const qe=(0,U.g)().securityLevel;let Ke;"sandbox"===qe&&(Ke=(0,P.Ys)("#i"+he));const ct=(0,P.Ys)("sandbox"===qe?Ke.nodes()[0].contentDocument.body:"body").select("#"+he);ct.append("g");const Pt=be.db.getMindmap(),Dt=ct.append("g");Dt.attr("class","mindmap-edges");const vt=ct.append("g");vt.attr("class","mindmap-nodes"),sn(vt,Pt,-1,Ge);const Gt=yield va(Pt,Ge);(function rt(ee,re){re.edges().map((he,De)=>{const be=he.data();if(he[0]._private.bodyBounds){const Ge=he[0]._private.rscratch;U.l.trace("Edge: ",De,be),ee.insert("path").attr("d",`M ${Ge.startX},${Ge.startY} L ${Ge.midX},${Ge.midY} L${Ge.endX},${Ge.endY} `).attr("class","edge section-edge-"+be.section+" edge-depth-"+be.depth)}})})(Dt,Gt),function da(ee){ee.nodes().map((re,he)=>{const De=re.data();De.x=re.position().x,De.y=re.position().y,function(ee){We(ee.id).attr("transform","translate("+(ee.x||0)+","+(ee.y||0)+")")}(De);const be=We(De.nodeId);U.l.info("Id:",he,"Position: (",re.position().x,", ",re.position().y,")",De),be.attr("transform",`translate(${re.position().x-De.width/2}, ${re.position().y-De.height/2})`),be.attr("attr",`apa-${he})`)})}(Gt),(0,T.s)(void 0,ct,Ge.mindmap.padding,Ge.mindmap.useMaxWidth)});return function(he,De,be,Ge){return ee.apply(this,arguments)}}()},parser:ae,styles:ee=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${(ee=>{let re="";for(let he=0;he<ee.THEME_COLOR_LIMIT;he++)ee["lineColor"+he]=ee["lineColor"+he]||ee["cScaleInv"+he],ee["lineColor"+he]=(0,R.Z)(ee["lineColor"+he])?(0,Z.Z)(ee["lineColor"+he],20):(0,C.Z)(ee["lineColor"+he],20);for(let he=0;he<ee.THEME_COLOR_LIMIT;he++)re+=`\n    .section-${he-1} rect, .section-${he-1} path, .section-${he-1} circle, .section-${he-1} polygon, .section-${he-1} path  {\n      fill: ${ee["cScale"+he]};\n    }\n    .section-${he-1} text {\n     fill: ${ee["cScaleLabel"+he]};\n    }\n    .node-icon-${he-1} {\n      font-size: 40px;\n      color: ${ee["cScaleLabel"+he]};\n    }\n    .section-edge-${he-1}{\n      stroke: ${ee["cScale"+he]};\n    }\n    .edge-depth-${he-1}{\n      stroke-width: ${""+(17-3*he)};\n    }\n    .section-${he-1} line {\n      stroke: ${ee["cScaleInv"+he]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return re})(ee)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${ee.git0};\n  }\n  .section-root text {\n    fill: ${ee.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`}}}]);